{"version":3,"sources":["App.js","serviceWorker.js","index.tsx"],"names":["Modal","setAppElement","KEY","objectDistance","b1","arguments","length","undefined","x","y","b2","v1","Victor","v2","distance","towardsBody","origin","target","shadeColor","color","rShade","gShade","bShade","R","parseInt","substring","G","B","toString","OrbitGame","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","screen","width","height","ratio","window","devicePixelRatio","starList","name","num","world","stage","bodies","pendingBodies","bDatabase","Sol","data","solData","parent","index","active","status","marsData","shield","Math","floor","seedrandom","quick","uplink","venusData","phobosData","earthData","saturnData","structures","pendingStructures","sDatabase","rs1","openings","rs2","rs3","rs4","params","gravFalloff","bounceDampening","ball","vx","vy","size","mass","speed","thrustAcc","thrustLevel","heading","power","coll","ct","glow","resources","matter","energy","psi","hm","keys","left","right","up","down","space","proton","mousedown","mouseTick","mouseReleased","mouseObj","init","selectedObj","tick","ts","randomHash","currentScore","inGame","showModal","sharedEB","animationID","timerID","handlePowerChange","bind","assertThisInitialized","handleChargePsi","handleChargeShield","handleSystemChange","handlePlanetToggle","handleStructureToggle","handlePauseStart","handleKeys","mouseupHandler","mousedownHandler","mousemoveHandler","handleOpenModal","handleCloseModal","ui","_this2","starTravelList","toConsumableArray","push","map","star","react_default","a","createElement","App_StarButton","onClick","key","App_Button","style","backgroundColor","text","concat","pos","_this3","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_loop","body","value","v","setState","prevState","_iterator","Symbol","iterator","next","done","_ret","err","return","objectSpread","e","p","id","find","b","keyCode","_x","nativeEvent","layerX","_y","layerY","selectOnCanvas","systemChange","planetToggle","s","structureToggle","system","rngData","rngBody","i","planet","sysStruct","rngStruct","struct","starlist","n","genSysPlanets","genSysStructures","pending","db","dbplanets","slice","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","createPrimary","loadStagePlanets","loadStageStructures","addCoreEmitter","continueGame","currStage","bdb","sdb","bdb2","sdb2","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_step7","_iterator7","_iteratorNormalCompletion8","_didIteratorError8","_iteratorError8","_step8","_iterator8","loadStage","Body","em","emitter","createNewEmitter","splice","color1","hue","rate1","rate2","velocity","damp","life","createPlanet","planets","_iteratorNormalCompletion9","_didIteratorError9","_iteratorError9","_step9","_iterator9","ringStructure","addSegments","ps","borderZoneBehaviour","Proton","CrossZone","RectZone","randomBehaviour","RandomDrift","centerZone","centerBehaviour","Repulsion","_ref","_ref$target","_ref$color","_ref$color2","color2","_ref$mass","_ref$radius","radius","_ref$velocity","_ref$rate","_ref$rate2","_ref$damp","_ref$e","_ref$life","_ref$planetAttraction","planetAttraction","_ref$x","_ref$y","_ref$a","_ref$b","special","Emitter","damping","rate","Rate","Span","addInitialize","Mass","Radius","Life","currVelocity","Velocity","c","Color","addBehaviour","coreAttraction","Attraction","mouseAttract","_this4","psiEmitter","_this5","coreEmitter","_","random","sample","particles","particle","dead","tx","ty","pow","object","targets","gx","gy","_iteratorNormalCompletion10","_didIteratorError10","_iteratorError10","_step10","_iterator10","dist","angle","horizontalAngle","PI","_iteratorNormalCompletion11","_didIteratorError11","_iteratorError11","_step11","_iterator11","arcLength","_iteratorNormalCompletion12","_didIteratorError12","_iteratorError12","_step12","_iterator12","segments","seg","angleDiff","ac","bc","health","console","log","structCollState","bounce","_this6","_iteratorNormalCompletion13","_didIteratorError13","_iteratorError13","_step13","_iterator13","getsPulled","_iteratorNormalCompletion14","_didIteratorError14","_iteratorError14","_step14","_loop2","type","movePlanet","otherBodies","filter","item","_iteratorNormalCompletion15","_didIteratorError15","_iteratorError15","_step15","_iterator15","planetCollision","_iterator14","indexOf","o","dx","dy","pcx","pcy","_iteratorNormalCompletion16","_didIteratorError16","_iteratorError16","_step16","_iterator16","_this$planetCollision","_this$planetCollision2","slicedToArray","cx","cy","g","ballGravPull","t","thrustInput","tl","sqrt","abs","borderCollision","clamp","sc","structCollisionCheck","scx","scy","pc","ballCheckPlanets","stopGame","_this7","requestAnimationFrame","update","clearInterval","cancelAnimationFrame","addEventListener","defineEB","createGalaxy","makePsiEmitter","delta","updatePlanets","updateStructures","planetMotion","_iterator17","_iteratorNormalCompletion17","_step17","layer","moveSegments","moveBall","emitterParticleCheck","_this8","_this9","makeMapInterface","planetList","App_PlanetButton","structList","App_StructureButton","selectionInfo","App_InfoBox","textAlign","listStyle","padding","margin","minWidth","minHeight","obj","fShield","controlButtons","makeControlButtons","canvasCheck","App_GameCanvas","assign","onMouseDown","onMouseUp","onMouseMove","background","className","App_GUIWrap","lib_default","isOpen","contentLabel","onRequestClose","shouldCloseOnOverlayClick","content","maxWidth","fontColor","App_ButtonBlock","App_StatsDisplay","App_Controls","fontSize","alignSelf","borderRadius","Component","GUIWrap","_ref2","children","StatsDisplay","_ref3","transitionDuration","InfoBox","_ref4","fUplink","toFixed","defineProperty","Controls","_ref5","ButtonBlock","_ref6","Button","_ref7","StarButton","_ref8","PlanetButton","_ref9","StructureButton","_ref10","orbitX","orbitY","rot","seed","scale","rstate","rng","int32","rngstate","ox","xPar","yPar","pfdist","rotateDeg","pf","per","aph","speedWarp","dir","force","fade","acos","cos","sin","el","numSeg","gap","rand","arg","_ref11","_ref11$numSeg","_ref11$gap","_ref11$radius","_ref11$speed","_ref11$origin","_ref11$width","_ref11$hue","_ref11$name","_ref11$arg","regen","r","segment","randArc","phase","destroyRandom","destroy","destroySegment","_iteratorNormalCompletion18","_didIteratorError18","_iteratorError18","_step18","_iterator18","int","GameCanvas","_this10","zones","saveContext","psiLevel","emitterList","canvas","protonCanvas","ctx","getContext","createProton","_this11","clickEmitter","createClickEmitter","renderer","CanvasRenderer","onParticleUpdate","globalAlpha","beginPath","strokeStyle","lineWidth","moveTo","old","lineTo","closePath","stroke","addRenderer","pointAttraction","addEmitter","updateWorld","emit","psiEmission","drawStructures","_iteratorNormalCompletion19","_didIteratorError19","_iteratorError19","_step19","_iterator19","drawConnect","drawPlanet","drawBall","drawScore","mouseInput","_iteratorNormalCompletion20","_didIteratorError20","_iteratorError20","_step20","_iterator20","reset","clickEmission","_iteratorNormalCompletion21","_didIteratorError21","_iteratorError21","_step21","_iterator21","emitDirection","verticalAngleDeg","updateEmitters","_iteratorNormalCompletion22","_didIteratorError22","_iteratorError22","_step22","_iterator22","_iteratorNormalCompletion23","_didIteratorError23","_iteratorError23","_step23","_iterator23","removeEmitter","setLineDash","lineDashOffset","shadowBlur","shadowColor","score","fillStyle","font","fillText","blur","arc","fill","ellipse","sGrad","createLinearGradient","addColorStop","_iteratorNormalCompletion24","_didIteratorError24","_iteratorError24","_step24","_iterator24","_iteratorNormalCompletion25","_didIteratorError25","_iteratorError25","_step25","_iterator25","drawSegment","_iteratorNormalCompletion26","_didIteratorError26","_iteratorError26","_step26","_iterator26","drawBeam","lineCap","tc","rotate","rotateBy","App_PureCanvas","contextRef","React","PureCanvas","_this12","ref","node","ErrorBoundary","_this13","hasError","error","info","whiteSpace","componentStack","App","App_ErrorBoundary","App_OrbitGame","Boolean","location","hostname","match","ReactDOM","render","src_App_0","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"0aAYAA,IAAMC,cAAc,SACpB,IAEMC,EACG,GADHA,EAEG,GAFHA,EAGA,GAHAA,EAIE,GAJFA,EAKD,GALCA,EAMD,GANCA,EAOD,GAPCA,EAQD,GARCA,EASG,GAIT,SAASC,IAA2C,IAA5BC,EAA4BC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAzB,CAACG,EAAE,EAAEC,EAAE,GAAIC,EAAcL,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAX,CAACG,EAAE,EAAEC,EAAE,GAC1CE,EAAK,IAAIC,IAAOR,EAAGI,EAAEJ,EAAGK,GACxBI,EAAK,IAAID,IAAOF,EAAGF,EAAEE,EAAGD,GAC5B,OAAOE,EAAGG,SAASD,GAGrB,SAASE,EAAYC,EAAQC,GAE3B,GAAID,GAAQC,EAGV,MAAO,CAAET,GAFCQ,EAAOR,EAAIS,EAAOT,GAAKL,EAAea,EAAQC,GAExCR,GADNO,EAAOP,EAAIQ,EAAOR,GAAKN,EAAea,EAAQC,IAU5D,SAASC,EAAWC,EAAOC,GAAsC,IAA9BC,EAA8BhB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAvBe,EAAQE,EAAejB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAARe,EACnDG,EAAIC,SAASL,EAAMM,UAAU,EAAE,GAAG,IAClCC,EAAIF,SAASL,EAAMM,UAAU,EAAE,GAAG,IAClCE,EAAIH,SAASL,EAAMM,UAAU,EAAE,GAAG,IAUtC,OATAF,EAAIC,SAASD,GAAK,IAAMH,GAAU,KAIlCM,GAHAA,EAAIF,SAASE,GAAK,IAAML,GAAU,MAG3B,IAAKK,EAAE,IACdC,GAHAA,EAAIH,SAASG,GAAK,IAAML,GAAU,MAG3B,IAAKK,EAAE,IAIP,KAH4B,KAHnCJ,EAAKA,EAAE,IAAKA,EAAE,KAGDK,SAAS,IAAItB,OAAY,IAAIiB,EAAEK,SAAS,IAAIL,EAAEK,SAAS,MACjC,IAAxBF,EAAEE,SAAS,IAAItB,OAAY,IAAIoB,EAAEE,SAAS,IAAIF,EAAEE,SAAS,MACjC,IAAxBD,EAAEC,SAAS,IAAItB,OAAY,IAAIqB,EAAEC,SAAS,IAAID,EAAEC,SAAS,SAIhEC,cACJ,SAAAA,EAAYC,GAAO,IAAAC,EAAA,OAAAC,OAAAC,EAAA,EAAAD,CAAAE,KAAAL,IACjBE,EAAAC,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAH,GAAAQ,KAAAH,KAAMJ,KACDQ,MAAQ,CACXC,OAAQ,CACNC,MAAOT,EAAKD,MAAMU,MAClBC,OAAQV,EAAKD,MAAMW,OAGnBC,MAAOC,OAAOC,kBAAoB,GAEpCC,SAAU,CACR,CAACC,KAAK,UAAUC,IAAI,GAAG,CAACD,KAAK,WAAWC,IAAI,GAAG,CAACD,KAAK,cAAcC,IAAI,GAAG,CAACD,KAAK,iBAAiBC,IAAI,GAAG,CAACD,KAAK,kBAAkBC,IAAI,GAAG,CAACD,KAAK,YAAYC,IAAI,GAAG,CAACD,KAAK,YAAYC,IAAI,GAAG,CAACD,KAAK,WAAWC,IAAI,GAAG,CAACD,KAAK,iBAAiBC,IAAI,IAE9OC,MAAO,CACLC,MAAO,MACPC,OAAQ,GACRC,cAAe,GAEfC,UAAW,CACTC,IAAK,CACH,CAACC,KAAMC,GAASC,OAAQ,EAAGC,MAAO,EAAGC,QAAQ,EAAMC,OAAQ,IAC3D,CAACL,KAAMM,EAAUJ,OAAQ,EAAGC,MAAO,EAAGC,QAAQ,EAAMC,OAAQ,CAC1DE,OAAQC,KAAKC,MAA0C,GAApCC,IAAW,KAAKpC,YAAYqC,QAAW,IAC1DC,OAAQJ,KAAKC,MAA0C,GAApCC,IAAW,KAAKpC,YAAYqC,QAAW,MAE5D,CAACX,KAAMa,GAAWX,OAAQ,EAAGC,MAAO,EAAGC,QAAQ,EAAMC,OAAQ,CAC3DE,OAAQC,KAAKC,MAA0C,GAApCC,IAAW,KAAKpC,YAAYqC,QAAW,IAC1DC,OAAQJ,KAAKC,MAA0C,GAApCC,IAAW,KAAKpC,YAAYqC,QAAW,MAE5D,CAACX,KAAMc,EAAYZ,OAAQ,EAAGC,MAAO,EAAGC,QAAQ,EAAMC,OAAQ,IAC9D,CAACL,KAAMe,GAAWb,OAAQ,EAAGC,MAAO,EAAGC,QAAQ,EAAMC,OAAQ,CAC3DE,OAAQC,KAAKC,MAA0C,GAApCC,IAAW,KAAKpC,YAAYqC,QAAW,IAC1DC,OAAQJ,KAAKC,MAA0C,GAApCC,IAAW,KAAKpC,YAAYqC,QAAW,MAE5D,CAACX,KAAMgB,GAAYd,OAAQ,EAAGC,MAAO,EAAGC,QAAQ,EAAOC,OAAQ,CAC7DE,OAAQC,KAAKC,MAA0C,GAApCC,IAAW,KAAKpC,YAAYqC,QAAW,IAC1DC,OAAQJ,KAAKC,MAA0C,GAApCC,IAAW,KAAKpC,YAAYqC,QAAW,QAOhEM,WAAY,GACZC,kBAAmB,GAGnBC,UAAW,CACTpB,IAAK,CACH,CAACC,KAAMoB,GAAKC,SAAU,EAAGlB,MAAO,EAAGC,QAAQ,EAAMC,OAAQ,IACzD,CAACL,KAAMsB,GAAKD,SAAU,EAAGlB,MAAO,EAAGC,QAAQ,EAAMC,OAAQ,IACzD,CAACL,KAAMuB,GAAKF,SAAU,EAAGlB,MAAO,EAAGC,QAAQ,EAAMC,OAAQ,IACzD,CAACL,KAAMwB,GAAKH,SAAU,EAAGlB,MAAO,EAAGC,QAAQ,EAAOC,OAAQ,OAIhEoB,OAAQ,CACNC,YAAa,GACbC,gBAAiB,IAEnBC,KAAM,CACJ1E,EAAG,IACHC,EAAG,IACH0E,GAAI,GACJC,GAAI,GACJC,KAAM,EACNC,KAAM,EACNC,MAAO,EACPC,UAAW,GACXC,YAAa,EACbC,QAAS,EACTC,MAAO,EACPC,MAAM,EACNC,GAAI,EACJ1E,MAAO,UACP2E,KAAM,GAERC,UAAW,CACTC,OAAQ,EACRC,OAAQ,KACRC,IAAK,EACLC,GAAI,GAENC,KAAM,CACJC,KAAQ,EACRC,MAAQ,EACRC,GAAQ,EACRC,KAAQ,EACRC,MAAQ,GAEVC,OAAQ,GAGRC,WAAW,EACXC,UAAW,EACXC,eAAe,EACfC,SAAU,CACRtG,EAAG,IACHC,EAAG,IACHsG,MAAM,GAERC,YAAa,KACbC,KAAM,EACNC,GAAI,EACJC,WAAY,EACZC,aAAc,EACdC,QAAQ,EACRC,WAAW,GAEbvF,EAAKwF,SAAW,GAChBxF,EAAKyF,YAAc,KACnBzF,EAAK0F,QAAU,KACf1F,EAAK2F,kBAAoB3F,EAAK2F,kBAAkBC,KAAvB3F,OAAA4F,EAAA,EAAA5F,QAAA4F,EAAA,EAAA5F,CAAAD,KACzBA,EAAK8F,gBAAkB9F,EAAK8F,gBAAgBF,KAArB3F,OAAA4F,EAAA,EAAA5F,QAAA4F,EAAA,EAAA5F,CAAAD,KACvBA,EAAK+F,mBAAqB/F,EAAK+F,mBAAmBH,KAAxB3F,OAAA4F,EAAA,EAAA5F,QAAA4F,EAAA,EAAA5F,CAAAD,KAC1BA,EAAKgG,mBAAqBhG,EAAKgG,mBAAmBJ,KAAxB3F,OAAA4F,EAAA,EAAA5F,QAAA4F,EAAA,EAAA5F,CAAAD,KAE1BA,EAAKiG,mBAAqBjG,EAAKiG,mBAAmBL,KAAxB3F,OAAA4F,EAAA,EAAA5F,QAAA4F,EAAA,EAAA5F,CAAAD,KAC1BA,EAAKkG,sBAAwBlG,EAAKkG,sBAAsBN,KAA3B3F,OAAA4F,EAAA,EAAA5F,QAAA4F,EAAA,EAAA5F,CAAAD,KAC7BA,EAAKmG,iBAAiBnG,EAAKmG,iBAAiBP,KAAtB3F,OAAA4F,EAAA,EAAA5F,QAAA4F,EAAA,EAAA5F,CAAAD,KACtBA,EAAKoG,WAAWpG,EAAKoG,WAAWR,KAAhB3F,OAAA4F,EAAA,EAAA5F,QAAA4F,EAAA,EAAA5F,CAAAD,KAChBA,EAAKqG,eAAiBrG,EAAKqG,eAAeT,KAApB3F,OAAA4F,EAAA,EAAA5F,QAAA4F,EAAA,EAAA5F,CAAAD,KACtBA,EAAKsG,iBAAmBtG,EAAKsG,iBAAiBV,KAAtB3F,OAAA4F,EAAA,EAAA5F,QAAA4F,EAAA,EAAA5F,CAAAD,KACxBA,EAAKuG,iBAAmBvG,EAAKuG,iBAAiBX,KAAtB3F,OAAA4F,EAAA,EAAA5F,QAAA4F,EAAA,EAAA5F,CAAAD,KACxBA,EAAKwG,gBAAkBxG,EAAKwG,gBAAgBZ,KAArB3F,OAAA4F,EAAA,EAAA5F,QAAA4F,EAAA,EAAA5F,CAAAD,KACvBA,EAAKyG,iBAAmBzG,EAAKyG,iBAAiBb,KAAtB3F,OAAA4F,EAAA,EAAA5F,QAAA4F,EAAA,EAAA5F,CAAAD,KA7HPA,gFAiIF0G,GAAI,IAAAC,EAAAxG,KACbyG,EAAc3G,OAAA4G,EAAA,EAAA5G,CAAOE,KAAKI,MAAMO,UAEtC,OADA8F,EAAeE,KAAK,CAAC/F,KAAK,MAAMC,IAAI,IAC7B4F,EAAeG,IACpB,SAACC,GAAD,OACAC,EAAAC,EAAAC,cAACC,EAAD,CAAYC,QAASV,EAAKX,mBAAoBgB,KAAMA,EAAKjG,KAAM2F,GAAIA,EAAIY,IAAKN,EAAKjG,sDAUnF,MAAO,CALaZ,KAAKI,MAAM+E,OAC/B2B,EAAAC,EAAAC,cAACI,EAAD,CAAQF,QAASlH,KAAKgG,iBAAkBqB,MAAO,CAAEC,gBAAiB,OAASC,KAAK,QAAQJ,IAAK,UAC7FL,EAAAC,EAAAC,cAACI,EAAD,CAAQF,QAASlH,KAAKgG,iBAAkBuB,KAAK,WAAWJ,IAAK,UACvCL,EAAAC,EAAAC,cAACI,EAAD,CAAQF,QAASlH,KAAK2F,gBAAiB0B,MAAO,CAAEC,gBAAiB,WAAaC,KAAI,eAAAC,OAAiBxH,KAAKI,MAAMyD,UAAUG,KAAOmD,IAAK,QACrIL,EAAAC,EAAAC,cAACI,EAAD,CAAQF,QAASlH,KAAKwF,kBAAmB6B,MAAO,CAAEC,gBAAiB,WAAaC,KAAI,WAAAC,OAAaxH,KAAKI,MAAMyD,UAAUE,OAAlC,sBAA8DoD,IAAK,mDAI/JM,GAAK,IAAAC,EAAA1H,KAEZgB,EAAMlB,OAAA4G,EAAA,EAAA5G,CAAOE,KAAKI,MAAMU,MAAME,QAFlB2G,GAAA,EAAAC,GAAA,EAAAC,OAAAxJ,EAAA,IAGlB,IAHkB,IAGlByJ,EAHkBC,EAAA,eAGTC,EAHSF,EAAAG,MAIhB,GAAIhK,EAAewJ,EAAKO,GAAkB,KAAVA,EAAK7E,KAEnC,OAAA+E,EAAOR,EAAKS,SAAS,SAACC,GACpB,MAAO,CACLtD,YAAakD,OALrBK,EAAiBrH,EAAjBsH,OAAAC,cAAAZ,GAAAG,EAAAO,EAAAG,QAAAC,MAAAd,GAAA,EAAyB,KAAAe,EAAAX,IAAA,qBAAAW,EAAA,OAAAA,EAAAR,GAHP,MAAAS,GAAAf,GAAA,EAAAC,EAAAc,EAAA,YAAAhB,GAAA,MAAAU,EAAAO,QAAAP,EAAAO,SAAA,WAAAhB,EAAA,MAAAC,gDAiBlB7H,KAAKmI,SAAS,SAACC,GACb,MAAO,CACLlD,aAAc,EACdrB,UAAU/D,OAAA+I,EAAA,EAAA/I,CAAA,GACLsI,EAAUvE,UADN,CAEPE,OAAQqE,EAAUvE,UAAUE,OAAgC,GAAvBqE,EAAUlD,4DAWrDlF,KAAKmI,SAAS,SAACC,GACb,MAAO,CACLvE,UAAU/D,OAAA+I,EAAA,EAAA/I,CAAA,GACLsI,EAAUvE,UADN,CAEPG,IAAKoE,EAAUvE,UAAUG,IAAI,kDAMlB8E,GACjB,IAAIC,EAAID,EAAE/J,OAAOiK,GAEFhJ,KAAKI,MAAMU,MAAME,OACViI,KAAM,SAAAC,GAAC,OAAIA,EAAEtI,OAASmI,IACrCtH,OAAOE,4CAGLsG,EAAOa,GAChB,IAAI5E,EAAIpE,OAAA+I,EAAA,EAAA/I,CAAA,GAAOE,KAAKI,MAAM8D,MACvB4E,EAAEK,UAAYnL,GAAc8K,EAAEK,UAAYnL,IAASkG,EAAKC,KAAQ8D,EAAM/D,EAAKC,KAAK,EAAE,GAClF2E,EAAEK,UAAYnL,GAAc8K,EAAEK,UAAYnL,IAASkG,EAAKI,KAAQ2D,EAAM/D,EAAKI,KAAK,EAAE,GAClFwE,EAAEK,UAAYnL,GAAc8K,EAAEK,UAAYnL,IAASkG,EAAKE,MAAQ6D,EAAM/D,EAAKE,MAAM,EAAE,GACnF0E,EAAEK,UAAYnL,GAAc8K,EAAEK,UAAYnL,IAASkG,EAAKG,GAAQ4D,EAAM/D,EAAKG,GAAG,EAAE,GAChFyE,EAAEK,UAAYnL,IAAWkG,EAAKK,MAAQ0D,EAAM/D,EAAKK,MAAM,EAAE,GAC5DvE,KAAKmI,SAAS,SAACC,GACb,MAAO,CAAElE,KAAMA,8CAIF4E,GACf,IAAIM,EAAKN,EAAEO,YAAYC,OACnBC,EAAKT,EAAEO,YAAYG,OAEvBxJ,KAAKmI,SAAS,SAACC,GACb,MAAO,CACL3D,WAAW,EACXG,SAAU,CACRtG,EAAG8K,EACH7K,EAAGgL,MAITvJ,KAAKyJ,eAAe,CAACnL,EAAE8K,EAAG7K,EAAEgL,2CAGfT,GACb9I,KAAKmI,SAAS,SAACC,GACb,MAAO,CAAE3D,WAAW,8CAIPqE,GACf,GAAI9I,KAAKI,MAAMqE,UAAW,CACxB,IAAI2E,EAAKN,EAAEO,YAAYC,OACnBC,EAAKT,EAAEO,YAAYG,OACvB,OAAOxJ,KAAKmI,SAAS,SAACC,GACpB,MAAO,CACLxD,SAAU,CACRtG,EAAG8K,EACH7K,EAAGgL,iDAQXvJ,KAAKmI,SAAS,CAAE/C,WAAW,+CAG3BpF,KAAKmI,SAAS,CAAE/C,WAAW,+CAEV0D,GACjB,IAAI/J,EAAS+J,EAAE/J,OAAOiK,GACtB,OAAOhJ,KAAK0J,aAAa3K,8CAER+J,GACjB,IAAIC,EAAID,EAAE/J,OAAOiK,GACjBhJ,KAAK2J,aAAaZ,iDAEED,GACpB,IAAIc,EAAId,EAAE/J,OAAOiK,GACjBhJ,KAAK6J,gBAAgBD,wLAIHhJ,iCAAK,iBAAkBC,iCAAI,iBACvBb,KAAKI,MAAMU,MAAMI,WACxBN,oBAQb,IAPIkJ,EAAS,GACTC,EAAUC,GAAQpJ,EAAM,QACxBiG,EAAO,CACTzF,KAAKtB,OAAA+I,EAAA,EAAA/I,CAAA,GAAKiK,GAAUxI,MAAO,EAAGD,OAAQ,EAAGE,QAAQ,EAAOC,OAAS,IAGnEqI,EAAOnD,KAAKE,GACHoD,EAAE,EAAEA,EAAEpJ,EAAI,EAAEoJ,IACf3I,EAASM,KAAKC,MAAMC,IAAWmI,EAAEvK,YAAYqC,SAASkI,EAAEpJ,GAAK,GAC7DkJ,EAAUC,GAAQpJ,EAAK,IAAIqJ,EAAEvK,WAAY,SAAU,GAAG4B,EAAO,EAAE,IAG/D4I,EAAS,CACX9I,KAAKtB,OAAA+I,EAAA,EAAA/I,CAAA,GAAKiK,GAAUxI,MAAO0I,EAAG3I,OAAQA,EAAQE,QAAQ,EAAOC,OAAQ,CACnEE,OAAQC,KAAKC,MAA2C,GAArCC,IAAW,IAAImI,EAAEvK,YAAYqC,QAAW,IAC3DC,OAAQJ,KAAKC,MAA2C,GAArCC,IAAW,IAAImI,EAAEvK,YAAYqC,QAAW,MAG/D+H,EAAOnD,KAAKuD,4BAGPJ,oCAEK,2RAGOlJ,iCAAK,iBAAkBC,iCAAI,iBAC1Bb,KAAKI,MAAMU,MAAMyB,WACxB3B,mBAEb,IADIuJ,EAAY,GACPF,EAAE,EAAEA,EAAEpJ,EAAIoJ,IACbF,EAAUK,GAAUxJ,EAAK,IAAIqJ,EAAEvK,YAC/B2K,EAAS,CAACjJ,KAAKtB,OAAA+I,EAAA,EAAA/I,CAAA,GAAKiK,GAAUxI,MAAO0I,EAAGxH,SAAU,EAAGjB,QAAQ,GACjE2I,EAAUxD,KAAK0D,4BAGVF,mCAEK,8RAGGG,iCAAS,CAAC,CAAC1J,KAAK,WAAWC,IAAI,GAAG,CAACD,KAAK,WAAWC,IAAI,GAAG,CAACD,KAAK,cAAcC,IAAI,IAE7FK,iBAAgBlB,KAAKI,MAAMU,MAAMI,WACjCqB,iBAAgBvC,KAAKI,MAAMU,MAAMyB,yCACzB+H,2EAALC,oBACYvK,KAAKwK,cAAcD,EAAE3J,KAAK2J,EAAE1J,oBAA3CiJ,mBACkB9J,KAAKyK,iBAAiBF,EAAE3J,KAAK,WAA/CuJ,SACJjJ,EAAUqJ,EAAE3J,MAAQkJ,EACpBvH,EAAUgI,EAAE3J,MAAQuJ,wSAIfnK,KAAKmI,SAAS,SAACC,GACpB,MAAO,CACLtH,MAAMhB,OAAA+I,EAAA,EAAA/I,CAAA,GACDsI,EAAUtH,MADV,CAEHI,UAAWA,EACXqB,UAAWA,+KAMFxB,GACf,IAAM2J,EAAU,GAEVC,EADS7K,OAAA+I,EAAA,EAAA/I,CAAA,GAAOE,KAAKI,MAAMU,MAAMI,WAClBH,GACf6J,EAAYD,EAAGE,MAAM,GAE3B,GAAID,EAAW,KAAAE,GAAA,EAAAC,GAAA,EAAAC,OAAA3M,EAAA,IACb,QAAA4M,EAAAC,EAAmBN,EAAnBtC,OAAAC,cAAAuC,GAAAG,EAAAC,EAAA1C,QAAAC,MAAAqC,GAAA,EAA8B,KAArBZ,EAAqBe,EAAAhD,MACxBiC,EAAO1I,QAAQmJ,EAAGT,EAAO5I,QAAQE,QACnCkJ,EAAQ/D,KAAKuD,IAHJ,MAAAvB,GAAAoC,GAAA,EAAAC,EAAArC,EAAA,YAAAmC,GAAA,MAAAI,EAAAtC,QAAAsC,EAAAtC,SAAA,WAAAmC,EAAA,MAAAC,IAOfhL,KAAKmI,SAAS,SAACC,GACb,MAAO,CACLtH,MAAMhB,OAAA+I,EAAA,EAAA/I,CAAA,GACDsI,EAAUtH,MADV,CAEHG,cAAeyJ,EACf3J,MAAOA,mDAMKA,GAClB,IAAM2J,EAAU,GAEVC,EADS7K,OAAA+I,EAAA,EAAA/I,CAAA,GAAOE,KAAKI,MAAMU,MAAMyB,WAClBxB,GACrB,GAAI4J,EAAI,KAAAQ,GAAA,EAAAC,GAAA,EAAAC,OAAAhN,EAAA,IACN,QAAAiN,EAAAC,EAAmBZ,EAAnBrC,OAAAC,cAAA4C,GAAAG,EAAAC,EAAA/C,QAAAC,MAAA0C,GAAA,EAAuB,KAAdd,EAAciB,EAAArD,MAEjBoC,EAAO7I,QACTkJ,EAAQ/D,KAAK0D,IAJX,MAAA1B,GAAAyC,GAAA,EAAAC,EAAA1C,EAAA,YAAAwC,GAAA,MAAAI,EAAA3C,QAAA2C,EAAA3C,SAAA,WAAAwC,EAAA,MAAAC,IAQRrL,KAAKmI,SAAS,SAACC,GACb,MAAO,CACLtH,MAAMhB,OAAA+I,EAAA,EAAA/I,CAAA,GACDsI,EAAUtH,MADV,CAEHuB,WAAY,GACZC,kBAAmBoI,4KAMX3J,iCAAM,eACdf,KAAKwL,cAAcxL,KAAKI,MAAMU,MAAMI,UAAUH,GAAO,GAAGK,oBAC9DpB,KAAKyL,iBAAiB1K,GACtBf,KAAK0L,oBAAoB3K,GACzBf,KAAK2L,mCACE3L,KAAK4L,uJAID7M,GACX,IAAM8M,EAAY7L,KAAKI,MAAMU,MAAMC,MAC7BG,EAASpB,OAAA+I,EAAA,EAAA/I,CAAA,GAAOE,KAAKI,MAAMU,MAAMI,WACjCqB,EAASzC,OAAA+I,EAAA,EAAA/I,CAAA,GAAOE,KAAKI,MAAMU,MAAMyB,WACjCuJ,EAAM5K,EAAU2K,GAChBE,EAAMxJ,EAAUsJ,GAChBG,EAAO9K,EAAUnC,GACjBkN,EAAO1J,EAAUxD,GAPJmN,GAAA,EAAAC,GAAA,EAAAC,OAAA/N,EAAA,IAQnB,QAAAgO,EAAAC,EAAcR,EAAdxD,OAAAC,cAAA2D,GAAAG,EAAAC,EAAA9D,QAAAC,MAAAyD,GAAA,EAAmB,CAAAG,EAAApE,MACfzG,QAAS,GATM,MAAAmH,GAAAwD,GAAA,EAAAC,EAAAzD,EAAA,YAAAuD,GAAA,MAAAI,EAAA1D,QAAA0D,EAAA1D,SAAA,WAAAuD,EAAA,MAAAC,GAWnB,GAAIL,EAAK,KAAAQ,GAAA,EAAAC,GAAA,EAAAC,OAAApO,EAAA,IACP,QAAAqO,EAAAC,EAAcZ,EAAdzD,OAAAC,cAAAgE,GAAAG,EAAAC,EAAAnE,QAAAC,MAAA8D,GAAA,EAAmB,CAAAG,EAAAzE,MACfzG,QAAS,GAFN,MAAAmH,GAAA6D,GAAA,EAAAC,EAAA9D,EAAA,YAAA4D,GAAA,MAAAI,EAAA/D,QAAA+D,EAAA/D,SAAA,WAAA4D,EAAA,MAAAC,IAXU,IAAAG,GAAA,EAAAC,GAAA,EAAAC,OAAAzO,EAAA,IAgBnB,QAAA0O,EAAAC,EAAchB,EAAd1D,OAAAC,cAAAqE,GAAAG,EAAAC,EAAAxE,QAAAC,MAAAmE,GAAA,EAAoB,CAAAG,EAAA9E,MAChBzG,QAAS,GAjBM,MAAAmH,GAAAkE,GAAA,EAAAC,EAAAnE,EAAA,YAAAiE,GAAA,MAAAI,EAAApE,QAAAoE,EAAApE,SAAA,WAAAiE,EAAA,MAAAC,GAmBnB,GAAIb,EAAM,KAAAgB,GAAA,EAAAC,GAAA,EAAAC,OAAA9O,EAAA,IACR,QAAA+O,EAAAC,EAAcpB,EAAd3D,OAAAC,cAAA0E,GAAAG,EAAAC,EAAA7E,QAAAC,MAAAwE,GAAA,EAAoB,CAAAG,EAAAnF,MAChBzG,QAAS,GAFL,MAAAmH,GAAAuE,GAAA,EAAAC,EAAAxE,EAAA,YAAAsE,GAAA,MAAAI,EAAAzE,QAAAyE,EAAAzE,SAAA,WAAAsE,EAAA,MAAAC,IAKVnN,KAAKmI,SAAS,SAACC,GACb,MAAO,CAELtH,MAAMhB,OAAA+I,EAAA,EAAA/I,CAAA,GACDsI,EAAUtH,MADV,CAEHI,UAAWA,EACXqB,UAAWA,IAEbS,KAAKlD,OAAA+I,EAAA,EAAA/I,CAAA,GACAsI,EAAUpF,KADX,CAEF1E,EAAG8J,EAAU/H,OAAOC,MAAM,EAC1B/B,EAAG6J,EAAU/H,OAAOE,OAAO,OAIjCP,KAAKsN,UAAUvO,iFAKGqC,kFACZyF,EAAO,IAAI0G,GAAKnM,IACjBG,MAAQ,GACPP,EAAS,IACR2F,KAAKE,qBACL7G,KAAKmI,SAAS,SAACC,GACpB,MAAO,CACLtH,MAAMhB,OAAA+I,EAAA,EAAA/I,CAAA,GACDsI,EAAUtH,MADV,CAEHE,OAAQA,EACRD,MAAOK,EAAKR,qJAOsE,IAA7EQ,EAA6EjD,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAxE,KAAKmD,EAAmEnD,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAA5D,EAAEoD,EAA0DpD,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAApD6B,KAAKI,MAAMU,MAAME,OAAO5C,OAAOoP,EAAqBrP,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAlB,KAAKsD,EAAatD,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAN,KAC5E6C,EAAMlB,OAAA4G,EAAA,EAAA5G,CAAOE,KAAKI,MAAMU,MAAME,QAEpCA,EAAOO,GAAS,IAAIgM,GAAKnM,EAAKJ,EAAOM,IACrCN,EAAOO,GAAOA,MAAQA,EACtBP,EAAOO,GAAOkM,QAAUzN,KAAK0N,iBAAiBF,GAC9CxM,EAAOO,GAAOE,OAASA,GACvB,CACEE,OAAQ,EACRK,OAAQ,KAGVhC,KAAKmI,SAAS,SAACC,GACb,MAAO,CACLtH,MAAMhB,OAAA+I,EAAA,EAAA/I,CAAA,GACDsI,EAAUtH,MADV,CAEHE,OAAQA,+CAQd,IADA,IAAM0J,EAAO5K,OAAA4G,EAAA,EAAA5G,CAAOE,KAAKI,MAAMU,MAAMG,eAC5BgJ,EAAE,EAAEA,EAAES,EAAQtM,OAAO6L,IAAK,CACjC,IAAIlB,EAAI2B,EAAQiD,OAAO,EAAE,GAAG,GACvB5E,EAAEyE,KACLzE,EAAEyE,GAAK,CAAEzO,OAAQgK,EAAExH,MAAOuH,EAAG,IAAK8E,OAAQ5O,EAAW+J,EAAE3H,KAAKyM,IAAI,IAAKC,MAAO,EAAGC,MAAO,IAAKC,SAAU,IAAKC,KAAM,KAAOC,KAAM,EAAG9K,KAAM,IAExIpD,KAAKmO,aAAapF,EAAE3H,KAAK2H,EAAEzH,OAAOyH,EAAExH,MAAMwH,EAAEyE,IAAI,KAAKzE,EAAEtH,QAAQ,MAEjEzB,KAAKmI,SAAS,SAACC,GACb,MAAO,CACLtH,MAAMhB,OAAA+I,EAAA,EAAA/I,CAAA,GACDsI,EAAUtH,MADV,CAEHG,cAAeyJ,4CAMV3B,GAEX,IAAM/H,EAAMlB,OAAA4G,EAAA,EAAA5G,CAAOE,KAAKI,MAAMU,MAAME,QAE9BoN,EAAUpN,EAAO6J,MAAM,GACvB9J,EAAQf,KAAKI,MAAMU,MAAMC,MACzBG,EAASpB,OAAA+I,EAAA,EAAA/I,CAAA,GAAOE,KAAKI,MAAMU,MAAMI,WACjCyJ,EAAKzJ,EAAUH,GACfhC,EAAS4L,EAAG1B,KAAM,SAAAC,GAAC,OAAIA,EAAE9H,KAAKR,OAASmI,IAC7C,IAAKhK,EAAOyC,QAAQR,EAAOjC,EAAOuC,QAAS,CACzCqJ,EAAG5L,EAAOwC,OAAOC,QAAS,EAC1B,IAAMkJ,EAAO5K,OAAA4G,EAAA,EAAA5G,CAAOE,KAAKI,MAAMU,MAAMG,eACrCyJ,EAAQ/D,KAAK5H,GACbiB,KAAKmI,SAAS,SAACC,GACb,MAAO,CACLtH,MAAMhB,OAAA+I,EAAA,EAAA/I,CAAA,GACDsI,EAAUtH,MADV,CAEHG,cAAeyJ,EACfxJ,UAAWA,YAKd,GAAInC,EAAOyC,OAAQ,KAAA6M,GAAA,EAAAC,GAAA,EAAAC,OAAAlQ,EAAA,IAEtB,QAAAmQ,EAAAC,EAAiBL,EAAjB9F,OAAAC,cAAA8F,GAAAG,EAAAC,EAAAjG,QAAAC,MAAA4F,GAAA,EAA0B,KAAjBrG,EAAiBwG,EAAAvG,MACxB,GAAID,GAAMA,EAAK1G,SAASN,EAAOjC,EAAOwC,OAAQ,CAC5C,IAAI0I,EAAIjC,EAAKzG,MACboJ,EAAGV,GAAGzI,QAAS,EACfR,EAAOiJ,GAAK,OANM,MAAAtB,GAAA2F,GAAA,EAAAC,EAAA5F,EAAA,YAAA0F,GAAA,MAAAI,EAAA7F,QAAA6F,EAAA7F,SAAA,WAAA0F,EAAA,MAAAC,GAStB5D,EAAG5L,EAAOwC,OAAOC,QAAS,EAC1BR,EAAOjC,EAAOwC,OAAS,KACvBvB,KAAKmI,SAAS,SAACC,GACb,MAAO,CACLtH,MAAMhB,OAAA+I,EAAA,EAAA/I,CAAA,GACDsI,EAAUtH,MADV,CAEHE,OAAQA,EACRE,UAAWA,kDAQ0D,IAA/DE,EAA+DjD,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAA1D,KAAKsE,EAAqDtE,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAA5C,EAAEoD,EAA0CpD,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAApC6B,KAAKI,MAAMU,MAAMuB,WAAWjE,OAC/DiE,EAAUvC,OAAA4G,EAAA,EAAA5G,CAAOE,KAAKI,MAAMU,MAAMuB,YACxCA,EAAWd,GAAS,IAAImN,GAActN,GACtCiB,EAAWd,GAAOoN,YAAYlM,GAC9BJ,EAAWd,GAAOA,MAAQA,EAE1BvB,KAAKmI,SAAS,SAACC,GACb,MAAO,CACLtH,MAAMhB,OAAA+I,EAAA,EAAA/I,CAAA,GACDsI,EAAUtH,MADV,CAEHuB,WAAYA,kDASlB,IAFA,IAAMuM,EAAE9O,OAAA4G,EAAA,EAAA5G,CAAOE,KAAKI,MAAMU,MAAMwB,mBAC1BD,EAAUvC,OAAA4G,EAAA,EAAA5G,CAAOE,KAAKI,MAAMU,MAAMuB,YAC/B4H,EAAE,EAAEA,EAAE2E,EAAGxQ,OAAO6L,IAAK,CAC5B,IAAIlB,EAAI6F,EAAGjB,OAAO,EAAE,GAAG,GAGvBtL,EAAW0G,EAAExH,OAAS,IAAImN,GAAc3F,EAAE3H,MAC1CiB,EAAW0G,EAAExH,OAAOoN,YAAY5F,EAAEtG,UAClCJ,EAAW0G,EAAExH,OAAOA,MAAQwH,EAAExH,MAGhCvB,KAAKmI,SAAS,SAACC,GACb,MAAO,CACLtH,MAAMhB,OAAA+I,EAAA,EAAA/I,CAAA,GACDsI,EAAUtH,MADV,CAEHuB,WAAYA,EACZC,kBAAmBsM,+CAMXhF,GACd,IAAMvH,EAAUvC,OAAA4G,EAAA,EAAA5G,CAAOE,KAAKI,MAAMU,MAAMuB,YAClCtB,EAAQf,KAAKI,MAAMU,MAAMC,MACzBwB,EAASzC,OAAA+I,EAAA,EAAA/I,CAAA,GAAOE,KAAKI,MAAMU,MAAMyB,WACjCoI,EAAKpI,EAAUxB,GACfhC,EAAS4L,EAAG1B,KAAM,SAAAoB,GAAM,OAAIA,EAAOjJ,KAAKR,OAASgJ,IAEvD,GAAK7K,EAAOyC,OAaDzC,EAAOyC,SAChBmJ,EAAG5L,EAAOwC,OAAOC,QAAS,EAC1Ba,EAAWtD,EAAOwC,OAAS,KAC3BvB,KAAKmI,SAAS,SAACC,GACb,MAAO,CACLtH,MAAMhB,OAAA+I,EAAA,EAAA/I,CAAA,GACDsI,EAAUtH,MADV,CAEHuB,WAAYA,EACZE,UAAWA,YArBC,CAClBoI,EAAG5L,EAAOwC,OAAOC,QAAS,EAC1B,IAAMkJ,EAAO5K,OAAA4G,EAAA,EAAA5G,CAAOE,KAAKI,MAAMU,MAAMwB,mBACrCoI,EAAQ/D,KAAK5H,GACbiB,KAAKmI,SAAS,SAACC,GACb,MAAO,CACLtH,MAAMhB,OAAA+I,EAAA,EAAA/I,CAAA,GACDsI,EAAUtH,MADV,CAEHwB,kBAAmBoI,EACnBnI,UAAWA,2CAsBnBvC,KAAKqF,SAASwJ,oBAAsB,IAAIC,IAAOC,UAAU,IAAID,IAAOE,SAAS,EAAG,EAAGhP,KAAKI,MAAMC,OAAOC,MAAON,KAAKI,MAAMC,OAAOE,QAAS,SACvIP,KAAKqF,SAAS4J,gBAAkB,IAAIH,IAAOI,YAAY,EAAG,EAAG,KAC7D,IAAMC,EAAanP,KAAKI,MAAMU,MAAME,OAAO,GAAG,CAC5C1C,EAAG0B,KAAKI,MAAMU,MAAME,OAAO,GAAG1C,EAC9BC,EAAGyB,KAAKI,MAAMU,MAAME,OAAO,GAAGzC,GAC9B,CACAD,EAAG,IACHC,EAAG,KAIL,OADAyB,KAAKqF,SAAS+J,gBAAkB,IAAIN,IAAOO,UAAUF,EAAY,GAAInP,KAAKI,MAAMU,MAAME,OAAO,GAAmC,EAAhChB,KAAKI,MAAMU,MAAME,OAAO,GAAGmC,KAAO,IAC3HnD,KAAKqF,oDAGkM,IAAAiK,EAAAnR,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAnB,GAAmBoR,EAAAD,EAA9LvQ,cAA8L,IAAAwQ,EAAvL,KAAuLA,EAAAC,EAAAF,EAAjL1B,cAAiL,IAAA4B,EAA1K,KAA0KA,EAAAC,EAAAH,EAApKI,cAAoK,IAAAD,EAA7J,KAA6JA,EAAAE,EAAAL,EAAvJlM,YAAuJ,IAAAuM,EAAlJ,EAAkJA,EAAAC,EAAAN,EAA/IO,cAA+I,IAAAD,EAAxI,EAAwIA,EAAAE,EAAAR,EAArItB,gBAAqI,IAAA8B,EAA5H,IAA4HA,EAAAC,EAAAT,EAAvHxB,aAAuH,IAAAiC,EAAjH,GAAiHA,EAAAC,EAAAV,EAA7GvB,aAA6G,IAAAiC,EAAvG,GAAuGA,EAAAC,EAAAX,EAAlGrB,YAAkG,IAAAgC,EAA7F,KAA6FA,EAAAC,EAAAZ,EAAtFxG,SAAsF,IAAAoH,EAApF,OAAoFA,EAAAC,EAAAb,EAA5EpB,YAA4E,IAAAiC,EAAvE,EAAuEA,EAAAC,EAAAd,EAApEe,wBAAoE,IAAAD,KAAAE,EAAAhB,EAA7ChR,SAA6C,IAAAgS,EAA3C,IAA2CA,EAAAC,EAAAjB,EAAtC/Q,SAAsC,IAAAgS,EAApC,IAAoCA,EAAAC,EAAAlB,EAA/BvI,SAA+B,IAAAyJ,EAA7B,EAA6BA,EAAAC,EAAAnB,EAA1BpG,SAA0B,IAAAuH,EAAxB,IAAwBA,EAAfC,EAAevS,UAAAC,OAAA,QAAAC,IAAAF,UAAA,IAAAA,UAAA,GAC1MsP,EAAU,IAAIqB,IAAO6B,QACzBlD,EAAQ3E,EAAIA,EACZ2E,EAAQmD,QAAU3C,EAClBR,EAAQoD,KAAO,IAAI/B,IAAOgC,KAAK,IAAIhC,IAAOiC,KAAKjD,EAAa,IAANA,GAAYC,GAClEN,EAAQuD,cAAcvD,EAAQoD,MAC9BpD,EAAQuD,cAAc,IAAIlC,IAAOmC,KAAK7N,IACtCqK,EAAQuD,cAAc,IAAIlC,IAAOoC,OAAOrB,IACpC3B,GAAQT,EAAQuD,cAAc,IAAIlC,IAAOqC,KAAKjD,IAClDT,EAAQ2D,aAAe,IAAItC,IAAOuC,SAAS,IAAIvC,IAAOiC,KAAK/C,EAAmB,IAATA,GAAe,IAAIc,IAAOiC,KAAKhK,EAAGmC,GAAI,SAC3GuE,EAAQuD,cAAcvD,EAAQ2D,cAC9B,IAAIE,EAAI1D,EAAQ,IAAIkB,IAAOyC,MAAM3D,EAAQ8B,GAAQ9B,GAAU,IAAIkB,IAAOyC,MAAM,UAwC5E,OAvCA9D,EAAQ+D,aAAaF,GAEjBtR,KAAKqF,SAASwJ,qBAAuBpB,EAAQ+D,aAAaxR,KAAKqF,SAASwJ,qBAGxE7O,KAAKqF,SAAS4J,iBAAmBxB,EAAQ+D,aAAaxR,KAAKqF,SAAS4J,iBAQpEjP,KAAKqF,SAAS+J,iBAAmB3B,EAAQ+D,aAAaxR,KAAKqF,SAAS+J,iBAC1D,SAAVsB,GACFjD,EAAQgE,eAAiB,IAAI3C,IAAO4C,WAAW1R,KAAKI,MAAMU,MAAME,OAAO,GAAI,GAAI,KAC/EyM,EAAQ+D,aAAa/D,EAAQgE,iBACV,QAAVf,GACTjD,EAAQ4C,iBAAmB,IAAIvB,IAAO4C,WAAW1R,KAAKI,MAAMU,MAAMI,UAAUlB,KAAKI,MAAMU,MAAMC,OAAOhC,GAAQqC,KAAM,GAAI,KACtHqM,EAAQ+D,aAAa/D,EAAQ4C,mBACpBA,GAA2B,OAATtR,IAC3B0O,EAAQ4C,iBAAmB,IAAIvB,IAAO4C,WAAW1R,KAAKI,MAAMU,MAAMI,UAAUlB,KAAKI,MAAMU,MAAMC,OAAOhC,GAAQqC,KAAM,GAAI,KACtHqM,EAAQ+D,aAAa/D,EAAQ4C,mBAE/B5C,EAAQ1O,OAASA,GAAQ,EACrBA,IAEF0O,EAAQkE,aAAe,IAAI7C,IAAO4C,WAAW1R,KAAKI,MAAMwE,SAAU,EAAG,KACrE6I,EAAQ+D,aAAa/D,EAAQkE,cAC7BlE,EAAQ1E,EAAEzK,EAAIA,EACdmP,EAAQ1E,EAAExK,EAAIA,GAEXQ,IACH0O,EAAQkE,aAAe,IAAI7C,IAAO4C,WAAW1R,KAAKI,MAAMwE,SAAU,EAAG,KACrE6I,EAAQ+D,aAAa/D,EAAQkE,cAC7BlE,EAAQ1E,EAAEzK,EAAIA,EACdmP,EAAQ1E,EAAExK,EAAIA,GAGTkP,2CAGQ,IAAAmE,EAAA5R,KACfA,KAAKmI,SAAS,SAACC,GACb,MAAO,CACL5D,OAAO1E,OAAA+I,EAAA,EAAA/I,CAAA,GACFsI,EAAU5D,OADT,CAEJqN,WAAYD,EAAKlE,iBAAiB,CAAE5E,EAAG,OAAQ8E,OAAQ,UAAW8B,OAAQ,UAAW5B,MAAO,GAAIC,MAAO,IAAMC,SAAU,EAAG5K,KAAM,EAAGyM,OAAQ,EAAG5B,KAAM,KAAOC,KAAS,EAAIwC,QAAQ,sDAMvK,IAAAoB,EAAA9R,KACfA,KAAKmI,SAAS,SAACC,GACb,MAAO,CACL5D,OAAO1E,OAAA+I,EAAA,EAAA/I,CAAA,GACFsI,EAAU5D,OADT,CAEJuN,YAAaD,EAAKpE,iBAAiB,CAAC3O,OAAO,EAAG2R,QAAQ,OAAQ5H,EAAG,EAAG8E,OAAQ5O,EAAW8S,EAAK1R,MAAMU,MAAME,OAAO,GAAG6M,IAAI,IAAI,IAAI,IAAKC,MAAO,EAAGC,MAAO,GAAKC,SAAU,IAAKC,KAAM,KAAOC,KAAM,GAAI9K,KAAM,GAAIyM,OAAQ,EAAGQ,kBAAkB,EAAMtJ,EAAEiL,IAAEC,QAAQ,KAAK,IAAI,GAAI/I,EAAE8I,IAAEC,OAAO,GAAG,KAAK,yDAMzL,IAAlFxE,EAAkFtP,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAA1E6B,KAAKI,MAAMoE,OAAOqN,WAAW9S,EAA6CZ,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAtC6B,KAAKI,MAAMU,MAAME,OAAO,GAAGkR,EAAW/T,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAJ,GAC7FC,EAASqP,EAAQ0E,UAAU/T,OAC3BgR,EAAkB,IAAIN,IAAOO,UAAUrP,KAAKI,MAAMU,MAAME,OAAO,GAAI,GAAoC,GAAhChB,KAAKI,MAAMU,MAAME,OAAO,GAAGmC,MACtG,GAAI/E,EAAO8T,EACT,IAAK,IAAIjI,EAAE,EAAEA,EAAG7L,EAAO8T,EAAQ,EAAEjI,IAAK,CACpC,IAAImI,EAAW3E,EAAQ0E,UAAU/T,GAAQ6L,EAAEiI,EAAO,KAE7CE,EAASC,MAAOpU,EAAemU,EAASrJ,EAAEhK,GAAoB,EAAZA,EAAOoE,OAQ5DiP,EAASZ,aAAa,IAAI1C,IAAOyC,MAAM,UAAW,YAClDa,EAAShP,MAAM,EACfgP,EAASrO,QAAQ,EACjBqO,EAASZ,aAAapC,GACtBpP,KAAKmI,SAAS,SAACC,GACb,MAAO,CACLvE,UAAU/D,OAAA+I,EAAA,EAAA/I,CAAA,GACLsI,EAAUvE,UADN,CAEPC,OAAQsE,EAAUvE,UAAUC,OAAO,+CAW/C,IAAIwO,EAAK,EACLC,EAAK,EAwBT,OAvBIvS,KAAKI,MAAM8D,KAAKG,KAClBkO,GAAMvS,KAAKI,MAAM4C,KAAKM,UAAU1B,KAAK4Q,IAAIxS,KAAKI,MAAM8D,KAAKG,GAAI,IAAK,KAEhErE,KAAKI,MAAM8D,KAAKI,OAClBiO,GAAMvS,KAAKI,MAAM4C,KAAKM,UAAU1B,KAAK4Q,IAAIxS,KAAKI,MAAM8D,KAAKI,KAAM,IAAK,KAElEtE,KAAKI,MAAM8D,KAAKC,OAClBmO,GAAMtS,KAAKI,MAAM4C,KAAKM,UAAU1B,KAAK4Q,IAAIxS,KAAKI,MAAM8D,KAAKC,KAAM,IAAK,KAElEnE,KAAKI,MAAM8D,KAAKE,QAClBkO,GAAMtS,KAAKI,MAAM4C,KAAKM,UAAU1B,KAAK4Q,IAAIxS,KAAKI,MAAM8D,KAAKE,MAAO,IAAK,KAahE,CAACkO,EAAIC,2CAGEE,GACCzS,KAAKI,MAAMyC,OAAOE,gBAAjC,IACMzC,EAAQN,KAAKI,MAAMC,OAAOC,MAC1BC,EAASP,KAAKI,MAAMC,OAAOE,OACjC,OAAIkS,EAAOnU,EAAEmU,EAAOxP,GAAK3C,EAAQmS,EAAOtP,MAAQsP,EAAOnU,EAAEmU,EAAOxP,GAAKwP,EAAOtP,KAgBnE,EAAE,EAAG,GAEVsP,EAAOlU,EAAEkU,EAAOvP,GAAK3C,EAASkS,EAAOtP,MAAQsP,EAAOlU,EAAEkU,EAAOvP,GAAKuP,EAAOtP,KAgBpE,CAAC,GAAI,GAEP,CAAC,EAAG,wCAGAsP,EAAQC,GACnB,IAAIC,EAAK,EACLC,EAAK,EAFmBC,GAAA,EAAAC,GAAA,EAAAC,OAAA1U,EAAA,IAG5B,QAAA2U,EAAAC,EAAiBP,EAAjBpK,OAAAC,cAAAsK,GAAAG,EAAAC,EAAAzK,QAAAC,MAAAoK,GAAA,EAA0B,KAAjB7K,EAAiBgL,EAAA/K,MACxB,GAAID,EAAM,CACR,IAAIkL,EAAOjV,EAAewU,EAAQzK,GAClC2K,GAAM3K,EAAK5E,KAAKvE,EAAY4T,EAAQzK,GAAM1J,EAAEsD,KAAK4Q,IAAIU,EAAOlT,KAAKI,MAAMyC,OAAOC,YAAa,GAC3F8P,GAAM5K,EAAK5E,KAAKvE,EAAY4T,EAAQzK,GAAMzJ,EAAEqD,KAAK4Q,IAAIU,EAAOlT,KAAKI,MAAMyC,OAAOC,YAAa,KAPnE,MAAA6F,GAAAmK,GAAA,EAAAC,EAAApK,EAAA,YAAAkK,GAAA,MAAAI,EAAArK,QAAAqK,EAAArK,SAAA,WAAAkK,EAAA,MAAAC,GAU5B,MAAO,EAAEJ,GAAKC,kDAId,IAAI5P,EAAOhD,KAAKI,MAAM4C,KAClBmQ,GAASzU,IAAOsE,EAAK1E,EAAE0B,KAAKJ,MAAMU,MAAM,EAAG0C,EAAKzE,EAAEyB,KAAKJ,MAAMW,OAAO,GAAG6S,kBAA0B,EAARxR,KAAKyR,KAAe,EAARzR,KAAKyR,IAFzFC,GAIPxT,OAAA4G,EAAA,EAAA5G,CAAOE,KAAKI,MAAMU,MAAMuB,aAJjB,GAAAkR,GAAA,EAAAC,OAAAnV,EAAA,IAKrB,QAAAoV,EAAAC,EAAmB1T,KAAKI,MAAMU,MAAMuB,WAApCiG,OAAAC,cAAA+K,GAAAG,EAAAC,EAAAlL,QAAAC,MAAA6K,GAAA,EAAgD,KAAvCjJ,EAAuCoJ,EAAAxL,MAC9C,GAAIoC,GAAUpM,EAAe+E,EAAKqH,EAAOvL,QAAUuL,EAAOwF,OAAOxF,EAAO/J,MAAM,EAAE0C,EAAKG,MAAQlF,EAAe+E,EAAKqH,EAAOvL,QAAUuL,EAAOwF,OAAOxF,EAAO/J,MAAM,EAAE0C,EAAKG,KAAM,CAExK,IAAIwQ,EAAYtJ,EAAOsJ,UAFiJC,GAAA,EAAAC,GAAA,EAAAC,OAAAzV,EAAA,IAGxK,QAAA0V,EAAAC,EAAgB3J,EAAO4J,SAAvB3L,OAAAC,cAAAqL,GAAAG,EAAAC,EAAAxL,QAAAC,MAAAmL,GAAA,EAAiC,KAAxBM,EAAwBH,EAAA9L,MAC3BkM,EAAY9J,EAAOhH,MAAM,GAC3B8P,EAAMe,EAAIE,GAAY,EAARxS,KAAKyR,KAAe,EAARzR,KAAKyR,IAAMzR,KAAKyR,MACzCF,EAAMe,EAAIG,IAAY,EAARzS,KAAKyR,KAAe,EAARzR,KAAKyR,IAAMzR,KAAKyR,GAC7C,GAAIa,EAAII,OAAO,IAAKH,EAAU,GAAGA,EAAUR,GAAaQ,EAAU,GAAGA,EAAUvS,KAAKyR,GAAGM,GAOrF,OALAO,EAAII,SACa,IAAbJ,EAAII,SACNJ,EAAII,QAAU,EACdC,QAAQC,IAAI,sBAEPxU,KAAKyU,gBAAgBpK,EAAO9I,QAdiI,MAAAoH,GAAAkL,GAAA,EAAAC,EAAAnL,EAAA,YAAAiL,GAAA,MAAAI,EAAApL,QAAAoL,EAAApL,SAAA,WAAAiL,EAAA,MAAAC,MANvJ,MAAAnL,GAAA4K,GAAA,EAAAC,EAAA7K,EAAA,YAAA2K,GAAA,MAAAI,EAAA9K,QAAA8K,EAAA9K,SAAA,WAAA2K,EAAA,MAAAC,GA0BrB,OAAOxT,KAAKyU,iBAAgB,2CAGd/Q,GACd,IAAMgR,EAA2C,GAAlC1U,KAAKI,MAAMyC,OAAOE,gBACjC,OAAW,IAAPW,GAEyB,IAAvB1D,KAAKI,MAAM4C,KAAKU,KACd1D,KAAKI,MAAM2E,KAAK,IAAI,GACtB/E,KAAKmI,SAAS,SAACC,GACb,MAAO,CACLpF,KAAKlD,OAAA+I,EAAA,EAAA/I,CAAA,GACAsI,EAAUpF,KADX,CAEFW,GAAIyE,EAAUpF,KAAKW,GAAG,OAIpB,CAAC,GAAG,EAAE3D,KAAKI,MAAM4C,KAAKW,GAAG,IAAI+Q,EAAO,GAAG,EAAE1U,KAAKI,MAAM4C,KAAKW,GAAG,IAAI+Q,IAEnE,CAAC,EAAG,IAGX1U,KAAKmI,SAAS,SAACC,GACb,MAAO,CACLpF,KAAKlD,OAAA+I,EAAA,EAAA/I,CAAA,GACAsI,EAAUpF,KADX,CAEFU,KAAMA,EACNC,GAAI,OAIH,EAAE,EAAE+Q,GAAQ,EAAEA,MAKI,IAAvB1U,KAAKI,MAAM4C,KAAKU,MAClB1D,KAAKmI,SAAS,SAACC,GACb,MAAO,CACLpF,KAAKlD,OAAA+I,EAAA,EAAA/I,CAAA,GACAsI,EAAUpF,KADX,CAEFU,MAAM,EACNC,GAAI,OAKL,CAAC,EAAG,2CAIA,IAAAgR,EAAA3U,KACPgB,EAAMlB,OAAA4G,EAAA,EAAA5G,CAAOE,KAAKI,MAAMU,MAAME,QAEpC,GAAIhB,KAAKI,MAAMqE,WAAazE,KAAKI,MAAMyD,UAAUE,OAAS,GAAK/D,KAAKI,MAAMsE,UAAU,IAAI,EAAG,KAAAkQ,GAAA,EAAAC,GAAA,EAAAC,OAAAzW,EAAA,IACzF,QAAA0W,EAAAC,EAAmBhU,EAAnBsH,OAAAC,cAAAqM,GAAAG,EAAAC,EAAAxM,QAAAC,MAAAmM,GAAA,EAA2B,KAAlB1K,EAAkB6K,EAAA9M,MACrBiC,GACFA,EAAO+K,WAAW,EAAGjV,KAAKI,MAAMwE,SAAU5E,KAAKI,MAAMsE,YAHgC,MAAAiE,GAAAkM,GAAA,EAAAC,EAAAnM,EAAA,YAAAiM,GAAA,MAAAI,EAAApM,QAAAoM,EAAApM,SAAA,WAAAiM,EAAA,MAAAC,GAMzF9U,KAAKmI,SAAS,SAACC,GACb,MAAO,CACLvE,UAAU/D,OAAA+I,EAAA,EAAA/I,CAAA,GACLsI,EAAUvE,UADN,CAEPE,OAAQqE,EAAUvE,UAAUE,OAAO,OAb9B,IAAAmR,GAAA,EAAAC,GAAA,EAAAC,OAAA/W,EAAA,IAmBb,IAnBa,IAmBbgX,EAnBaC,EAAA,eAmBJpL,EAnBImL,EAAApN,MAoBX,GAAIiC,EAAQ,CACS,IAAfA,EAAO7G,OAAyB,SAAd6G,EAAOqL,MAC3BrL,EAAOsL,aAET,IAAIC,EAAczU,EAAO0U,OAAO,SAAAC,GAAI,OAAIA,IAASzL,IAJvC0L,GAAA,EAAAC,GAAA,EAAAC,OAAAzX,EAAA,IAKV,QAAA0X,EAAAC,EAAiBP,EAAjBnN,OAAAC,cAAAqN,GAAAG,EAAAC,EAAAxN,QAAAC,MAAAmN,GAAA,EAA8B,KAArB5N,EAAqB+N,EAAA9N,MACxBD,GAE+B,IAA7B/J,EAAeiM,EAAQlC,GAAaA,EAAK7E,KAAO+G,EAAO/G,MACzDwR,EAAKsB,gBAAgB/L,EAAQlC,EAAM,IAT/B,MAAAW,GAAAkN,GAAA,EAAAC,EAAAnN,EAAA,YAAAiN,GAAA,MAAAI,EAAApN,QAAAoN,EAAApN,SAAA,WAAAiN,EAAA,MAAAC,MADdI,EAAmBlV,EAAnBsH,OAAAC,cAAA2M,GAAAG,EAAAa,EAAA1N,QAAAC,MAAAyM,GAAA,EAA2BI,IAnBd,MAAA3M,GAAAwM,GAAA,EAAAC,EAAAzM,EAAA,YAAAuM,GAAA,MAAAgB,EAAAtN,QAAAsN,EAAAtN,SAAA,WAAAuM,EAAA,MAAAC,4CAqCCtW,EAAQkJ,EAAMuN,GAC5B,GAAa,IAATA,EAAY,CACd,IAAMb,EAA2C,GAAlC1U,KAAKI,MAAMyC,OAAOE,gBACjC,MAAiC,IAA7B9E,EAAea,EAAQkJ,GAAaA,EAAK7E,KAAOrE,EAAOqE,MACzDnD,KAAKmI,SAAS,SAACC,GACb,MAAO,CACLlD,aAAckD,EAAUlD,aAAe,KAUpC,EAAE,EAAEwP,GAAS,EAAEA,IAEjB,CAAC,EAAG,GACN,GAAa,IAATa,GAA2C,IAA7BtX,EAAea,EAAQkJ,GAAaA,EAAK7E,KAAOrE,EAAOqE,KAE9E,OAAOnD,KAAKmI,SAAS,SAACC,GACpB,IAAIpH,EAAMlB,OAAA4G,EAAA,EAAA5G,CAAOsI,EAAUtH,MAAME,QAC7BkI,EAAIlI,EAAOA,EAAOmV,QAAQnO,IAC1BoO,EAAIpV,EAAOA,EAAOmV,QAAQrX,IAU9B,OATIsX,EAAE/S,QAEJ+S,EAAEC,IAAMxX,EAAYC,EAAQkJ,GAAM1J,GAAG8X,EAAE1S,KAAK0S,EAAEjT,KAAK,IAAI+F,EAAE9F,KAAKgT,EAAEhT,MAChEgT,EAAEE,IAAMzX,EAAYC,EAAQkJ,GAAMzJ,GAAG6X,EAAE1S,KAAK0S,EAAEjT,KAAK,IAAI+F,EAAE9F,KAAKgT,EAAEhT,MAChEgT,EAAE1S,MAAQ,GAKL,CACLG,UAAU/D,OAAA+I,EAAA,EAAA/I,CAAA,GACLsI,EAAUvE,UADN,CAEPC,OAAQsE,EAAUvE,UAAUC,OAAO,IAErC9C,OAAQA,gDAOd,IAAMA,EAAShB,KAAKI,MAAMU,MAAME,OAC1BgC,EAAOhD,KAAKI,MAAM4C,KACpBuT,EAAM,EACNC,EAAM,EAJOC,GAAA,EAAAC,GAAA,EAAAC,OAAAtY,EAAA,IAKjB,QAAAuY,EAAAC,EAAiB7V,EAAjBsH,OAAAC,cAAAkO,GAAAG,EAAAC,EAAArO,QAAAC,MAAAgO,GAAA,EAAyB,KAAhBzO,EAAgB4O,EAAA3O,MACvB,GAAID,EAAM,KAAA8O,EACM9W,KAAKiW,gBAAgBjT,EAAMgF,EAAM,GADvC+O,EAAAjX,OAAAkX,EAAA,EAAAlX,CAAAgX,EAAA,GACHG,EADGF,EAAA,GACAG,EADAH,EAAA,GAEC,IAALE,GAAa,IAALC,IACVX,GAAOU,EACPT,GAAOU,KAVI,MAAAvO,GAAA+N,GAAA,EAAAC,EAAAhO,EAAA,YAAA8N,GAAA,MAAAI,EAAAjO,QAAAiO,EAAAjO,SAAA,WAAA8N,EAAA,MAAAC,GAcjB,OAAIJ,GAAKC,EACA,CAACD,EAAIC,GAEP,CAAC,EAAE,sCAIV,IAAMxT,EAAOhD,KAAKI,MAAM4C,KAClBhC,EAAShB,KAAKI,MAAMU,MAAME,OAC1B0T,EAAS1U,KAAKI,MAAMyC,OAAOE,gBAE7BoU,EAAInX,KAAKoX,aAAapU,EAAMhC,GAC5BqW,EAAIrX,KAAKsX,cACTC,EAAMF,EAAE,IAAIA,EAAE,GAAIzV,KAAK4V,KAAK5V,KAAK4Q,IAAI5Q,KAAK6V,IAAIJ,EAAE,IAAI,GAAGzV,KAAK4Q,IAAI5Q,KAAK6V,IAAIJ,EAAE,IAAI,IAAI,EACnFpU,EAAKjD,KAAKI,MAAM4C,KAAKC,GAAGkU,EAAE,GAAGE,EAAE,GAC/BnU,EAAKlD,KAAKI,MAAM4C,KAAKE,GAAGiU,EAAE,GAAGE,EAAE,GAE/BhD,EAAKrU,KAAK0X,gBAAgB1U,GAE9B,GAAY,IAARqR,EAAG,IAAgB,IAARA,EAAG,GAAQ,CAIxB,IAAIhR,EAAQpF,EAAe+E,EAAM,CAAC1E,EAFlC2E,IAAO,EAAEyR,EAAO,GAEyBnW,EADzC2E,IAAO,EAAEwR,EAAO,KAEhB,OAAO1U,KAAKmI,SAAS,SAACC,GACpB,MAAO,CACLpF,KAAKlD,OAAA+I,EAAA,EAAA/I,CAAA,GACAsI,EAAUpF,KADX,CAEF1E,EAAG0T,IAAE2F,MAAMvP,EAAUpF,KAAK1E,EAAG,EAAG8J,EAAU/H,OAAOC,OAAS2C,EAC1D1E,EAAGyT,IAAE2F,MAAMvP,EAAUpF,KAAKzE,EAAG,EAAG6J,EAAU/H,OAAOE,QAAU2C,EAC3DD,GAAIA,EACJC,GAAIA,EACJG,MAAOA,EAEPE,YAAagU,IAAMnP,EAAUpF,KAAKO,YAAY3B,KAAKC,MAAiC,IAA3BuG,EAAUpF,KAAKO,aAAiB,IAAI,QAMnG,IAAIqU,EAAK5X,KAAK6X,uBACVC,EAAc,IAARF,EAAG,GAAO,EAAEA,EAAG,GACrBG,EAAc,IAARH,EAAG,GAAO,EAAEA,EAAG,GAErBI,EAAKhY,KAAKiY,mBACV1B,EAAc,IAARyB,EAAG,GAAO,EAAEA,EAAG,GACrBxB,EAAc,IAARwB,EAAG,GAAO,EAAEA,EAAG,GAErBF,GAAKvB,GACPtT,IAAO2U,EAAG,GAAGI,EAAG,GAChB9U,IAAO0U,EAAG,GAAGI,EAAG,KAEhB/U,GAAM2U,EAAG,GAAGI,EAAG,GACf9U,GAAM0U,EAAG,GAAGI,EAAG,IAEjB,IAAI3U,EAAQpF,EAAe+E,EAAM,CAAC1E,EAAG2E,EAAI1E,EAAE2E,IAC3C,OAAOlD,KAAKmI,SAAS,SAACC,GACpB,MAAO,CAELpF,KAAKlD,OAAA+I,EAAA,EAAA/I,CAAA,GACAsI,EAAUpF,KADX,CAGF1E,EAAG8J,EAAUpF,KAAK1E,EAAI2E,EAAMmF,EAAUpF,KAAKC,GAAG,EAAI6U,EAAM1P,EAAUpF,KAAKC,GAAG,EAAIsT,EAC9EhY,EAAG6J,EAAUpF,KAAKzE,EAAI2E,EAAMkF,EAAUpF,KAAKE,GAAG,EAAI6U,EAAM3P,EAAUpF,KAAKE,GAAG,EAAIsT,EAC9EvT,GAAIA,EACJC,GAAIA,EACJG,MAAOA,EACPE,YAAagU,IAAMnP,EAAUpF,KAAKO,YAAY3B,KAAKC,MAAiC,IAA3BuG,EAAUpF,KAAKO,aAAiB,IAAI,oDAQ3E,IAAtBvD,KAAKI,MAAM+E,QACbnF,KAAK4L,eACL2I,QAAQC,IAAI,cACmB,IAAtBxU,KAAKI,MAAM+E,SACpBnF,KAAKkY,WACL3D,QAAQC,IAAI,iDAKD,IAAA2D,EAAAnY,KACboY,sBAAsB,SAACf,GAAOc,EAAKE,OAAOhB,KAC1CrX,KAAKmI,SAAS,WACZ,MAAO,CAAEhD,QAAQ,wCAKnBmT,cAActY,KAAKuF,SACnBgT,qBAAqBvY,KAAKsF,aAC1BtF,KAAKmI,SAAS,WACZ,MAAO,CAAEhD,QAAQ,iDAMnB1E,OAAO+X,iBAAiB,QAAWxY,KAAKiG,WAAWR,KAAKzF,MAAM,IAC9DS,OAAO+X,iBAAiB,UAAWxY,KAAKiG,WAAWR,KAAKzF,MAAM,IAE9DA,KAAKmI,SAAS,WACZ,MAAO,CAAEhD,OAAQ,aAEnBnF,KAAKyY,WAELzY,KAAK0Y,aAAa1Y,KAAKI,MAAMO,UAC7BX,KAAKsN,UAAU,OACftN,KAAK2Y,gEAILJ,qBAAqBvY,KAAKsF,oFAUf+R,kGAEPuB,EAAQvB,EAAIrX,KAAKI,MAAM4E,IAxpCV,IADT,qBA0qCN,IAfAhF,KAAKmI,SAAS,SAACC,GACb,MAAO,CACLpD,GAAIqS,EAAKuB,GA5pCE,IADT,IA8pCF7T,KAAMqD,EAAUrD,KAAO,EACvBL,UAAW0D,EAAU3D,UAAY2D,EAAU1D,UAAU,EAAI,EACzDC,eAAgByD,EAAU3D,WAAW2D,EAAU1D,UAAU,KAGzD1E,KAAKI,MAAMU,MAAMG,cAAc7C,OAAO,GACxC4B,KAAK6Y,gBAEH7Y,KAAKI,MAAMU,MAAMwB,kBAAkBlE,OAAO,GAC5C4B,KAAK8Y,mBAEP9Y,KAAK+Y,4CACLC,EAAkBhZ,KAAKI,MAAMU,MAAMuB,WAAnCiG,OAAAC,cAAA0Q,GAAAC,EAAAF,EAAAxQ,QAAAC,MAAAwQ,GAAA,GAASE,EAAsCD,EAAAjR,QAE3CkR,EAAMC,yPAGVpZ,KAAKqZ,WACDrZ,KAAKI,MAAMoE,OAAOqN,WAAWM,UAAU/T,OAAO,GAAG4B,KAAKI,MAAM2E,KAAK,KAAK,GACxE/E,KAAKsZ,qBAAqBtZ,KAAKI,MAAMoE,OAAOqN,WAAW7R,KAAKI,MAAMU,MAAME,OAAO,GAAG,cAG5D,YAAtBhB,KAAKI,MAAM+E,QACboP,QAAQC,IAAI,YAEY,IAAtBxU,KAAKI,MAAM+E,iDACNnF,KAAKsF,YAAc8S,sBAAsB,SAACf,GAAOkC,EAAKlB,OAAOhB,uKAK/D,IAAAmC,EAAAxZ,KAEDuG,EAAK,CACTxB,KAAM/E,KAAKI,MAAM2E,KACjBC,GAAIhF,KAAKI,MAAM4E,GACfG,OAAQnF,KAAKI,MAAM+E,OACnBD,aAAclF,KAAKI,MAAM8E,aACzBnE,MAAOf,KAAKI,MAAMU,MAAMC,MACxBiC,KAAMhD,KAAKI,MAAM4C,KACjBa,UAAW7D,KAAKI,MAAMyD,UACtBY,UAAWzE,KAAKyE,WAGZ1D,EAAQf,KAAKI,MAAMU,MAAMC,MACzB0F,EAAiBzG,KAAKyZ,iBAAiBlT,GAEvCrF,EAASpB,OAAA+I,EAAA,EAAA/I,CAAA,GAAOE,KAAKI,MAAMU,MAAMI,WACjCwY,EAAaxY,EAAUH,IAAQG,EAAUH,GAAO3C,OAAO,EAAE8C,EAAUH,GAAO8J,MAAM,GAAGjE,IACvF,SAACsD,GAAD,OACApD,EAAAC,EAAAC,cAAC2S,EAAD,CAAczS,QAASsS,EAAK1T,mBAAoBkC,KAAMkC,EAAQ/C,IAAK+C,EAAO9I,KAAKR,SAEjF,KAEM2B,EAASzC,OAAA+I,EAAA,EAAA/I,CAAA,GAAOE,KAAKI,MAAMU,MAAMyB,WACjCqX,EAAarX,EAAUxB,GAAOwB,EAAUxB,GAAO6F,IACnD,SAACyD,GAAD,OACAvD,EAAAC,EAAAC,cAAC6S,EAAD,CAAiB3S,QAASsS,EAAKzT,sBAAuBsE,OAAQA,EAAQlD,IAAKkD,EAAOjJ,KAAKR,SAEzF,KAEMkZ,EAAgB9Z,KAAKI,MAAM0E,YACjCgC,EAAAC,EAAAC,cAAC+S,EAAD,CAAS1S,MAAO,CAAEpI,MAAO,UAAWqI,gBAAiB,UAAW0S,UAAU,OAAQC,UAAU,OAAQC,QAAQ,cAAcC,OAAO,aAAaC,SAAS,MAAMC,UAAU,OAAQC,IAAKta,KAAKI,MAAM0E,YAAayV,QAASva,KAAK4F,qBAC1NkB,EAAAC,EAAAC,cAAA,QAAMK,MAAO,CAAC+S,SAAS,MAAMC,UAAU,MAAMF,OAAO,eAApD,8CAEMK,EAAiBxa,KAAKya,qBAEtBC,EAAc1a,KAAKI,MAAMU,MAAME,OAAO,GAC5C8F,EAAAC,EAAAC,cAAC2T,GAAD7a,OAAA8a,OAAA,CAAYC,YAAa7a,KAAKmG,iBAAkB2U,UAAW9a,KAAKkG,eAAgB6U,YAAa/a,KAAKoG,iBAAkBiB,MAAO,CAAE2T,WAAY,YAAiBhb,KAAKI,QAC9J,KAED,OACE0G,EAAAC,EAAAC,cAAA,OAAKiU,UAAU,YACdP,EACD5T,EAAAC,EAAAC,cAACkU,EAAD,CAAS3U,GAAIA,GAEbO,EAAAC,EAAAC,cAACmU,EAAApU,EAAD,CACAqU,OAAQpb,KAAKI,MAAMgF,UACnBiW,aAAa,yBACbC,eAAgBtb,KAAKsG,iBACrBiV,2BAA2B,EAC3BlU,MAAO,CAAEmU,QAAS,CAChBlU,gBAAiB,UACjBmU,SAAU,QAEZlV,GAAIA,GACJO,EAAAC,EAAAC,cAAA,MAAIK,MAAO,CAACqU,UAAW,UAAWvB,OAAO,QAASH,UAAU,WAA5D,cAEAlT,EAAAC,EAAAC,cAAC2U,EAAD,CAAapV,GAAIA,GAChBE,GAEDK,EAAAC,EAAAC,cAAA,UAAQK,MAAO,CAACC,gBAAiB,UAAW4S,QAAQ,QAASC,OAAO,mBAAoBjT,QAASlH,KAAKsG,kBAAtG,UAEAQ,EAAAC,EAAAC,cAAC4U,EAAD,CAAcrV,GAAIA,IAClBO,EAAAC,EAAAC,cAAA,+BACAF,EAAAC,EAAAC,cAAC6U,EAAD,CAAUtV,GAAIA,GACdO,EAAAC,EAAAC,cAAC2U,EAAD,CAAapV,GAAIA,GAChBiU,GAED1T,EAAAC,EAAAC,cAAC2U,EAAD,CAAapV,GAAIA,GAChBqT,GAED9S,EAAAC,EAAAC,cAAC2U,EAAD,CAAapV,GAAIA,GAChBmT,IAGD5S,EAAAC,EAAAC,cAAA,UAAQE,QAASlH,KAAKqG,gBAAiBgB,MAAO,CAACyU,SAAS,QAAQC,UAAU,SAASzU,gBAAiB,UAAW4S,QAAQ,QAAQC,OAAO,aAAa6B,aAAa,QAAhK,cACClC,WAttCiBmC,aA8tClBC,EAAU,SAAAC,KAAG5V,GAAH,IAAO6V,EAAPD,EAAOC,SAAP,OACdtV,EAAAC,EAAAC,cAAA,OAAKiU,UAAU,kBACdmB,IAGGC,EAAe,SAAAC,GAAA,IAAG/V,EAAH+V,EAAG/V,GAAH,OACnBO,EAAAC,EAAAC,cAAA,OAAKiU,UAAU,oBAAoB5T,MAAO,CAACyU,SAAS,QAAQ3B,OAAO,aAAa7Z,MAAM,OAAO4Z,QAAQ,QAAQqC,mBAAmB,MAChIzV,EAAAC,EAAAC,cAAA,KAAGK,MAAO,CAAC2S,UAAU,SAArB,UAAAxS,OAAyCjB,EAAGxF,MAA5C,gBAAAyG,OAAgEjB,EAAG1C,UAAUE,OAA7E,gBAAAyD,OAAkGjB,EAAG1C,UAAUC,OAA/G,aAAA0D,OAAiIjB,EAAG1C,UAAUG,IAA9I,eAAAwD,OAA+JjB,EAAGrB,iBAI9JsX,EAAU,SAAAC,GAAA,IAAGpV,EAAHoV,EAAGpV,MAAOiT,EAAVmC,EAAUnC,IAAKC,EAAfkC,EAAelC,QAAfkC,EAAwBC,QAAxB,OACd5V,EAAAC,EAAAC,cAAA,WAASK,MAAOA,GAChBP,EAAAC,EAAAC,cAAA,MAAIK,MAAO,CAAC+S,SAAS,SACrBtT,EAAAC,EAAAC,cAAA,mBAAAQ,OAAc8S,EAAI1Z,OAClBkG,EAAAC,EAAAC,cAAA,mBAAAQ,OAAc8S,EAAIlX,OAClB0D,EAAAC,EAAAC,cAAA,4BAAAQ,OAAuB8S,EAAIhc,EAAEqe,QAAQ,GAArC,SAAAnV,OAA+C8S,EAAI/b,EAAEoe,QAAQ,KAC7D7V,EAAAC,EAAAC,cAAA,mBAAAQ,OAAc8S,EAAI/E,OAClBzO,EAAAC,EAAAC,cAAA,2BAAAQ,OAAsB8S,GAAIA,EAAI7Y,QAAO6Y,EAAI7Y,OAAOE,OAAO2Y,EAAI7Y,OAAOE,OAAW,IAC7EmF,EAAAC,EAAAC,cAAA,6BAAAQ,OAAwB8S,GAAIA,EAAI7Y,QAAO6Y,EAAI7Y,OAAOO,OAAOsY,EAAI7Y,OAAOO,OAAW,KAE/E8E,EAAAC,EAAAC,cAAA,SAAAlH,OAAA8c,EAAA,EAAA9c,CAAA,CAAQuH,MAAO,CAACyU,SAAU,QAAQ5B,QAAQ,QAAQC,OAAO,SAAUnR,GAAG,eAAezB,KAAK,GAAGL,QAASqT,GAAtG,KAAmHD,EAAI1Z,MAAvH,mBAIIic,EAAW,SAAAC,GAAA,IAAGV,EAAHU,EAAGV,SAAH,OACftV,EAAAC,EAAAC,cAAA,OAAKiU,UAAU,gBAAgB5T,MAAO,CAAC6S,QAAQ,QAAQC,OAAO,UAC7DiC,IAGGW,EAAc,SAAAC,KAAGzW,GAAH,IAAO6V,EAAPY,EAAOZ,SAAP,OAClBtV,EAAAC,EAAAC,cAAA,OAAKiU,UAAU,qBACdmB,IAGGa,EAAS,SAAAC,GAAA,IAAGhW,EAAHgW,EAAGhW,QAASK,EAAZ2V,EAAY3V,KAAMF,EAAlB6V,EAAkB7V,MAAO2B,EAAzBkU,EAAyBlU,GAAzB,OACblC,EAAAC,EAAAC,cAAA,UAAQE,QAASA,EAASqO,KAAK,SAASlO,MAAOA,EAAO2B,GAAIA,GACzDzB,IAGG4V,EAAa,SAAAC,GAAA,IAAGlW,EAAHkW,EAAGlW,QAASL,EAAZuW,EAAYvW,KAAMN,EAAlB6W,EAAkB7W,GAAlB,OACjBO,EAAAC,EAAAC,cAAA,UAAQE,QAASA,EAASqO,KAAK,SAASlO,MAAOd,EAAGxF,QAAQ8F,EAAK,CAACS,gBAAiB,WAAW,CAACA,gBAAiB,WAAY0B,GAAInC,GAA9H,gBACcA,IAGVwW,EAAe,SAAAC,GAAA,IAAEpW,EAAFoW,EAAEpW,QAASc,EAAXsV,EAAWtV,KAAX,OACnBlB,EAAAC,EAAAC,cAAA,UAAQE,QAASA,EAASG,MAAO,CAACC,gBAAe,GAAAE,OAAKxI,EAAWgJ,EAAK5G,KAAKyM,KAAK,MAAQ7E,GAAIhB,EAAK5G,KAAKR,MAAtG,kBAA4HoH,EAAK5G,KAAKR,OAElI2c,EAAkB,SAAAC,GAAA,IAAEtW,EAAFsW,EAAEtW,QAASmD,EAAXmT,EAAWnT,OAAX,OACtBvD,EAAAC,EAAAC,cAAA,UAAQE,QAASA,EAASG,MAAO,CAACC,gBAAe,GAAAE,OAAKxI,EAAWqL,EAAOjJ,KAAKyM,KAAK,MAAQ7E,GAAIqB,EAAOjJ,KAAKR,MAA1G,qBAAmIyJ,EAAOjJ,KAAKR,OAI3Ic,EAAW,CACfyB,KAAM,EACNsa,OAAQ,IACRC,OAAQ,IACRC,IAAK,IACLta,OAAQ,IACRD,KAAM,IACNyK,IAAK,UACLjK,KAAM,GACNuP,MAAO,EACPvS,KAAM,QAGFsB,EAAa,CACjBiB,KAAM,EACNsa,OAAQ,GACRC,OAAQ,GACRC,IAAK,IACLta,MAAO,IACPD,KAAM,GACNyK,IAAK,UACLjK,KAAM,GACNuP,MAAO,GACPvS,KAAM,UAGFqB,GAAY,CAChBkB,KAAM,GACNsa,OAAQ,IACRC,OAAQ,GACRC,IAAK,IACLta,MAAO,EACPD,KAAM,IACNyK,IAAK,UACLjK,KAAM,GACNuP,MAAO,GACPvS,KAAM,SAGFuB,GAAY,CAChBgB,KAAM,GACNsa,OAAQ,IACRC,OAAQ,IACRC,IAAK,GACLta,MAAO,EACPD,KAAM,IACNyK,IAAK,UACLjK,KAAM,IACNuP,MAAO,GACPvS,KAAM,SAGFS,GAAU,CACd8B,KAAM,GACNsa,OAAQ,EACRpa,MAAO,EACPD,KAAM,IACNyK,IAAK,UACLjK,KAAM,IACNuP,MAAO,EACPvS,KAAM,OAGFwB,GAAa,CACjBe,KAAM,GACNsa,OAAQ,IACRpa,MAAO,GACPD,KAAM,IACNyK,IAAK,UACLjK,KAAM,EACNuP,MAAO,IACPvS,KAAM,UAGR,SAASoJ,GAAQ4T,GAA4C,IAAtCrI,EAAsCpX,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAjC,SAAU0f,EAAuB1f,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAjB,EAAG2f,EAAc3f,UAAAC,OAAA,QAAAC,IAAAF,UAAA,IAAAA,UAAA,GACvD4f,EAAMjc,IAAW8b,EAAM,CAACxd,MAAO0d,IACnC,GAAW,SAAPvI,EACF,MAAO,CACLkI,OAAQ,EACRpa,MAAO,EACPF,KAAMvB,KAAKC,OAAmB,GAAZkc,EAAIhc,QAAW,IAAI8b,GACrCza,KAAMxB,KAAKC,OAAmB,IAAZkc,EAAIhc,QAAY,IAAI8b,GACtChQ,IAAK,IAAMkQ,EAAIC,QAAQte,SAAS,IAAKmL,OAAO,GAC5CjH,KAAM,IACNhD,KAAMgd,EAAK,WACXK,SAAUH,EAAOC,EAAI3d,MAAM,MAG/B,IAAI8d,EAAKtc,KAAKC,MAAkB,IAAZkc,EAAIhc,QAAYH,KAAK4Q,IAAIqL,EAAO,KACpD,MAAO,CACLJ,OAAQS,EACRR,OAAQQ,EAAGtc,KAAKC,MAAM,EAAc,GAAZkc,EAAIhc,QAAWH,KAAK4Q,IAAIqL,EAAO,MACvDF,IAAK/b,KAAKC,MAAM,IAAIkc,EAAIhc,SACxBoR,MAAOvR,KAAKC,MAAM,IAAIkc,EAAIhc,SAC1BsB,SAAsB,IAAZ0a,EAAIhc,QAAY,IAAK8b,GAAOlB,QAAQ,GAC9CxZ,KAAMvB,KAAKC,OAAmB,GAAZkc,EAAIhc,QAAW,GAAGH,KAAK4Q,IAAIqL,EAAO,OACpDza,KAAMxB,KAAKC,OAAmB,IAAZkc,EAAIhc,QAAY,IAAI8b,GACtChQ,IAAK7O,EAAW,IAAM+e,EAAIC,QAAQte,SAAS,IAAKmL,OAAO,GAAI,IAC3DjH,KAAMhC,KAAKC,MAAM,GAAGkc,EAAIhc,SAAS,GACjCnB,KAAMgd,EACNK,SAAUH,EAAOC,EAAI3d,MAAM,UAIzBmN,cACJ,SAAAA,EAAYnM,GAAmB,IAAbE,EAAanD,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAN,KAAM2B,OAAAC,EAAA,EAAAD,CAAAE,KAAAuN,GAC7BvN,KAAKoB,KAAOA,EACZpB,KAAKsB,OAASA,EACdtB,KAAKme,KAAOne,KAAKsB,OAAStB,KAAKsB,OAAOhD,EAAI8C,EAAK+c,MAAM,IACrDne,KAAKoe,KAAOpe,KAAKsB,OAAStB,KAAKsB,OAAO/C,EAAI6C,EAAKgd,MAAM,IACrDpe,KAAKmD,KAAO/B,EAAK+B,MAAM,GACvBnD,KAAKyd,OAASrc,EAAKqc,QAAQ,EAC3Bzd,KAAK0d,OAAStc,EAAKsc,QAAQ1d,KAAKyd,OAChCzd,KAAKuV,KAAOnU,EAAKqc,OAAO,EAAI,SAAW,OACvCzd,KAAK2d,IAAMvc,EAAKuc,KAAK,EACjB3d,KAAKyd,SAASzd,KAAK0d,SACrB1d,KAAK8I,EAAIlH,KAAK4V,KAAK,EAAK5V,KAAK4Q,IAAIxS,KAAK0d,OAAQ,GAAG9b,KAAK4Q,IAAIxS,KAAKyd,OAAQ,IACvEzd,KAAKqe,OAAS,IAAI3f,IAAOsB,KAAKyd,OAAOzd,KAAK8I,EAAG,GAC7C9I,KAAKqe,OAAOC,UAAUte,KAAK2d,KAC3B3d,KAAKue,GAAK,CACRjgB,EAAG0B,KAAKme,KAAOne,KAAKqe,OAAO/f,EAC3BC,EAAGyB,KAAKoe,KAAOpe,KAAKqe,OAAO9f,GAE7ByB,KAAKwe,IAAMxe,KAAKyd,OAAOzd,KAAKyd,OAAOzd,KAAK8I,EACxC9I,KAAKye,IAAMze,KAAKyd,OAAOzd,KAAKyd,OAAOzd,KAAK8I,GAE1C9I,KAAKqD,MAAQjC,EAAKiC,OAAO,EACzBrD,KAAK0e,UAAY,EACjB1e,KAAKoD,KAAOhC,EAAKgC,MAAM,EACvBpD,KAAK6N,IAAMzM,EAAKyM,KAAK,UACrB7N,KAAK4D,KAAOxC,EAAKwC,MAAM,EACvB5D,KAAKY,KAAOQ,EAAKR,MAAM,UACvBZ,KAAKmT,MAAQ/R,EAAK+R,OAAO,EACzBnT,KAAK2e,IAAM3e,KAAKqD,MAAM,EAAE,GAAG,EAC3BrD,KAAK1B,EAAI0B,KAAKme,KAAOne,KAAKyd,OAC1Bzd,KAAKzB,EAAIyB,KAAKoe,KAAOpe,KAAK0d,OAC1B1d,KAAKqW,GAAK,EACVrW,KAAKsW,GAAK,EACVtW,KAAK0D,KAAO,EACZ6Q,QAAQC,IAAI,kBAAkBxU,KAAKY,MACnCZ,KAAKie,SAAW7c,EAAK6c,UAAU,yDAGtBW,EAAO7f,GAAgB,IAARgG,EAAQ5G,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAH,EACzB+U,EAAOjV,EAAe+B,KAAMjB,GAC5B8f,EAAO,EAAQ,IAAL9Z,EACd/E,KAAK0e,UAAmB,IAANE,EAAU5e,KAAKoD,MAAOxB,KAAK4Q,IAAW,GAAPU,EAAY,KAAK2L,GAC9D3L,EAAiB,EAAVlT,KAAKmD,KAAO0b,IACrB7e,KAAKqW,IAAMuI,EAAM/f,EAAYmB,KAAMjB,GAAQT,GAAGsD,KAAK4Q,IAAW,IAAPU,EAAa,KAAK2L,GACzE7e,KAAKsW,IAAMsI,EAAM/f,EAAYmB,KAAMjB,GAAQR,GAAGqD,KAAK4Q,IAAW,IAAPU,EAAa,KAAK2L,yCAkB3E,GAbA7e,KAAKmT,OAASnT,KAAKyd,SAASzd,KAAK0d,OAChC9b,KAAKkd,KAAK,EAAIld,KAAK4Q,IAAKxS,KAAKqD,OAAO,EAAErD,KAAK0e,WAAY1e,KAAKyd,OAAQ,GAAG,GAAG7b,KAAKyR,GAAG,EAAGrT,KAAK2e,IAC1F/c,KAAKkd,KAAK,EAAIld,KAAK4Q,IAAKxS,KAAKqD,OAAO,EAAErD,KAAK8I,EAAElH,KAAKmd,IAAI/e,KAAKmT,SAAS,EAAEnT,KAAK0e,WAAY1e,KAAKyd,OAAQ,GAAG,GAAG7b,KAAKyR,GAAG,EAAGrT,KAAK2e,IAGvH3e,KAAKsB,SACPtB,KAAKme,KAAOne,KAAKsB,OAAOhD,EACxB0B,KAAKoe,KAAOpe,KAAKsB,OAAO/C,EACpByB,KAAKyd,SAASzd,KAAK0d,SACrB1d,KAAKme,MAAQne,KAAKqe,OAAO/f,EACzB0B,KAAKoe,MAAQpe,KAAKqe,OAAO9f,IAGzByB,KAAKyd,SAASzd,KAAK0d,OACrB1d,KAAK1B,EAAI0B,KAAKme,KAAOne,KAAKyd,OAAS7b,KAAKmd,IAAI/e,KAAKmT,OAASnT,KAAKqW,GAC/DrW,KAAKzB,EAAIyB,KAAKoe,KAAOpe,KAAK0d,OAAS9b,KAAKod,IAAIhf,KAAKmT,OAASnT,KAAKsW,OAE5D,CACH,IAAI2I,EAAK,IAAIvgB,IAAOsB,KAAKyd,OAAS7b,KAAKmd,IAAI/e,KAAKmT,OAAQnT,KAAK0d,OAAS9b,KAAKod,IAAIhf,KAAKmT,QACpF8L,EAAGX,UAAUte,KAAK2d,KAClB3d,KAAK1B,EAAI0B,KAAKme,KAAOc,EAAG3gB,EAAI0B,KAAKqW,GACjCrW,KAAKzB,EAAIyB,KAAKoe,KAAOa,EAAG1gB,EAAIyB,KAAKsW,GAE/BtW,KAAKqW,KACPrW,KAAKqW,GAAKzU,KAAK6V,IAAIzX,KAAKqW,IAAI,EAAY,IAARrW,KAAKqW,GAAU,GAE7CrW,KAAKsW,KACPtW,KAAKsW,GAAK1U,KAAK6V,IAAIzX,KAAKsW,IAAI,EAAY,IAARtW,KAAKsW,GAAU,GAE7CtW,KAAK0e,YACP1e,KAAK0e,UAAY1e,KAAK0e,UAAU,GAAqB,GAAf1e,KAAK0e,UAAgB,GAEzD1e,KAAK0D,MACP1D,KAAK0D,gBAMLlB,GAAM,CAAE0c,OAAQ,EAAGC,IAAK,IAAMtP,OAAQ,IAAKxM,OAAQ,IAAKvE,OAAQ,CAACR,EAAG,IAAKC,EAAG,KAAM+B,MAAO,GAAIuN,IAAK,UAAWjN,KAAM,MACnH8B,GAAM,CAAEwc,OAAQ,GAAIC,IAAK,GAAKtP,OAAQ,IAAKxM,MAAO,GAAKvE,OAAQ,CAACR,EAAG,IAAKC,EAAG,KAAM+B,MAAO,GAAIuN,IAAK,UAAWjN,KAAM,MAClH+B,GAAM,CAAEuc,OAAQ,EAAGC,IAAK,GAAKtP,OAAQ,GAAIxM,MAAO,GAAKvE,OAAQ,CAACR,EAAG,IAAKC,EAAG,KAAM+B,MAAO,GAAIuN,IAAK,UAAWjN,KAAM,MAChHgC,GAAM,CAAEsc,OAAQ,GAAIC,IAAK,GAAKtP,OAAQ,IAAKxM,MAAO,GAAKvE,OAAQ,CAACR,EAAG,IAAKC,EAAG,KAAM+B,MAAO,GAAIuN,IAAK,UAAWjN,KAAM,MAExH,SAASwJ,GAAUwT,GAA6B,IAAvBC,EAAuB1f,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAjB,EAAG2f,EAAc3f,UAAAC,OAAA,QAAAC,IAAAF,UAAA,IAAAA,UAAA,GAC1CihB,EAAOtd,IAAW8b,EAAM,CAACxd,MAAO0d,IAEpC,MAAO,CACLoB,OAAsC,EAA9Btd,KAAKC,MAAM,EAAE,GAAGud,EAAKrd,SAC7Bsd,IAAK,EACLF,IAAKvd,KAAKC,MAAM,GAAGud,EAAKrd,SAAS,IACjCsB,OAAsB,IAAb+b,EAAKrd,QAAa8b,GAAOlB,QAAQ,GAAG,EAC7Crc,MAAOsB,KAAKC,MAA0B,GAAN,GAAbud,EAAKrd,QAAW,IACnC8N,OAAQjO,KAAKC,MAAoB,IAAbud,EAAKrd,QAAa,IACtC8L,IAAK7O,EAAW,IAAMogB,EAAKpB,QAAQte,SAAS,IAAKmL,OAAO,GAAI,IAC5DjH,KAAMhC,KAAKC,MAAM,GAAGud,EAAKrd,SAAS,GAClCnB,KAAMgd,EACNK,SAAUH,EAAOsB,EAAKhf,MAAM,KAC5BtB,OAAQ,CAACR,EAAG,IAAKC,EAAG,UAIlBmQ,cACJ,SAAAA,IAA0I,IAAA4Q,EAAAnhB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAJ,GAAIohB,EAAAD,EAA7HJ,cAA6H,IAAAK,EAAtH,EAAsHA,EAAAC,EAAAF,EAAnHH,WAAmH,IAAAK,EAA/G,GAA+GA,EAAAC,EAAAH,EAA1GzP,cAA0G,IAAA4P,EAAnG,IAAmGA,EAAAC,EAAAJ,EAA9Fjc,aAA8F,IAAAqc,EAAxF,EAAwFA,EAAAC,EAAAL,EAArFxgB,cAAqF,IAAA6gB,EAA9E,CAACrhB,EAAG,IAAKC,EAAG,KAAkEohB,EAAAC,EAAAN,EAA5Dhf,aAA4D,IAAAsf,EAAtD,GAAsDA,EAAAC,EAAAP,EAAlDzR,WAAkD,IAAAgS,EAA9C,UAA8CA,EAAAC,GAAAR,EAAnC1b,KAAmC0b,EAA5B1e,aAA4B,IAAAkf,EAAvB,YAAuBA,EAAAC,EAAAT,EAAXD,WAAW,IAAAU,EAAP,EAAOA,EAAAjgB,OAAAC,EAAA,EAAAD,CAAAE,KAAA0O,GACxI1O,KAAKkf,OAASA,EACdlf,KAAKqf,IAAMA,EACXrf,KAAKmf,IAAMA,EACXnf,KAAK6P,OAASA,EACd7P,KAAKqD,MAAQA,EACbrD,KAAK2e,IAAMtb,EAAM,GAAG,EAAE,EACtBrD,KAAKlB,OAASA,EACdkB,KAAKM,MAAQA,EACbN,KAAK6N,IAAMA,EACX7N,KAAK4D,KAAO,GACZ5D,KAAKggB,MAAQ,EACbhgB,KAAKiU,SAAW,GAChBjU,KAAKY,KAAOA,EAEZZ,KAAK2T,UAAqB,EAAR/R,KAAKyR,IAAM,EAAE8L,GAAMD,4DAerC,IAXsB,IAAZzc,EAAYtE,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAH,EACfkhB,EAAiB,IAAXrf,KAAK2e,IAAQ3e,KAAKqf,IAAIrf,KAAKqf,IAAY,EAARzd,KAAKyR,GAE1C6L,GADMlf,KAAKmf,IACFnf,KAAKkf,QACde,EAAIjgB,KAAK6P,OACT/Q,EAASkB,KAAKlB,OACdwB,EAAQN,KAAKM,MACbuN,EAAM7N,KAAK6N,IACXjK,EAAO5D,KAAK4D,KACZ+a,EAAM3e,KAAK2e,IACXhL,EAAY3T,KAAK2T,UACZ1J,EAAE,EAAEA,EAAEiV,EAAOjV,IAAK,CACzB,IAAIiW,EAAU,CACZnZ,EAAGsY,EACHnW,EAAGmW,EAAM1L,EACTA,UAAWA,EACXwM,QAASnO,IAAEC,OAAiB,GAAV0B,GAAc,GAChCsM,EAAGA,EACH7L,GAAIiL,GAAa,EAARzd,KAAKyR,IACdgB,IAAKgL,EAAM1L,IAAoB,EAAR/R,KAAKyR,IAC5BsL,IAAKA,EACL7f,OAAQA,EACRwB,MAAOA,EACPuN,IAAS,IAAJ5D,EAAM,UAAU4D,EACrBjK,KAAU,IAAJqG,EAAW,EAALrG,EAAOA,EACnB0Q,OAAQ,EACR8L,MAAO,GAETpgB,KAAKiU,SAAStN,KAAKuZ,GACnBb,GAAgB,EAARzd,KAAKyR,GAAM6L,EAErB,IAAK,IAAIjV,EAAE,EAAEA,EAAExH,EAASwH,IACtBjK,KAAKqgB,uDAIMnM,GACb,IAAMoM,EAAUtgB,KAAKiU,SAASyB,OAAO,SAAAC,GAAI,OAAIA,IAASzB,IACtDlU,KAAKiU,SAAWqM,0CAIhB,IAAIlB,EAAOpf,KAAKiU,SAASjC,IAAEC,OAAOjS,KAAKiU,SAAS7V,QAAQ,GACxD4B,KAAKugB,eAAenB,0CAGP,IAAAoB,GAAA,EAAAC,GAAA,EAAAC,OAAAriB,EAAA,IACb,QAAAsiB,EAAAC,EAAgB5gB,KAAKiU,SAArB3L,OAAAC,cAAAiY,GAAAG,EAAAC,EAAApY,QAAAC,MAAA+X,GAAA,EAA+B,KAAtBtM,EAAsByM,EAAA1Y,MACzBjI,KAAKqD,MAAM,GACb6Q,EAAInN,GAAa,EAARnF,KAAKyR,GAAK,KAAMrT,KAAKqD,MAC9B6Q,EAAIE,IAAMxS,KAAK6V,IAAIvD,EAAInN,GAAW,EAARnF,KAAKyR,KAAe,EAARzR,KAAKyR,IAC3Ca,EAAIhL,GAAa,EAARtH,KAAKyR,GAAK,KAAMrT,KAAKqD,MAC9B6Q,EAAIG,IAAMzS,KAAK6V,IAAIvD,EAAIhL,GAAW,EAARtH,KAAKyR,KAAe,EAARzR,KAAKyR,KAClCrT,KAAKqD,MAAM,IACpB6Q,EAAInN,GAAa,EAARnF,KAAKyR,GAAK,KAAMrT,KAAKqD,MAE9B6Q,EAAIhL,GAAa,EAARtH,KAAKyR,GAAK,KAAMrT,KAAKqD,MAC9B6Q,EAAIE,GAAKxS,KAAK6V,IAAIvD,EAAInN,EAAU,EAARnF,KAAKyR,KAAe,EAARzR,KAAKyR,IACzCa,EAAIG,GAAKzS,KAAK6V,IAAIvD,EAAIhL,EAAU,EAARtH,KAAKyR,KAAe,EAARzR,KAAKyR,KAE3C,IAAI+M,EAAQxe,KAAKC,MAAMD,KAAK6V,IAA4C,IAAxC7V,KAAKod,KAAK9K,EAAInN,EAAU,EAARnF,KAAKyR,KAAe,EAARzR,KAAKyR,OAC7DwN,EAAMT,EAAM,IAChBlM,EAAItQ,KAAO5D,KAAK4D,KAAMwc,EAAM,IAAIpgB,KAAK4D,KAKjCsQ,EAAII,OAAO,GAAKuM,EAAI7gB,KAAKggB,QAC3B9L,EAAII,OAAO,EAAEJ,EAAII,QAAQ,GAAIJ,EAAII,WAtBxB,MAAA3L,GAAA8X,GAAA,EAAAC,EAAA/X,EAAA,YAAA6X,GAAA,MAAAI,EAAAhY,QAAAgY,EAAAhY,SAAA,WAAA6X,EAAA,MAAAC,aA8BXI,eACJ,SAAAA,EAAYlhB,GAAO,IAAAmhB,EAAA,OAAAjhB,OAAAC,EAAA,EAAAD,CAAAE,KAAA8gB,IACjBC,EAAAjhB,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAghB,GAAA3gB,KAAAH,KAAMJ,KACDQ,MAAQ,CACX4gB,MAAO,IAETD,EAAKE,YAAcF,EAAKE,YAAYxb,KAAjB3F,OAAA4F,EAAA,EAAA5F,QAAA4F,EAAA,EAAA5F,CAAAihB,KAEnBA,EAAKhc,KAAO,EACZgc,EAAKG,SAAW,EAChBH,EAAKI,YAAc,GATFJ,2EAYPK,GACVphB,KAAKqhB,aAAeD,EACpBphB,KAAKshB,IAAMF,EAAOG,WAAW,MAC7BvhB,KAAKM,MAAQN,KAAKshB,IAAIF,OAAO9gB,MAC7BN,KAAKO,OAASP,KAAKshB,IAAIF,OAAO7gB,mDAI9BP,KAAKwhB,sDAGQ,IAAAC,EAAAzhB,KACbA,KAAKwE,OAAS,IAAIsK,IAalB9O,KAAK0hB,aAAe1hB,KAAK2hB,mBAAmB,UAAW,UAAW3hB,KAAKJ,MAAMoD,MAC7EhD,KAAK4hB,SAAW,IAAI9S,IAAO+S,eAAe7hB,KAAKqhB,cAI/CrhB,KAAK4hB,SAASE,iBAAmB,SAAC1P,GAChCqP,EAAKH,IAAIS,YAAc,GAIvBN,EAAKH,IAAIU,YACTP,EAAKH,IAAIW,YAAc7P,EAASnT,MAChCwiB,EAAKH,IAAIY,UAA4B,EAAhB9P,EAASrO,OAASqO,EAASvC,OAAO,EACvD4R,EAAKH,IAAIa,OAAO/P,EAASgQ,IAAIrZ,EAAEzK,EAAmB,GAAjB8T,EAASgQ,IAAIrb,EAAEzI,EAAM8T,EAASgQ,IAAIrZ,EAAExK,EAAmB,GAAjB6T,EAASgQ,IAAIrb,EAAExI,GACtFkjB,EAAKH,IAAIe,OAAOjQ,EAASrJ,EAAEzK,EAAG8T,EAASrJ,EAAExK,GACzCkjB,EAAKH,IAAIgB,YACTb,EAAKH,IAAIiB,SACTd,EAAKH,IAAIS,YAAc,GAEzB/hB,KAAKwE,OAAOge,YAAYxiB,KAAK4hB,qDAGZhU,EAAQ8B,GAAqB,IAAb3Q,EAAaZ,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAN,KACpCujB,EAAe,IAAI5S,IAAO6B,QAE1BxB,EAAa,CACf7Q,EAAG0B,KAAKJ,MAAMkB,MAAME,OAAO,GAAG1C,GAAG0B,KAAKM,MAAM,EAC5C/B,EAAGyB,KAAKJ,MAAMkB,MAAME,OAAO,GAAGzC,GAAGyB,KAAKO,OAAO,GAE3C6O,EAAkB,IAAIN,IAAOO,UAAUF,EAAY,GAAoC,EAAhCnP,KAAKJ,MAAMkB,MAAME,OAAO,GAAGmC,MAAQ,IAC1F0L,EAAsB,IAAIC,IAAOC,UAAU,IAAID,IAAOE,SAAS,EAAG,EAAGhP,KAAKqhB,aAAa/gB,MAAON,KAAKqhB,aAAa9gB,QAAS,SACzH0O,EAAkB,IAAIH,IAAOI,YAAY,EAAG,EAAG,KAsBnD,OArBAwS,EAAalQ,aAAavC,GAC1ByS,EAAalQ,aAAa3C,GAC1B6S,EAAalQ,aAAapC,GAE1BsS,EAAa3iB,OAASA,EACtB2iB,EAAa9Q,QAAU,KACvB8Q,EAAa1Q,cAAc,IAAIlC,IAAOgC,KAAK,GAAG,OAC9C4Q,EAAa1Q,cAAc,IAAIlC,IAAOmC,KAAK,IAC3CyQ,EAAa1Q,cAAc,IAAIlC,IAAOqC,KAAK,IAAIrC,IAAOiC,KAAK,EAAE,KAC7D2Q,EAAa1Q,cAAc,IAAIlC,IAAOoC,OAAO,IAC7CwQ,EAAatQ,aAAe,IAAItC,IAAOuC,SAAS,EAAG,IAAIvC,IAAOiC,KAAK,EAAE,KAAM,SAC3E2Q,EAAa1Q,cAAc0Q,EAAatQ,cAIxCsQ,EAAalQ,aAAa,IAAI1C,IAAOyC,MAAM3D,EAAQ8B,IACnDgS,EAAae,gBAAkB,IAAI3T,IAAO4C,WAAW3S,EAAQ,GAAI,KACjE2iB,EAAalQ,aAAakQ,EAAae,iBACvCf,EAAa3Y,EAAEzK,EAAI0B,KAAKJ,MAAMgF,SAAStG,EACvCojB,EAAa3Y,EAAExK,EAAIyB,KAAKJ,MAAMgF,SAASrG,EACvCyB,KAAKwE,OAAOke,WAAWhB,GAChBA,+CAIP,IAAM1gB,EAAShB,KAAKJ,MAAMkB,MAAME,OAChC,GAAIhB,KAAKJ,MAAMmF,KAAO/E,KAAK+E,KAAM,CAG3B/E,KAAKJ,MAAMmF,KAAK,KAAK,IACvB/E,KAAK2iB,cACD3iB,KAAKJ,MAAMmF,KAAK,MAAM,GACxB/E,KAAK+R,YAAY6Q,KAAK5iB,KAAK+R,YAAYjJ,IAG3C9I,KAAKwE,OAAO6T,SACRrY,KAAKkhB,SAAWlhB,KAAKJ,MAAMiE,UAAUG,KAAOhE,KAAK6R,aACnD7R,KAAKkhB,WACLlhB,KAAK6R,WAAWhB,KAAO7Q,KAAKkhB,SAAW,EACvC,IAAIpS,IAAOgC,KAAK,IAAIhC,IAAOiC,KAAK,GAAiB,EAAd/Q,KAAKkhB,SAAY,GAAiB,EAAdlhB,KAAKkhB,UAA2B,IAAdlhB,KAAKkhB,UAC9E,IAAIpS,IAAOgC,KAAK,IAAIhC,IAAOiC,KAAK,IAAK,KAAM,GAC3C/Q,KAAK6iB,eAEP7iB,KAAK8iB,iBAjB0B,IAAAC,GAAA,EAAAC,GAAA,EAAAC,OAAA5kB,EAAA,IAkB/B,QAAA6kB,EAAAC,EAAmBniB,EAAnBsH,OAAAC,cAAAwa,GAAAG,EAAAC,EAAA3a,QAAAC,MAAAsa,GAAA,EAA2B,KAAlB7Y,EAAkBgZ,EAAAjb,MACrBiC,IACEA,EAAOzI,QAAQyI,EAAOzI,OAAOO,QAC/BhC,KAAKojB,YAAYlZ,EAAQlK,KAAKJ,MAAMoD,MAEtChD,KAAKqjB,WAAWnZ,KAvBW,MAAAvB,GAAAqa,GAAA,EAAAC,EAAAta,EAAA,YAAAoa,GAAA,MAAAI,EAAAva,QAAAua,EAAAva,SAAA,WAAAoa,EAAA,MAAAC,GA0B/BjjB,KAAKsjB,WACLtjB,KAAKujB,YAELvjB,KAAKwjB,aACLxjB,KAAK+E,KAAO/E,KAAKJ,MAAMmF,2CAKzB,IAA6B,IAAzB/E,KAAKJ,MAAM6E,UAAoB,CAEjC,GAAIzE,KAAKJ,MAAM8E,UAAY,KAAO,EAAG,KAAA+e,GAAA,EAAAC,GAAA,EAAAC,OAAAtlB,EAAA,IACnC,QAAAulB,EAAAC,EAAc7jB,KAAKmhB,YAAnB7Y,OAAAC,cAAAkb,GAAAG,EAAAC,EAAArb,QAAAC,MAAAgb,GAAA,EAAgC,KAAvB1c,EAAuB6c,EAAA3b,MAC1BlB,GAAGA,EAAE4K,cACP5K,EAAE4K,aAAamS,MAAM9jB,KAAKJ,MAAMgF,SAAU,GAAI,MAHf,MAAA+D,GAAA+a,GAAA,EAAAC,EAAAhb,EAAA,YAAA8a,GAAA,MAAAI,EAAAjb,QAAAib,EAAAjb,SAAA,WAAA8a,EAAA,MAAAC,IAOrC3jB,KAAK+jB,qBAEL,IAA2B,IAAvB/jB,KAAK2E,cAAwB,KAAAqf,GAAA,EAAAC,GAAA,EAAAC,OAAA7lB,EAAA,IAE/B,QAAA8lB,EAAAC,EAAcpkB,KAAKmhB,YAAnB7Y,OAAAC,cAAAyb,GAAAG,EAAAC,EAAA5b,QAAAC,MAAAub,GAAA,EAAgC,KAAvBjd,EAAuBod,EAAAlc,MAC1BlB,GAAGA,EAAE4K,cACP5K,EAAE4K,aAAamS,MAAM9jB,KAAKJ,MAAMgF,SAAU,EAAG,MAJlB,MAAA+D,GAAAsb,GAAA,EAAAC,EAAAvb,EAAA,YAAAqb,GAAA,MAAAI,EAAAxb,QAAAwb,EAAAxb,SAAA,WAAAqb,EAAA,MAAAC,6CAYnClkB,KAAK0hB,aAAa3Y,EAAEzK,EAAI0B,KAAKJ,MAAMgF,SAAStG,EAC5C0B,KAAK0hB,aAAa3Y,EAAExK,EAAIyB,KAAKJ,MAAMgF,SAASrG,EAC5CyB,KAAK0hB,aAAae,gBAAgBqB,MAAM9jB,KAAKJ,MAAMoD,KAAM,GAAI,KAI7DhD,KAAK0hB,aAAakB,KAAK,8CAIvB5iB,KAAK6R,WAAW9I,EAAEzK,EAAI0B,KAAKJ,MAAMoD,KAAK1E,EACtC0B,KAAK6R,WAAW9I,EAAExK,EAAIyB,KAAKJ,MAAMoD,KAAKzE,EAEtC,IAAI8lB,EAAgB3lB,IAAOsB,KAAKJ,MAAMoD,KAAK1E,EAAE0B,KAAKqhB,aAAa/gB,MAAM,EAAGN,KAAKJ,MAAMoD,KAAKzE,EAAEyB,KAAKqhB,aAAa9gB,OAAO,GAAG+jB,mBACtHtkB,KAAK6R,WAAWT,aAAa0S,MAAM,IAAIhV,IAAOiC,KAAK,EAAE,GAAI,IAAIjC,IAAOiC,MAAMsT,EAAc,KAAK,IAAI,IAAKA,EAAc,KAAK,IAAI,IAAK,SAClIrkB,KAAK6R,WAAW+Q,KAAK,8CAIrB5iB,KAAKukB,wDAGQjmB,GACb,IAAM0C,EAAShB,KAAKJ,MAAMkB,MAAME,OADhBwjB,GAAA,EAAAC,GAAA,EAAAC,OAAArmB,EAAA,IAEhB,QAAAsmB,EAAAC,EAAiB5jB,EAAjBsH,OAAAC,cAAAic,GAAAG,EAAAC,EAAApc,QAAAC,MAAA+b,GAAA,EAAyB,KAAhBxc,EAAgB2c,EAAA1c,MACnBD,IAAOhI,KAAKmhB,YAAYnZ,EAAKzG,QAAQyG,EAAKyF,UAC5CzN,KAAKmhB,YAAYnZ,EAAKzG,OAASyG,EAAKyF,QACpCzN,KAAKwE,OAAOke,WAAW1iB,KAAKmhB,YAAYnZ,EAAKzG,QAC7CvB,KAAKmhB,YAAYnZ,EAAKzG,OAAOqhB,KAAK5iB,KAAKmhB,YAAYnZ,EAAKzG,OAAOuH,KANnD,MAAAH,GAAA8b,GAAA,EAAAC,EAAA/b,EAAA,YAAA6b,GAAA,MAAAI,EAAAhc,QAAAgc,EAAAhc,SAAA,WAAA6b,EAAA,MAAAC,GAAA,IAAAG,GAAA,EAAAC,GAAA,EAAAC,OAAA1mB,EAAA,IAWhB,QAAA2mB,EAAAC,EAAejlB,KAAKmhB,YAApB7Y,OAAAC,cAAAsc,GAAAG,EAAAC,EAAAzc,QAAAC,MAAAoc,GAAA,EAAiC,KAAxBrX,EAAwBwX,EAAA/c,MAC3BuF,GAAIA,EAAGzO,SAASiC,EAAOwM,EAAGzO,SAC5BiB,KAAKwE,OAAO0gB,cAAc1X,GAC1BxN,KAAKmhB,YAAY3T,EAAGzO,QAAU,MAEvByO,GAAIA,EAAGzO,QAAQiC,EAAOwM,EAAGzO,UAChCyO,EAAGzE,EAAEzK,EAAI0C,EAAOwM,EAAGzO,QAAQT,EAC3BkP,EAAGzE,EAAExK,EAAIyC,EAAOwM,EAAGzO,QAAQR,EACvByC,EAAOwM,EAAGzO,QAAQ2E,KAAK,IAAI,GAC7B8J,EAAGoV,KAAKpV,EAAG1E,GAET0E,EAAG6C,kBAEL7C,EAAG6C,iBAAiByT,MAAM9iB,EAAOwM,EAAGzO,QAASyO,EAAG6C,iBAAiBuO,MAAM,IAAKpR,EAAG6C,iBAAiBR,UAxBtF,MAAAlH,GAAAmc,GAAA,EAAAC,EAAApc,EAAA,YAAAkc,GAAA,MAAAI,EAAArc,QAAAqc,EAAArc,SAAA,WAAAkc,EAAA,MAAAC,IA4BX/kB,KAAK6R,YAAY7R,KAAKJ,MAAM4E,OAAOqN,aACtC7R,KAAK6R,WAAa7R,KAAKJ,MAAM4E,OAAOqN,WACpC7R,KAAKwE,OAAOke,WAAW1iB,KAAK6R,cAEzB7R,KAAK+R,aAAa/R,KAAKJ,MAAM4E,OAAOuN,cACvC/R,KAAK+R,YAAc/R,KAAKJ,MAAM4E,OAAOuN,YACrC/R,KAAKwE,OAAOke,WAAW1iB,KAAK+R,kDAIpBjT,EAAQC,GAClBiB,KAAKshB,IAAIU,YACThiB,KAAKshB,IAAIS,YAAcjjB,EAAO2C,OAAOO,OAAOlD,EAAO2C,OAAOO,OAAO,IAAI,EACrEhC,KAAKshB,IAAIW,YAAc,UACvBjiB,KAAKshB,IAAIY,UAAY,EACrBliB,KAAKshB,IAAI6D,YAAY,CAAC,GAAI,KAC1BnlB,KAAKshB,IAAI8D,eAAiB,GAC1BplB,KAAKshB,IAAIa,OAAOrjB,EAAOR,EAAGQ,EAAOP,GACjCyB,KAAKshB,IAAIe,OAAOtjB,EAAOT,EAAGS,EAAOR,GACjCyB,KAAKshB,IAAIgB,YACTtiB,KAAKshB,IAAIiB,SACTviB,KAAKshB,IAAI+D,WAAa,EACtBrlB,KAAKshB,IAAIgE,YAAc,EACvBtlB,KAAKshB,IAAI6D,YAAY,IACrBnlB,KAAKshB,IAAIS,YAAc,sCAIvB,IAAMwD,EAAQvlB,KAAKJ,MAAMsF,aACzBlF,KAAKshB,IAAIkE,UAAY,UACrBxlB,KAAKshB,IAAImE,KAAO,aAChBzlB,KAAKshB,IAAIoE,SAAS,IAAMH,EAAO,GAAI,uCAGlB,IAAVI,EAAUxnB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAL,IACN6E,EAAOhD,KAAKJ,MAAMoD,KACjB1E,EAAmC0E,EAAnC1E,EAAGC,EAAgCyE,EAAhCzE,EAAG0E,EAA6BD,EAA7BC,GAAIC,EAAyBF,EAAzBE,GAAIC,EAAqBH,EAArBG,KAAMlE,EAAe+D,EAAf/D,MAAO2E,EAAQZ,EAARY,KAC5BL,EAAc3B,KAAKC,MAAuB,GAAjBmB,EAAKO,aAChCE,EAAQF,EAAYvE,EAAWC,EAAkB,EAAZsE,GAA2B,GAAbA,GAA6B,GAAbA,GAAiBtE,EACpF2E,IACF5D,KAAKshB,IAAI+D,WAAa9hB,EAAiB,GAALK,EAAShC,KAAK4Q,IAAgB,GAAZjP,EAAe,IAAW,EAALK,EACzE5D,KAAKshB,IAAIgE,YAAc7hB,GAErBkiB,IACF3lB,KAAKshB,IAAIU,YACThiB,KAAKshB,IAAIS,YAAc,IACvB/hB,KAAKshB,IAAIsE,IAAItnB,EAAG2E,EAAG0iB,EAAOpnB,EAAG2E,EAAGyiB,EAAOxiB,EAAM,EAAa,EAAVvB,KAAKyR,IACrDrT,KAAKshB,IAAIkE,UAAY/hB,EACrBzD,KAAKshB,IAAIuE,OACT7lB,KAAKshB,IAAIgB,YACTtiB,KAAKshB,IAAIS,YAAc,GAEzB/hB,KAAKshB,IAAIU,YACThiB,KAAKshB,IAAIsE,IAAItnB,EAAGC,EAAG4E,EAAM,EAAa,EAAVvB,KAAKyR,IACjCrT,KAAKshB,IAAIkE,UAAYvmB,EACrBe,KAAKshB,IAAIuE,OACT7lB,KAAKshB,IAAIgB,YACTtiB,KAAKshB,IAAI+D,WAAa,EACtBrlB,KAAKshB,IAAIgE,YAAc,qCAGdvc,GAsBT,GApBA/I,KAAKshB,IAAIU,YACTjZ,EAAE0U,SAAS1U,EAAE2U,OACb1d,KAAKshB,IAAIwE,QAAQ/c,EAAEoV,KAAMpV,EAAEqV,KAAMrV,EAAE0U,OAAQ1U,EAAE2U,OAAQ3U,EAAE4U,IAAI,KAAa,EAAR/b,KAAKyR,IAAO,EAAa,EAAVzR,KAAKyR,IAAQ,GAC5FrT,KAAKshB,IAAIsE,IAAI7c,EAAEoV,KAAMpV,EAAEqV,KAAMrV,EAAE0U,OAAQ,EAAa,EAAV7b,KAAKyR,IAAQ,GACvDrT,KAAKshB,IAAIY,UAAY,EACrBliB,KAAKshB,IAAIS,YAAc,GACvB/hB,KAAKshB,IAAIW,YAAc,UACvBjiB,KAAKshB,IAAIgB,YACTtiB,KAAKshB,IAAIiB,SAETviB,KAAKshB,IAAIU,YACLjZ,EAAEnF,OACJ5D,KAAKshB,IAAI+D,WAAoB,GAAPtc,EAAEnF,KACxB5D,KAAKshB,IAAIgE,YAActmB,EAAW+J,EAAE8E,IAAK,KAE3C7N,KAAKshB,IAAIS,YAAc,EACvB/hB,KAAKshB,IAAIsE,IAAI7c,EAAEzK,EAAGyK,EAAExK,EAAGwK,EAAE5F,KAAM,EAAa,EAAVvB,KAAKyR,IACvCrT,KAAKshB,IAAIkE,UAAYzc,EAAE8E,IACvB7N,KAAKshB,IAAIuE,OACT7lB,KAAKshB,IAAIgB,YACLvZ,EAAEtH,QAAQsH,EAAEtH,OAAOE,OAAQ,CAE7B3B,KAAKshB,IAAI+D,WAAatc,EAAEtH,OAAOE,OAAO,GACtC3B,KAAKshB,IAAIgE,YAAc,UACvBtlB,KAAKshB,IAAIS,YAAc,GAAIhZ,EAAEtH,OAAOE,OAAO,IAC3C,IAAIokB,EAAQ/lB,KAAKshB,IAAI0E,qBAAqBjd,EAAEzK,EAAEyK,EAAE5F,KAAM4F,EAAExK,EAAEwK,EAAE5F,KAAM4F,EAAEzK,EAAEyK,EAAE5F,KAAM4F,EAAExK,EAAEwK,EAAE5F,MACpF4iB,EAAME,aAAa,EAAE,WACrBF,EAAME,aAAald,EAAEtH,OAAOE,OAAO,IAAIoH,EAAE8E,KACzCkY,EAAME,aAAa,EAAEld,EAAE8E,KACvB7N,KAAKshB,IAAIU,YAEThiB,KAAKshB,IAAIsE,IAAI7c,EAAEzK,EAAGyK,EAAExK,EAAGwK,EAAE5F,KAAM,EAAa,EAAVvB,KAAKyR,IACvCrT,KAAKshB,IAAIkE,UAAYO,EACrB/lB,KAAKshB,IAAIuE,OACT7lB,KAAKshB,IAAIgB,YAEXtiB,KAAKshB,IAAI+D,WAAa,EACtBrlB,KAAKshB,IAAIgE,YAAc,2CAIvB,IAAMjjB,EAAarC,KAAKJ,MAAMkB,MAAMuB,WAC9BrB,EAAShB,KAAKJ,MAAMkB,MAAME,OAFjBklB,GAAA,EAAAC,GAAA,EAAAC,OAAA/nB,EAAA,IAGf,QAAAgoB,EAAAC,EAAkBjkB,EAAlBiG,OAAAC,cAAA2d,GAAAG,EAAAC,EAAA9d,QAAAC,MAAAyd,GAAA,EAA8B,KAArB/M,EAAqBkN,EAAApe,MAC5B,GAAIkR,EAAO,KAAAoN,GAAA,EAAAC,GAAA,EAAAC,OAAApoB,EAAA,IACT,QAAAqoB,EAAAC,EAAgBxN,EAAMlF,SAAtB3L,OAAAC,cAAAge,GAAAG,EAAAC,EAAAne,QAAAC,MAAA8d,GAAA,EAAgC,KAAvBrS,EAAuBwS,EAAAze,MAC9B,GAAIiM,EAAII,OAAO,IACbtU,KAAK4mB,YAAY1S,GACbA,EAAII,OAAO,GAAG,KAAAuS,GAAA,EAAAC,GAAA,EAAAC,OAAA1oB,EAAA,IAChB,QAAA2oB,EAAAC,EAAiBjmB,EAAO6J,MAAM,GAA9BvC,OAAAC,cAAAse,GAAAG,EAAAC,EAAAze,QAAAC,MAAAoe,GAAA,EAAkC,KAAzB7e,EAAyBgf,EAAA/e,MAChCjI,KAAKknB,SAAShT,EAAIlM,IAFJ,MAAAW,GAAAme,GAAA,EAAAC,EAAApe,EAAA,YAAAke,GAAA,MAAAI,EAAAre,QAAAqe,EAAAre,SAAA,WAAAke,EAAA,MAAAC,MAJb,MAAApe,GAAA6d,GAAA,EAAAC,EAAA9d,EAAA,YAAA4d,GAAA,MAAAI,EAAA/d,QAAA+d,EAAA/d,SAAA,WAAA4d,EAAA,MAAAC,MAJE,MAAA9d,GAAAwd,GAAA,EAAAC,EAAAzd,EAAA,YAAAud,GAAA,MAAAI,EAAA1d,QAAA0d,EAAA1d,SAAA,WAAAud,EAAA,MAAAC,wCAmBLlS,GACVlU,KAAKshB,IAAIU,YACL9N,EAAItQ,OACN5D,KAAKshB,IAAI+D,WAAsB,EAATnR,EAAItQ,KAC1B5D,KAAKshB,IAAIgE,YAActmB,EAAWkV,EAAIrG,IAAK,KAE7C7N,KAAKshB,IAAIS,YAAyB,IAAX7N,EAAII,OAC3BtU,KAAKshB,IAAIsE,IAAI1R,EAAIpV,OAAOR,EAAG4V,EAAIpV,OAAOP,EAAG2V,EAAI+L,EAAG/L,EAAInN,EAAGmN,EAAIhL,GAAG,GAC9DlJ,KAAKshB,IAAIY,UAAYhO,EAAI5T,MACzBN,KAAKshB,IAAIW,YAAc/N,EAAIrG,IAC3B7N,KAAKshB,IAAIiB,SACTviB,KAAKshB,IAAIgB,YACTtiB,KAAKshB,IAAIS,YAAc,EACvB/hB,KAAKshB,IAAI+D,WAAa,EACtBrlB,KAAKshB,IAAIgE,YAAc,mCAGhBjO,EAAGjB,GACGpW,KAAKJ,MAAMmF,KACxB/E,KAAKshB,IAAI6F,QAAU,QAEnBnnB,KAAKshB,IAAIS,YAAc,GAAI,GAAI1K,EAAE/C,OACjCtU,KAAKshB,IAAIW,YAAc,UACvBjiB,KAAKshB,IAAIY,UAAY,EACrBliB,KAAKshB,IAAI6D,YAAY,CAAC,GAAI,KAC1BnlB,KAAKshB,IAAI8D,eAAiB,GAAGxjB,KAAKC,MAAO7B,KAAKJ,MAAMmF,KAAK,GAAI,GACpDrG,IAAO0X,EAAE9X,EAAE8X,EAAE7X,GAAtB,IACI6oB,EAAK1oB,IAAO2Y,EAAE4I,EAAE,GACpB5I,EAAEsH,IAAI,EAAEyI,EAAGC,OAAOhQ,EAAEtQ,EAAGsQ,EAAE1D,UAAU,GAAIyT,EAAGC,OAAOhQ,EAAEnO,EAAGmO,EAAE1D,UAAU,GAClE3T,KAAKshB,IAAIU,YACThiB,KAAKshB,IAAIa,OAAO/L,EAAE9X,EAAG8X,EAAE7X,GACvByB,KAAKshB,IAAIe,OAAOhL,EAAEvY,OAAOR,EAAO,IAAL8oB,EAAG9oB,EAAQ+Y,EAAEvY,OAAOP,EAAO,IAAL6oB,EAAG7oB,GACpDyB,KAAKshB,IAAIgB,YACTtiB,KAAKshB,IAAIiB,SAET6E,EAAGE,SAASjQ,EAAE8I,QAAQ9I,EAAEsH,IAAI,GAC5B3e,KAAKshB,IAAIa,OAAO/L,EAAE9X,EAAG8X,EAAE7X,GACvByB,KAAKshB,IAAIU,YACThiB,KAAKshB,IAAIe,OAAOhL,EAAEvY,OAAOR,EAAO,IAAL8oB,EAAG9oB,EAAQ+Y,EAAEvY,OAAOP,EAAO,IAAL6oB,EAAG7oB,GACpDyB,KAAKshB,IAAIgB,YACTtiB,KAAKshB,IAAIiB,SAET6E,EAAGE,UAAUjQ,EAAE8I,QAAQ9I,EAAEsH,IAAI,GAC7B3e,KAAKshB,IAAIa,OAAO/L,EAAE9X,EAAG8X,EAAE7X,GACvByB,KAAKshB,IAAIU,YACThiB,KAAKshB,IAAIe,OAAOhL,EAAEvY,OAAOR,EAAO,IAAL8oB,EAAG9oB,EAAQ+Y,EAAEvY,OAAOP,EAAO,IAAL6oB,EAAG7oB,GACpDyB,KAAKshB,IAAIgB,YACTtiB,KAAKshB,IAAIiB,SACTviB,KAAKshB,IAAI6F,QAAU,OACnBnnB,KAAKshB,IAAI+D,WAAa,EACtBrlB,KAAKshB,IAAIgE,YAAc,EACvBtlB,KAAKshB,IAAI6D,YAAY,IACrBnlB,KAAKshB,IAAIS,YAAc,mCAyCvB,OACEjb,EAAAC,EAAAC,cAACugB,GAAD,CAAYjnB,MAAON,KAAKJ,MAAMS,OAAOC,MAAOC,OAAQP,KAAKJ,MAAMS,OAAOE,OAAQinB,WAAYxnB,KAAKihB,YAAapG,YAAa7a,KAAKJ,MAAMib,YAAaC,UAAW9a,KAAKJ,MAAMkb,UAAWC,YAAa/a,KAAKJ,MAAMmb,YAAa1T,MAAOrH,KAAKJ,MAAMyH,eApatNogB,IAAMxL,WAyazByL,mMAEF,OAAO,mCAEA,IAAAC,EAAA3nB,KACP,OACE8G,EAAAC,EAAAC,cAAA,UAAQgC,GAAG,WACX1I,MAAON,KAAKJ,MAAMU,MAClBC,OAAQP,KAAKJ,MAAMW,OACnBqnB,IAAK,SAAAC,GAAI,OACPA,EAAOF,EAAK/nB,MAAM4nB,WAAWK,GAAQ,MACrChN,YAAa7a,KAAKJ,MAAMib,YAAaC,UAAW9a,KAAKJ,MAAMkb,UAAWC,YAAa/a,KAAKJ,MAAMmb,YAAa1T,MAAOrH,KAAKJ,MAAMyH,eAX5GogB,IAAMxL,WAiBzB6L,eACJ,SAAAA,EAAYloB,GAAO,IAAAmoB,EAAA,OAAAjoB,OAAAC,EAAA,EAAAD,CAAAE,KAAA8nB,IACjBC,EAAAjoB,OAAAG,EAAA,EAAAH,CAAAE,KAAAF,OAAAI,EAAA,EAAAJ,CAAAgoB,GAAA3nB,KAAAH,KAAMJ,KACDQ,MAAQ,CAAE4nB,UAAU,GAFRD,iFAUDE,EAAOC,GAEvB3T,QAAQC,IAAIyT,EAAOC,GACnBloB,KAAKmI,SAAS,CACZ8f,MAAOA,EACPC,KAAMA,qCAKR,OAAIloB,KAAKI,MAAM4nB,SAEXlhB,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,mCACAF,EAAAC,EAAAC,cAAA,WAASK,MAAO,CAAE8gB,WAAY,aAC7BnoB,KAAKI,MAAM6nB,OAASjoB,KAAKI,MAAM6nB,MAAMvoB,WACtCoH,EAAAC,EAAAC,cAAA,WACChH,KAAKI,MAAM8nB,KAAKE,iBAKdpoB,KAAKJ,MAAMwc,4DA3BY6L,GAE9B,MAAO,CAAED,UAAU,UARK/L,aAsDboM,oLAfX,OACEvhB,EAAAC,EAAAC,cAACshB,GAAD,KACAxhB,EAAAC,EAAAC,cAAA,OAAKiU,UAAU,OACfnU,EAAAC,EAAAC,cAAA,UAAQiU,UAAU,UAClBnU,EAAAC,EAAAC,cAAA,MAAIiU,UAAU,eAAd,qBAIAnU,EAAAC,EAAAC,cAACuhB,EAAD,CAAWjoB,MAAM,MAAMC,OAAO,iBAVlB0b,aC9lEEuM,QACW,cAA7B/nB,OAAOgoB,SAASC,UAEe,UAA7BjoB,OAAOgoB,SAASC,UAEhBjoB,OAAOgoB,SAASC,SAASC,MACvB,2DCXNC,IAASC,OAAO/hB,EAAAC,EAAAC,cAAC8hB,GAAD,MAASC,SAASC,eAAe,SD0H3C,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAMC,KAAK,SAAAC,GACjCA,EAAaC","file":"static/js/main.326e8b5f.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport styled from 'styled-components';\nimport Modal from 'react-modal';\n// import TweenMax from \"gsap/TweenMax\";\nimport _ from 'lodash';\nimport seedrandom from 'seedrandom';\nimport Proton from 'proton-js';\nimport Victor from 'victor';\nimport './App.css';\n\n//global constants\nModal.setAppElement('#root')\nconst fps = 60;\nconst animInterval = 1000/fps;\nconst KEY = {\n  LEFT:  37,\n  RIGHT: 39,\n  UP: 38,\n  DOWN: 40,\n  A: 65,\n  D: 68,\n  W: 87,\n  S: 83,\n  SPACE: 32\n};\n\n//various utility\nfunction objectDistance(b1={x:0,y:0}, b2={x:0,y:0}) {\n  let v1 = new Victor(b1.x,b1.y);\n  let v2 = new Victor(b2.x,b2.y);\n  return v1.distance(v2);\n}\n\nfunction towardsBody(origin, target) {\n  //makes a vector to follow\n  if (origin&&target) {\n    let tx = (origin.x - target.x) / objectDistance(origin, target);\n    let ty = (origin.y - target.y) / objectDistance(origin, target);\n    return { x: tx, y: ty };\n  }\n}\n\nfunction getBearing(origin={x:0,y:0}, target={x:0,y:0}) {\n  let v= new Victor(target.x-origin.x,target.y-origin.y);\n  return (v.horizontalAngle()+Math.PI)\n}\n\nfunction shadeColor(color, rShade, gShade=rShade, bShade=rShade) {\n  var R = parseInt(color.substring(1,3),16);\n  var G = parseInt(color.substring(3,5),16);\n  var B = parseInt(color.substring(5,7),16);\n  R = parseInt(R * (100 + rShade) / 100);\n  G = parseInt(G * (100 + gShade) / 100);\n  B = parseInt(B * (100 + bShade) / 100);\n  R = (R<255)?R:255;\n  G = (G<255)?G:255;\n  B = (B<255)?B:255;\n  var RR = ((R.toString(16).length===1)?\"0\"+R.toString(16):R.toString(16));\n  var GG = ((G.toString(16).length===1)?\"0\"+G.toString(16):G.toString(16));\n  var BB = ((B.toString(16).length===1)?\"0\"+B.toString(16):B.toString(16));\n  return \"#\"+RR+GG+BB;\n}\n\nclass OrbitGame extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      screen: {\n        width: this.props.width,\n        height: this.props.height,\n        // dynWidth: window.innerWidth/2,\n        // dynHeight: window.innerHeight/2,\n        ratio: window.devicePixelRatio || 1,\n      },\n      starList: [\n        {name:\"Lalande\",num:5},{name:\"Tau Ceti\",num:4},{name:\"Groombridge\",num:2},{name:\"Alpha Centauri\",num:4},{name:\"Epsilon Eriadni\",num:7},{name:\"Procyon A\",num:0},{name:\"Procyon B\",num:1},{name:\"Ross 154\",num:3},{name:\"Barnard's Star\",num:8}\n      ],\n      world: {\n        stage: \"Sol\",\n        bodies: [],\n        pendingBodies: [],\n        //will externalize db stuff\n        bDatabase: {\n          Sol: [\n            {data: solData, parent: 0, index: 0, active: true, status: {}},\n            {data: marsData, parent: 0, index: 1, active: true, status: {\n              shield: Math.floor(seedrandom(\"m1\".toString()).quick()*70+30),\n              uplink: Math.floor(seedrandom(\"m2\".toString()).quick()*70+30),\n            }},\n            {data: venusData, parent: 0, index: 2, active: true, status: {\n              shield: Math.floor(seedrandom(\"v1\".toString()).quick()*70+30),\n              uplink: Math.floor(seedrandom(\"v2\".toString()).quick()*70+30),\n            }},\n            {data: phobosData, parent: 1, index: 3, active: true, status: {}},\n            {data: earthData, parent: 0, index: 4, active: true, status: {\n              shield: Math.floor(seedrandom(\"e1\".toString()).quick()*70+30),\n              uplink: Math.floor(seedrandom(\"e2\".toString()).quick()*70+30),\n            }},\n            {data: saturnData, parent: 0, index: 5, active: false, status: {\n              shield: Math.floor(seedrandom(\"s1\".toString()).quick()*70+30),\n              uplink: Math.floor(seedrandom(\"s2\".toString()).quick()*70+30),\n            }},\n          ],\n          // AlphaCentauri: [],\n          // Wolf359: [],\n          // EpsilonEridani: [],\n        },\n        structures: [],\n        pendingStructures: [\n\n        ],\n        sDatabase: {\n          Sol: [\n            {data: rs1, openings: 1, index: 0, active: true, status: {}},\n            {data: rs2, openings: 4, index: 1, active: true, status: {}},\n            {data: rs3, openings: 0, index: 2, active: true, status: {}},\n            {data: rs4, openings: 8, index: 3, active: false, status: {}},\n          ]\n        }\n      },\n      params: {\n        gravFalloff: 0.9,\n        bounceDampening: 0.9,\n      },\n      ball: {\n        x: 190,\n        y: 210,\n        vx: 0.5,\n        vy: 0.5,\n        size: 6,\n        mass: 3,\n        speed: 0,\n        thrustAcc: 0.1,\n        thrustLevel: 0,\n        heading: 0,\n        power: 0,\n        coll: false,\n        ct: 0,\n        color: \"#E0EDFF\",\n        glow: 1,\n      },\n      resources: {\n        matter: 0,\n        energy: 1500,\n        psi: 0,\n        hm: 0,\n      },\n      keys: {\n        left  : 0,\n        right : 0,\n        up    : 0,\n        down  : 0,\n        space : 0,\n      },\n      proton: {\n\n      },\n      mousedown: false,\n      mouseTick: 0,\n      mouseReleased: false,\n      mouseObj: {\n        x: 350,\n        y: 350,\n        init: false,\n      },\n      selectedObj: null,\n      tick: 0,\n      ts: 0,\n      randomHash: 0,\n      currentScore: 0,\n      inGame: true,\n      showModal: false,\n    };\n    this.sharedEB = [];\n    this.animationID = null;\n    this.timerID = null;\n    this.handlePowerChange = this.handlePowerChange.bind(this);\n    this.handleChargePsi = this.handleChargePsi.bind(this);\n    this.handleChargeShield = this.handleChargeShield.bind(this);\n    this.handleSystemChange = this.handleSystemChange.bind(this);\n    // this.handleCanvasClick = this.handleCanvasClick.bind(this);\n    this.handlePlanetToggle = this.handlePlanetToggle.bind(this);\n    this.handleStructureToggle = this.handleStructureToggle.bind(this);\n    this.handlePauseStart=this.handlePauseStart.bind(this);\n    this.handleKeys=this.handleKeys.bind(this);\n    this.mouseupHandler = this.mouseupHandler.bind(this);\n    this.mousedownHandler = this.mousedownHandler.bind(this);\n    this.mousemoveHandler = this.mousemoveHandler.bind(this);\n    this.handleOpenModal = this.handleOpenModal.bind(this);\n    this.handleCloseModal = this.handleCloseModal.bind(this);\n  }\n\n  //user interface\n  makeMapInterface(ui) {\n    const starTravelList = [...this.state.starList];\n    starTravelList.push({name:'Sol',num:6})\n    return starTravelList.map(\n      (star) =>\n      <StarButton onClick={this.handleSystemChange} star={star.name} ui={ui} key={star.name}/>\n    )\n  }\n\n  makeControlButtons() {\n    const pauseButton = this.state.inGame ?\n    <Button onClick={this.handlePauseStart} style={{ backgroundColor: 'red' }} text=\"Pause\" key={\"Pause\"}/> :\n    <Button onClick={this.handlePauseStart} text=\"Continue\" key={\"Pause\"}/>;\n    const sparkleButton = <Button onClick={this.handleChargePsi} style={{ backgroundColor: '#4666FF' }} text={`Psi blasts: ${this.state.resources.psi}`} key={\"Psi\"}/>;\n    const chargeButton = <Button onClick={this.handlePowerChange} style={{ backgroundColor: '#E0115F' }} text={`Energy: ${this.state.resources.energy} (click to charge)`} key={\"Energy\"}/>;\n    return [pauseButton, sparkleButton, chargeButton]\n  }\n\n  selectOnCanvas(pos) {\n    // let pos = {...this.state.mouseObj}\n    const bodies = [...this.state.world.bodies];\n    for (let body of bodies) {\n      if (objectDistance(pos, body) < body.size*1.25) {\n        // console.log(body.name)\n        return this.setState((prevState) => {\n          return {\n            selectedObj: body,\n          }\n        });\n      }\n    }\n  }\n\n  //handlers\n  handlePowerChange() {\n    this.setState((prevState) => {\n      return {\n        currentScore: 0,\n        resources: {\n          ...prevState.resources,\n          energy: prevState.resources.energy + prevState.currentScore*10,\n        },\n      }\n    });\n  }\n\n  // handleCanvasClick(e) {\n  //\n  // }\n\n  handleChargePsi() {\n    this.setState((prevState) => {\n      return {\n        resources: {\n          ...prevState.resources,\n          psi: prevState.resources.psi+1,\n        },\n      }\n    });\n  }\n\n  handleChargeShield(e) {\n    let p = e.target.id;\n    // console.log(p)\n    const bodies = this.state.world.bodies\n    const target = bodies.find( b => b.name === p )\n    target.status.shield++\n  }\n\n  handleKeys(value, e) {\n    let keys = {...this.state.keys};\n    if(e.keyCode === KEY.LEFT   || e.keyCode === KEY.A) { keys.left  = value?keys.left+1:0 }\n    if(e.keyCode === KEY.DOWN   || e.keyCode === KEY.S) { keys.down  = value?keys.down+1:0 }\n    if(e.keyCode === KEY.RIGHT  || e.keyCode === KEY.D) { keys.right = value?keys.right+1:0 }\n    if(e.keyCode === KEY.UP     || e.keyCode === KEY.W) { keys.up    = value?keys.up+1:0 }\n    if(e.keyCode === KEY.SPACE) keys.space = value?keys.space+1:0;\n    this.setState((prevState) => {\n      return { keys: keys }\n    });\n  }\n\n  mousedownHandler(e) {\n    let _x = e.nativeEvent.layerX;\n    let _y = e.nativeEvent.layerY;\n    // console.log(_x, _y)\n    this.setState((prevState) => {\n      return {\n        mousedown: true,\n        mouseObj: {\n          x: _x,\n          y: _y,\n        },\n      }\n    });\n    this.selectOnCanvas({x:_x,y:_y});\n  }\n\n  mouseupHandler(e) {\n    this.setState((prevState) => {\n      return { mousedown: false }\n    });\n  }\n\n  mousemoveHandler(e) {\n    if (this.state.mousedown) {\n      let _x = e.nativeEvent.layerX;\n      let _y = e.nativeEvent.layerY;\n      return this.setState((prevState) => {\n        return {\n          mouseObj: {\n            x: _x,\n            y: _y,\n          },\n        }\n      });\n    }\n  }\n\n  handleOpenModal () {\n    this.setState({ showModal: true });\n  }\n  handleCloseModal () {\n    this.setState({ showModal: false });\n  }\n  handleSystemChange(e) {\n    let target = e.target.id;\n    return this.systemChange(target);\n  }\n  handlePlanetToggle(e) {\n    let p = e.target.id;\n    this.planetToggle(p);\n  }\n  handleStructureToggle(e) {\n    let s = e.target.id;\n    this.structureToggle(s);\n  }\n\n  //generating stuff\n  async genSysPlanets(name=\"Alpha Centauri\", num=3) {\n    const bDatabase = {...this.state.world.bDatabase};\n    if (!bDatabase[name]) {\n      let system = [];\n      let rngData = rngBody(name, \"star\");\n      let star = {\n        data: {...rngData}, index: 0, parent: 0, active: false, status:  {\n        },\n      }\n      system.push(star);\n      for (let i=1;i<num+1;i++) {\n        let parent = Math.floor(seedrandom(i.toString()).quick()*(i/num)*4);\n        let rngData = rngBody(name+\" \"+i.toString(), \"planet\", 1/(parent/2+1));\n        //smaller scale for outlying moons\n        // console.log(rngData);\n        let planet = {\n          data: {...rngData}, index: i, parent: parent, active: false, status: {\n            shield: Math.floor(seedrandom(\"s\"+i.toString()).quick()*70+30),\n            uplink: Math.floor(seedrandom(\"u\"+i.toString()).quick()*70+30),\n          },\n        };\n        system.push(planet);\n      }\n      // console.log(system);\n      return system;\n    }\n    else { return null }\n  }\n\n  async genSysStructures(name=\"Alpha Centauri\", num=4) {\n    const sDatabase = {...this.state.world.sDatabase};\n    if (!sDatabase[name]) {\n      let sysStruct = [];\n      for (let i=0;i<num;i++) {\n        let rngData = rngStruct(name+\" \"+i.toString());\n        let struct = {data: {...rngData}, index: i, openings: 1, active: false};\n        sysStruct.push(struct);\n      }\n      // console.log(system);\n      return sysStruct;\n    }\n    else { return null }\n  }\n\n  async createGalaxy(starlist=[{name:\"Wolf 359\",num:6},{name:\"Tau Ceti\",num:4},{name:\"Groombridge\",num:1}]) {\n    // console.log(starlist)\n    const bDatabase = {...this.state.world.bDatabase};\n    const sDatabase = {...this.state.world.sDatabase};\n    for (let n of starlist) {\n      let system = await this.genSysPlanets(n.name,n.num);\n      let sysStruct = await this.genSysStructures(n.name,3);\n      bDatabase[n.name] = system;\n      sDatabase[n.name] = sysStruct;\n    }\n    // console.log(bDatabase);\n    // console.log(sDatabase);\n    return this.setState((prevState) => {\n      return {\n        world: {\n          ...prevState.world,\n          bDatabase: bDatabase,\n          sDatabase: sDatabase,\n        }\n      }\n    });\n  }\n\n  loadStagePlanets(stage) {\n    const pending = [];\n    const bDatabase = {...this.state.world.bDatabase};\n    const db = bDatabase[stage];\n    const dbplanets = db.slice(1);\n    //the active check doesn't fit the rest of the logic, gotta change something\n    if (dbplanets) {\n      for (let planet of dbplanets) {\n        if (planet.active&&db[planet.parent].active) {\n          pending.push(planet);\n        }\n      };\n    }\n    this.setState((prevState) => {\n      return {\n        world: {\n          ...prevState.world,\n          pendingBodies: pending,\n          stage: stage,\n        }\n      }\n    });\n  }\n\n  loadStageStructures(stage) {\n    const pending = [];\n    const sDatabase = {...this.state.world.sDatabase};\n    const db = sDatabase[stage];\n    if (db) {\n      for (let struct of db) {\n        // console.log(struct)\n        if (struct.active) {\n          pending.push(struct);\n        }\n      };\n    }\n    this.setState((prevState) => {\n      return {\n        world: {\n          ...prevState.world,\n          structures: [],\n          pendingStructures: pending,\n        }\n      }\n    });\n  }\n\n  async loadStage(stage=\"Sol\") {\n    await this.createPrimary(this.state.world.bDatabase[stage][0].data);\n    this.loadStagePlanets(stage);\n    this.loadStageStructures(stage);\n    this.addCoreEmitter();\n    return this.continueGame();\n  }\n\n  //moving around the galaxy\n  systemChange(target) {\n    const currStage = this.state.world.stage;\n    const bDatabase = {...this.state.world.bDatabase};\n    const sDatabase = {...this.state.world.sDatabase};\n    const bdb = bDatabase[currStage];\n    const sdb = sDatabase[currStage];\n    const bdb2 = bDatabase[target];\n    const sdb2 = sDatabase[target];\n    for (let b of bdb) {\n      b.active = false;\n    }\n    if (sdb) {\n      for (let s of sdb) {\n        s.active = false;\n      }\n    }\n    for (let b of bdb2) {\n      b.active = true;\n    }\n    if (sdb2) {\n      for (let s of sdb2) {\n        s.active = true;\n      }\n    }\n    this.setState((prevState) => {\n      return {\n        // inGame: 'loading',\n        world: {\n          ...prevState.world,\n          bDatabase: bDatabase,\n          sDatabase: sDatabase,\n        },\n        ball: {\n          ...prevState.ball,\n          x: prevState.screen.width/4,\n          y: prevState.screen.height/3\n        }\n      }\n    });\n    this.loadStage(target);\n    // console.log(target);\n    // console.log(this.state.inGame);\n  }\n\n  async createPrimary(data) {\n    const star = new Body(data);\n    star.index = 0;\n    const bodies = [];\n    bodies.push(star);\n    return this.setState((prevState) => {\n      return {\n        world: {\n          ...prevState.world,\n          bodies: bodies,\n          stage: data.name,\n        }\n      }\n    });\n  }\n\n  //planet and star make/toggle\n  createPlanet(data=null,parent=0,index=this.state.world.bodies.length,em=null,status=null) {\n    const bodies = [...this.state.world.bodies];\n    // console.log(data);\n    bodies[index] = new Body(data,bodies[parent]);\n    bodies[index].index = index;\n    bodies[index].emitter = this.createNewEmitter(em);\n    bodies[index].status = status||\n    {\n      shield: 5,\n      uplink: 100,\n    }\n    ;\n    this.setState((prevState) => {\n      return {\n        world: {\n          ...prevState.world,\n          bodies: bodies,\n        }\n      }\n    });\n  }\n\n  updatePlanets() {\n    const pending = [...this.state.world.pendingBodies];\n    for (let i=0;i<pending.length;i++) {\n      let p = pending.splice(0,1)[0];\n      if (!p.em) {\n        p.em = { target: p.index, e: 600, color1: shadeColor(p.data.hue,80), rate1: 6, rate2: 1.5, velocity: 1.5, damp: 0.007, life: 7, mass: 5 };\n      }\n      this.createPlanet(p.data,p.parent,p.index,p.em||null,p.status||null);\n    }\n    this.setState((prevState) => {\n      return {\n        world: {\n          ...prevState.world,\n          pendingBodies: pending,\n        }\n      }\n    });\n  }\n\n  planetToggle(p) {\n    // let p = e.target.id;\n    const bodies = [...this.state.world.bodies];\n    // const [star, ...planets] = bodies;\n    const planets = bodies.slice(1);\n    const stage = this.state.world.stage;\n    const bDatabase = {...this.state.world.bDatabase};\n    const db = bDatabase[stage];\n    const target = db.find( b => b.data.name === p );\n    if (!target.active&&bodies[target.parent]) {\n      db[target.index].active = true;\n      const pending = [...this.state.world.pendingBodies];\n      pending.push(target);\n      this.setState((prevState) => {\n        return {\n          world: {\n            ...prevState.world,\n            pendingBodies: pending,\n            bDatabase: bDatabase\n          }\n        }\n      });\n    }\n    else if (target.active) {\n      //disables any active children. but the star is exempt even if it's its own parent by default\n      for (let body of planets) {\n        if (body&&body.parent===bodies[target.index]) {\n          let i = body.index;\n          db[i].active = false;\n          bodies[i] = null;\n        }\n      }\n      db[target.index].active = false;\n      bodies[target.index] = null;\n      this.setState((prevState) => {\n        return {\n          world: {\n            ...prevState.world,\n            bodies: bodies,\n            bDatabase: bDatabase,\n          }\n        }\n      });\n    }\n  }\n\n  //structure make/toggle\n  createStructure(data=null,openings=0,index=this.state.world.structures.length) {\n    const structures = [...this.state.world.structures];\n    structures[index] = new ringStructure(data);\n    structures[index].addSegments(openings);\n    structures[index].index = index;\n    // console.log(structures[index])\n    this.setState((prevState) => {\n      return {\n        world: {\n          ...prevState.world,\n          structures: structures,\n        }\n      }\n    });\n  }\n\n  updateStructures() {\n    const ps = [...this.state.world.pendingStructures];\n    const structures = [...this.state.world.structures];\n    for (let i=0;i<ps.length;i++) {\n      let p = ps.splice(0,1)[0];\n      // console.log(p.data)\n      // this.createStructure(p.data,p.openings,p.index);\n      structures[p.index] = new ringStructure(p.data);\n      structures[p.index].addSegments(p.openings);\n      structures[p.index].index = p.index;\n    }\n    // console.log(structures)\n    this.setState((prevState) => {\n      return {\n        world: {\n          ...prevState.world,\n          structures: structures,\n          pendingStructures: ps,\n        }\n      }\n    });\n  }\n\n  structureToggle(s) {\n    const structures = [...this.state.world.structures];\n    const stage = this.state.world.stage;\n    const sDatabase = {...this.state.world.sDatabase};\n    const db = sDatabase[stage];\n    const target = db.find( struct => struct.data.name === s );\n    // console.log(structures)\n    if (!target.active) {\n      db[target.index].active = true;\n      const pending = [...this.state.world.pendingStructures];\n      pending.push(target);\n      this.setState((prevState) => {\n        return {\n          world: {\n            ...prevState.world,\n            pendingStructures: pending,\n            sDatabase: sDatabase,\n          }\n        }\n      });\n    } else if (target.active) {\n      db[target.index].active = false;\n      structures[target.index] = null;\n      this.setState((prevState) => {\n        return {\n          world: {\n            ...prevState.world,\n            structures: structures,\n            sDatabase: sDatabase,\n          }\n        }\n      });\n    }\n  }\n\n  //proton stuff\n  defineEB() {\n    // let mouseAttract = new Proton.Attraction(this.state.mouseObj, 5, 200);\n    this.sharedEB.borderZoneBehaviour = new Proton.CrossZone(new Proton.RectZone(0, 0, this.state.screen.width, this.state.screen.height), 'bound');\n    this.sharedEB.randomBehaviour = new Proton.RandomDrift(5, 5, .05);\n    const centerZone = this.state.world.bodies[0]?{\n      x: this.state.world.bodies[0].x,\n      y: this.state.world.bodies[0].y,\n    }:{\n      x: 350,\n      y: 350,\n    }\n    // console.log(centerZone);\n    this.sharedEB.centerBehaviour = new Proton.Repulsion(centerZone, 30, this.state.world.bodies[0]?this.state.world.bodies[0].size*2:30)\n    return this.sharedEB\n  }\n\n  createNewEmitter({target=null, color1=null, color2=null, mass=5, radius=1, velocity=2.5, rate1=20, rate2=0.5, damp=0.005, e='once', life=5, planetAttraction=true, x=350, y=350, a=0, b=360}={}, special=false) {\n    let emitter = new Proton.Emitter();\n    emitter.e = e;\n    emitter.damping = damp;\n    emitter.rate = new Proton.Rate(new Proton.Span(rate1, rate1*1.5), rate2);\n    emitter.addInitialize(emitter.rate);\n    emitter.addInitialize(new Proton.Mass(mass));\n    emitter.addInitialize(new Proton.Radius(radius));\n    if (life) { emitter.addInitialize(new Proton.Life(life)) }\n    emitter.currVelocity = new Proton.Velocity(new Proton.Span(velocity, velocity*1.5), new Proton.Span(a, b), 'polar');\n    emitter.addInitialize(emitter.currVelocity);\n    let c = color1?(new Proton.Color(color1, color2||color1)):(new Proton.Color('random'));\n    emitter.addBehaviour(c);\n    // let borderZoneBehaviour = new Proton.CrossZone(new Proton.RectZone(0, 0, this.state.screen.width, this.state.screen.height), 'bound');\n    if (this.sharedEB.borderZoneBehaviour) { emitter.addBehaviour(this.sharedEB.borderZoneBehaviour) }\n    // let randomBehaviour = new Proton.RandomDrift(5, 5, .05);\n    // emitter.addBehaviour(randomBehaviour);\n    if (this.sharedEB.randomBehaviour) { emitter.addBehaviour(this.sharedEB.randomBehaviour) }\n    // let rect = new Proton.RectZone(this.state.screen.width/2,this.state.screen.height/2,this.state.world.bodies[0].size);\n    // let centerZone = {\n    //   x: this.state.world.bodies[0].x||350,\n    //   y: this.state.world.bodies[0].y||350,\n    // }\n    // let centerBehaviour = new Proton.Repulsion(centerZone, 30, this.state.world.bodies[0].size*2)\n    // emitter.addBehaviour(centerBehaviour);\n    if (this.sharedEB.centerBehaviour) { emitter.addBehaviour(this.sharedEB.centerBehaviour) }\n    if (special==='core') {\n      emitter.coreAttraction = new Proton.Attraction(this.state.world.bodies[0], 10, 500);\n      emitter.addBehaviour(emitter.coreAttraction);\n    } else if (special==='psi') {\n      emitter.planetAttraction = new Proton.Attraction(this.state.world.bDatabase[this.state.world.stage][target].data, 10, 500);\n      emitter.addBehaviour(emitter.planetAttraction);\n    } else if (planetAttraction&&target!==null) {\n      emitter.planetAttraction = new Proton.Attraction(this.state.world.bDatabase[this.state.world.stage][target].data, 10, 500);\n      emitter.addBehaviour(emitter.planetAttraction);\n    }\n    emitter.target = target||0;\n    if (target) {\n      //proper initialization TBD\n      emitter.mouseAttract = new Proton.Attraction(this.state.mouseObj, 5, 200);\n      emitter.addBehaviour(emitter.mouseAttract);\n      emitter.p.x = x;\n      emitter.p.y = y;\n    };\n    if (!target) {\n      emitter.mouseAttract = new Proton.Attraction(this.state.mouseObj, 5, 200);\n      emitter.addBehaviour(emitter.mouseAttract);\n      emitter.p.x = x;\n      emitter.p.y = y;\n    };\n    // console.log(emitter.behaviours);\n    return emitter;\n  }\n\n  makePsiEmitter() {\n    this.setState((prevState) => {\n      return {\n        proton: {\n          ...prevState.proton,\n          psiEmitter: this.createNewEmitter({ e: 'once', color1: '#6699FF', color2: '#FFDDFF', rate1: 50, rate2: 0.01, velocity: 1, mass: 8, radius: 1, damp: 0.009, life: (1,5), special:'psi'}),\n        }\n      }\n    });\n  }\n\n  addCoreEmitter() {\n    this.setState((prevState) => {\n      return {\n        proton: {\n          ...prevState.proton,\n          coreEmitter: this.createNewEmitter({target:0, special:'core', e: 2, color1: shadeColor(this.state.world.bodies[0].hue,40,-10,-10), rate1: 6, rate2: 0.6, velocity: 1.8, damp: 0.014, life: 20, mass: 15, radius: 4, planetAttraction: true, a:_.random(-330,-30)+30, b:_.random(30,330)-30 }),\n        }\n      }\n    });\n  }\n\n  emitterParticleCheck(emitter=this.state.proton.psiEmitter,target=this.state.world.bodies[0],sample=16) {\n    let length = emitter.particles.length;\n    let centerBehaviour = new Proton.Repulsion(this.state.world.bodies[0], 60, this.state.world.bodies[0].size*15)\n    if (length>sample) {\n      for (let i=0;i<(length/sample)-1;i++) {\n        let particle = emitter.particles[length-(i*sample+1)];\n        // console.log(particle);\n        if (!particle.dead&&(objectDistance(particle.p,target)<target.size*5)) {\n          // let repulsion = particle.behaviours.find( b => b.name === \"Repulsion\" );\n          // repulsion.reset(this.state.world.bodies[0], 100, 100)\n          // let color = particle.behaviours.find( b => b.name === \"Color\" );\n          // let solar = particle.behaviours.find( b => b.name === \"Attraction\" && (b.targetPosition instanceof Body) );\n          // particle.removeBehaviour(solar);\n          // particle.removeBehaviour(color)\n          // particle.removeAllBehaviours();\n          particle.addBehaviour(new Proton.Color('#59FF98', '#49FF88'))\n          particle.mass*=2;\n          particle.energy*=2;\n          particle.addBehaviour(centerBehaviour)\n          this.setState((prevState) => {\n            return {\n              resources: {\n                ...prevState.resources,\n                matter: prevState.resources.matter+1,\n              }\n            }\n          });\n        }\n      }\n    }\n  }\n\n  //motion stuff\n  thrustInput() {\n    let tx = 0;\n    let ty = 0;\n    if (this.state.keys.up) {\n      ty -= this.state.ball.thrustAcc*Math.pow(this.state.keys.up, 0.3)*1.5;\n    }\n    if (this.state.keys.down) {\n      ty += this.state.ball.thrustAcc*Math.pow(this.state.keys.down, 0.3)*1.5;\n    }\n    if (this.state.keys.left) {\n      tx -= this.state.ball.thrustAcc*Math.pow(this.state.keys.left, 0.3)*1.5;\n    }\n    if (this.state.keys.right) {\n      tx += this.state.ball.thrustAcc*Math.pow(this.state.keys.right, 0.3)*1.5;\n    }\n    // if (tx||ty) {\n      // this.setState((prevState) => {\n      //   return {\n      //     ball: {\n      //       ...prevState.ball,\n      //       vx: prevState.ball.vx + tx,\n      //       vy: prevState.ball.vy + ty,\n      //     }\n      //   }\n      // })\n    // }\n    return [tx, ty]\n  }\n\n  borderCollision(object) {\n    const bounce = this.state.params.bounceDampening*0.7;\n    const width = this.state.screen.width\n    const height = this.state.screen.height\n    if (object.x+object.vx > width - object.size || object.x+object.vx < object.size) {\n      // if (object.x+object.vx<width/-10||object.x+object.vx>width*1.1) {\n      //   //return from OOB\n      //   console.log('OOB X')\n      //   this.setState((prevState) => {\n      //     return {\n      //       ball: {\n      //         ...prevState.ball,\n      //         x: (object.x+object.vx)>0?width*Math.sqrt(bounce):width/5*(1+bounce/5),\n      //         y: (object.y+object.vy)>0?height*Math.sqrt(bounce):height/5*(1+bounce/5),\n      //         vx: prevState.vx*0.05,\n      //         vy: prevState.vy*0.05,\n      //       }\n      //     }\n      //   });\n      // }\n      return [-1, 1]\n    }\n    if (object.y+object.vy > height - object.size || object.y+object.vy < object.size) {\n      // if (object.y+object.vy<height/-10||object.y+object.vy>height*1.1) {\n      //   //return from OOB\n      //   console.log('OOB Y')\n      //   this.setState((prevState) => {\n      //     return {\n      //       ball: {\n      //         ...prevState.ball,\n      //         x: (object.x+object.vx)>0?width*Math.sqrt(bounce):width/5*(1+bounce/5),\n      //         y: (object.y+object.vy)>0?height*Math.sqrt(bounce):height/5*(1+bounce/5),\n      //         vx: prevState.vx*0.05,\n      //         vy: prevState.vy*0.05,\n      //       }\n      //     }\n      //   });\n      // }\n      return [1, -1]\n    }\n    return [1, 1]\n  }\n\n  ballGravPull(object, targets) {\n    let gx = 0;\n    let gy = 0;\n    for (let body of targets) {\n      if (body) {\n        let dist = objectDistance(object, body);\n        gx += body.mass*towardsBody(object, body).x/Math.pow(dist * this.state.params.gravFalloff, 2);\n        gy += body.mass*towardsBody(object, body).y/Math.pow(dist * this.state.params.gravFalloff, 2);\n      }\n    }\n    return [-gx, -gy]\n  }\n\n  structCollisionCheck() {\n    let ball = this.state.ball;\n    let angle = (Victor(ball.x-this.props.width/2, ball.y-this.props.height/2).horizontalAngle()+Math.PI*2)%(Math.PI*2);\n    // let coll = false;\n    let structures = [...this.state.world.structures]\n    for (let struct of this.state.world.structures) {\n      if (struct && objectDistance(ball,struct.origin) > struct.radius-struct.width/2-ball.size && objectDistance(ball,struct.origin) < struct.radius+struct.width/2+ball.size) {\n        // let arcLength = (((struct.segments[0].bc-struct.segments[0].ac)*struct.dir+Math.PI*3)%(Math.PI*2)-Math.PI);\n        let arcLength = struct.arcLength;\n        for (let seg of struct.segments) {\n          let angleDiff = struct.speed>0?\n          ((angle-seg.ac)+Math.PI*3)%(Math.PI*2)-Math.PI:\n          (-(angle+seg.bc)+Math.PI*3)%(Math.PI*2)-Math.PI;\n          if (seg.health>0&&((angleDiff>0&&angleDiff<arcLength)||(angleDiff<0&&angleDiff>Math.PI-arcLength))) {\n            // console.log('hit');\n            seg.health--;\n            if (seg.health===0) {\n              seg.health = -6;\n              console.log('segment disabled!')\n            }\n            return this.structCollState(struct.index);\n          }\n        }\n      }\n    }\n    //still run it to reset state if needed\n    return this.structCollState(false);\n  }\n\n  structCollState(coll) {\n    const bounce = this.state.params.bounceDampening*0.8;\n    if (coll!==false) {\n      //collision continues, increment tick:\n      if (this.state.ball.coll!==false) {\n        if (this.state.tick%3===0) {\n          this.setState((prevState) => {\n            return {\n              ball: {\n                ...prevState.ball,\n                ct: prevState.ball.ct+1,\n              }\n            }\n          })\n          return  [1*(1+this.state.ball.ct/10)*bounce,1*(1+this.state.ball.ct/10)*bounce]\n        }\n        return [1, 1]\n      } else {\n        //collision begins:\n        this.setState((prevState) => {\n          return {\n            ball: {\n              ...prevState.ball,\n              coll: coll,\n              ct: 1,\n            }\n          }\n        })\n        return [-1*bounce,-1*bounce]\n      }\n    }\n    //\"NO COLLISION! Fake News!\" - Donald J. Trump\n    else {\n      if (this.state.ball.coll!==false) {\n        this.setState((prevState) => {\n          return {\n            ball: {\n              ...prevState.ball,\n              coll: false,\n              ct: 0,\n            }\n          }\n        })\n      }\n      return [1, 1]\n    }\n  }\n\n  planetMotion() {\n    const bodies = [...this.state.world.bodies];\n    //apply a pulling force, costs energy\n    if (this.state.mousedown && this.state.resources.energy > 0 && this.state.mouseTick%2===0) {\n      for (let planet of bodies) {\n        if (planet) {\n          planet.getsPulled(9, this.state.mouseObj, this.state.mouseTick)\n        }\n      }\n      this.setState((prevState) => {\n        return {\n          resources: {\n            ...prevState.resources,\n            energy: prevState.resources.energy-1,\n          }\n        }\n      })\n    };\n    //normal motion\n    for (let planet of bodies) {\n      if (planet) {\n        if (planet.speed!==0&&planet.type!=='star') {\n          planet.movePlanet();\n        }\n        let otherBodies = bodies.filter(item => item !== planet);\n        for (let body of otherBodies) {\n          if (body) {\n            //have to think about handling it better\n            if (objectDistance(planet, body)*0.95 < body.size + planet.size) {\n              this.planetCollision(planet, body, 2);\n            }\n          }\n        }\n      }\n    };\n  }\n\n  planetCollision(origin, body, type) {\n    if (type === 1) {\n      const bounce = this.state.params.bounceDampening*0.9;\n      if (objectDistance(origin, body)*0.95 < body.size + origin.size) {\n        this.setState((prevState) => {\n          return {\n            currentScore: prevState.currentScore + 1,\n            // ball: {\n            //   ...prevState.ball,\n            // x: prevState.ball.x-(prevState.ball.vx * bounce*0.5),\n            // y: prevState.ball.y-(prevState.ball.vy * bounce*0.5),\n            // vx: -prevState.ball.vx * this.state.params.bounceDampening,\n            // vy: -prevState.ball.vy * this.state.params.bounceDampening,\n          }\n\n        })\n        return [-1*bounce, -1*bounce]\n      }\n      return [1, 1]\n    } else if (type === 2 && objectDistance(origin, body)*0.96 < body.size + origin.size) {\n      //remake this to only check once\n      return this.setState((prevState) => {\n        let bodies = [...prevState.world.bodies];\n        let b = bodies[bodies.indexOf(body)];\n        let o = bodies[bodies.indexOf(origin)];\n        if (o.speed) {\n          //adds more deviation from the orbit depending on collision tick\n          o.dx += towardsBody(origin, body).x*(o.coll*o.size/8)*(b.mass/o.mass);\n          o.dy += towardsBody(origin, body).y*(o.coll*o.size/8)*(b.mass/o.mass);\n          o.coll += 2;\n        }\n        // TBD\n        // if (b.speed) {\n        // }\n        return {\n          resources: {\n            ...prevState.resources,\n            matter: prevState.resources.matter+1,\n          },\n          bodies: bodies,\n        }\n      });\n    }\n  }\n\n  ballCheckPlanets() {\n    const bodies = this.state.world.bodies;\n    const ball = this.state.ball;\n    let pcx = 0;\n    let pcy = 0;\n    for (let body of bodies) {\n      if (body) {\n        let [cx,cy] = this.planetCollision(ball, body, 1)\n        if (cx!==1||cy!==1) {\n          pcx += cx\n          pcy += cy\n        }\n      }\n    }\n    if (pcx||pcy) {\n      return [pcx,pcy]\n    }\n    return [1,1]\n  }\n\n  moveBall() {\n    const ball = this.state.ball;\n    const bodies = this.state.world.bodies;\n    const bounce = this.state.params.bounceDampening;\n\n    let g = this.ballGravPull(ball, bodies);\n    let t = this.thrustInput();\n    let tl = (t[0]||t[1])?Math.sqrt(Math.pow(Math.abs(t[0]),2)+Math.pow(Math.abs(t[1]),2)):0\n    let vx = this.state.ball.vx+g[0]+t[0];\n    let vy = this.state.ball.vy+g[1]+t[1];\n    // console.log(this.state.ball.thrustLevel)\n    let bc = this.borderCollision(ball);\n\n    if (bc[0]!==1||bc[1]!==1) {\n      //bounce off borders first\n      vx *= -1*bounce*0.5;\n      vy *= -1*bounce*0.5;\n      let speed = objectDistance(ball, {x: vx, y:vy});\n      return this.setState((prevState) => {\n        return {\n          ball: {\n            ...prevState.ball,\n            x: _.clamp(prevState.ball.x, 0, prevState.screen.width) + vx,\n            y: _.clamp(prevState.ball.y, 0, prevState.screen.height) + vy,\n            vx: vx,\n            vy: vy,\n            speed: speed,\n            // thrustLevel: tl?tl:prevState.ball.thrustLevel?Math.floor(Math.floor(prevState.ball.thrustLevel*10)/200):0,\n            thrustLevel: tl?tl:prevState.ball.thrustLevel?Math.floor(prevState.ball.thrustLevel*100)/101:0,\n          }\n        }\n      })\n    }\n    else {\n      let sc = this.structCollisionCheck();\n      let scx = sc[0]===1?0:sc[0]\n      let scy = sc[1]===1?0:sc[1]\n\n      let pc = this.ballCheckPlanets();\n      let pcx = pc[0]===1?0:pc[0]\n      let pcy = pc[1]===1?0:pc[1]\n      //this is so messy, have to return 0s for no collision and check if true\n      if (scx&&pcx) {\n        vx *= -sc[0]*pc[0];\n        vy *= -sc[1]*pc[1];\n      } else {\n        vx *= sc[0]*pc[0];\n        vy *= sc[1]*pc[1];\n      }\n      let speed = objectDistance(ball, {x: vx, y:vy});\n      return this.setState((prevState) => {\n        return {\n          // ...prevState,\n          ball: {\n            ...prevState.ball,\n            // will rewrite this completely\n            x: prevState.ball.x + vx + (prevState.ball.vx/4)*(scx)+(prevState.ball.vx/4)*(pcx),\n            y: prevState.ball.y + vy + (prevState.ball.vy/4)*(scy)+(prevState.ball.vy/4)*(pcy),\n            vx: vx,\n            vy: vy,\n            speed: speed,\n            thrustLevel: tl?tl:prevState.ball.thrustLevel?Math.floor(prevState.ball.thrustLevel*100)/101:0,\n          }\n        }\n      })\n    }\n  }\n\n  handlePauseStart() {\n    if (this.state.inGame === false) {\n      this.continueGame();\n      console.log(\"continue\");\n    } else if (this.state.inGame === true) {\n      this.stopGame();\n      console.log(\"pause\");\n    }\n  }\n\n  //primary logic loop\n  continueGame() {\n    requestAnimationFrame((t) => {this.update(t)});\n    this.setState(() => {\n      return { inGame: true, }\n    });\n  }\n\n  stopGame() {\n    clearInterval(this.timerID);\n    cancelAnimationFrame(this.animationID);\n    this.setState(() => {\n      return { inGame: false, }\n    });\n  }\n\n  //React own methods\n  componentDidMount() {\n    window.addEventListener('keyup',   this.handleKeys.bind(this, false));\n    window.addEventListener('keydown', this.handleKeys.bind(this, true));\n    // window.addEventListener('resize',  this.handleResize.bind(this, false));\n    this.setState(() => {\n      return { inGame: \"loading\", }\n    });\n    this.defineEB();\n    // console.log(this.sharedEB)\n    this.createGalaxy(this.state.starList);\n    this.loadStage(\"Sol\");\n    this.makePsiEmitter();\n  }\n\n  componentWillUnmount() {\n    cancelAnimationFrame(this.animationID);\n  }\n\n  //just testing\n  // async nextFrame(t) {\n  //   return new Promise(resolve => {\n  //     requestAnimationFrame((t) => {this.update(t)})\n  //   })\n  // }\n\n  async update(t) {\n    //animInterval is the framerate setting, only do stuff if it's exceeded\n    let delta = t - this.state.ts;\n    if (delta > animInterval) {\n      this.setState((prevState) => {\n        return {\n          ts: t - (delta % animInterval),\n          tick: prevState.tick + 1,\n          mouseTick: prevState.mousedown ? prevState.mouseTick+1 : 0,\n          mouseReleased: !prevState.mousedown&&prevState.mouseTick>0 ? true : false,\n        }\n      });\n      if (this.state.world.pendingBodies.length>0) {\n        this.updatePlanets();\n      };\n      if (this.state.world.pendingStructures.length>0) {\n        this.updateStructures();\n      };\n      this.planetMotion();\n      for (let layer of this.state.world.structures) {\n        if (layer) {\n          layer.moveSegments();\n        }\n      }\n      this.moveBall();\n      if (this.state.proton.psiEmitter.particles.length>8&&this.state.tick%50===0) {\n        this.emitterParticleCheck(this.state.proton.psiEmitter,this.state.world.bodies[0],4);\n      }\n    }\n    if (this.state.inGame === \"loading\") {\n      console.log(\"loading\")\n    }\n    if (this.state.inGame === true) {\n      return this.animationID = requestAnimationFrame((t) => {this.update(t)});\n      // return this.animationID = await this.nextFrame(t);\n    }\n  }\n\n  render() {\n    //UI elements\n    const ui = {\n      tick: this.state.tick,\n      ts: this.state.ts,\n      inGame: this.state.inGame,\n      currentScore: this.state.currentScore,\n      stage: this.state.world.stage,\n      ball: this.state.ball,\n      resources: this.state.resources,\n      mousedown: this.mousedown,\n    };\n\n    const stage = this.state.world.stage;\n    const starTravelList = this.makeMapInterface(ui);\n\n    const bDatabase = {...this.state.world.bDatabase}\n    const planetList = bDatabase[stage]&&bDatabase[stage].length>0?bDatabase[stage].slice(1).map(\n      (planet) =>\n      <PlanetButton onClick={this.handlePlanetToggle} body={planet} key={planet.data.name}/>\n    ):\n    null;\n\n    const sDatabase = {...this.state.world.sDatabase}\n    const structList = sDatabase[stage]?sDatabase[stage].map(\n      (struct) =>\n      <StructureButton onClick={this.handleStructureToggle} struct={struct} key={struct.data.name}/>\n    ):\n    null;\n\n    const selectionInfo = this.state.selectedObj?\n    <InfoBox style={{ color: '#05051A', backgroundColor: '#DACFDA', textAlign:'left', listStyle:'none', padding:'0.4em 0.6em',margin:'0.5em auto',minWidth:'30%',minHeight:\"6em\"}} obj={this.state.selectedObj} fShield={this.handleChargeShield}/>:\n    <span style={{minWidth:'30%',minHeight:\"6em\",margin:'0.5em auto'}}>{`Click on an in-system body for an info box`}</span>;\n\n    const controlButtons = this.makeControlButtons();\n\n    const canvasCheck = this.state.world.bodies[0]?\n    <GameCanvas onMouseDown={this.mousedownHandler} onMouseUp={this.mouseupHandler} onMouseMove={this.mousemoveHandler} style={{ background: \"#36454F\" }} {...this.state} />\n    :null;\n\n    return (\n      <div className=\"showcase\">\n      {canvasCheck}\n      <GUIWrap ui={ui}>\n\n      <Modal\n      isOpen={this.state.showModal}\n      contentLabel=\"onRequestClose Example\"\n      onRequestClose={this.handleCloseModal}\n      shouldCloseOnOverlayClick={true}\n      style={{ content: {\n        backgroundColor: '#30405E',\n        maxWidth: '30%'\n      } }}\n      ui={ui}>\n      <h2 style={{fontColor: '#C0C0EE', margin:'0.5em', textAlign:'center'}}>Galaxy map</h2>\n\n      <ButtonBlock ui={ui}>\n      {starTravelList}\n      </ButtonBlock>\n      <button style={{backgroundColor: '#30405E', padding:'0.2em', margin:'2em 0.5em 0.5em'}} onClick={this.handleCloseModal}>Close</button>\n      </Modal>\n      <StatsDisplay ui={ui} />\n      <p>WASD to accelerate</p>\n      <Controls ui={ui}>\n      <ButtonBlock ui={ui}>\n      {controlButtons}\n      </ButtonBlock>\n      <ButtonBlock ui={ui}>\n      {structList}\n      </ButtonBlock>\n      <ButtonBlock ui={ui}>\n      {planetList}\n      </ButtonBlock>\n      </Controls>\n      <button onClick={this.handleOpenModal} style={{fontSize:'1.3em',alignSelf:'center',backgroundColor: '#30405E', padding:'0.5em',margin:'0.6em auto',borderRadius:'1px'}}>GALAXY MAP</button>\n      {selectionInfo}\n      </GUIWrap>\n      </div>\n    );\n  };\n};\n\n//interface\nconst GUIWrap = ({ ui, children }) => (\n  <div className=\"game-interface\">\n  {children}\n  </div>\n);\nconst StatsDisplay = ({ ui }) => (\n  <div className=\"interface-element\" style={{fontSize:\"1.1em\",margin:'0.2em auto',width:\"100%\",padding:\"0.1em\",transitionDuration:'0'}}>\n  <p style={{textAlign:'left'}}>{`Stage: ${ui.stage} || Energy: ${ui.resources.energy} || Matter: ${ui.resources.matter} || Psi: ${ui.resources.psi} || Score: ${ui.currentScore}`}</p>\n  </div>\n);\n\nconst InfoBox = ({ style, obj, fShield, fUplink }) => (\n  <section style={style}>\n  <li style={{minWidth:\"15em\"}}>\n  <ul>{`Name: ${obj.name}`}</ul>\n  <ul>{`Mass: ${obj.mass}`}</ul>\n  <ul>{`Coordinates: X ${obj.x.toFixed(0)}|| Y ${obj.y.toFixed(0)}`}</ul>\n  <ul>{`Type: ${obj.type}`}</ul>\n  <ul>{`Shield power: ${obj?obj.status?obj.status.shield?obj.status.shield:0:0:0}`}</ul>\n  <ul>{`Psychic uplink: ${obj?obj.status?obj.status.uplink?obj.status.uplink:0:0:0}`}</ul>\n  </li>\n  <button style={{fontSize: \"0.8em\",padding:\"0.1em\",margin:\"0.2em\"}} id=\"shieldCharge\" text=\"\" onClick={fShield} id={obj.name}>CHARGE SHIELD</button>\n  </section>\n);\n\nconst Controls = ({ children }) => (\n  <div className=\"game-controls\" style={{padding:'0.1em',margin:'0.1em'}}>\n  {children}\n  </div>\n);\nconst ButtonBlock = ({ ui, children }) => (\n  <div className=\"interface-element\">\n  {children}\n  </div>\n);\nconst Button = ({ onClick, text, style, id }) => (\n  <button onClick={onClick} type=\"button\" style={style} id={id}>\n  {text}\n  </button>\n);\nconst StarButton = ({ onClick, star, ui }) => (\n  <button onClick={onClick} type=\"button\" style={ui.stage===star?{backgroundColor: '#DD1133'}:{backgroundColor: '#4422EE'}} id={star} >\n  Load system: {star}\n  </button>\n);\nconst PlanetButton = ({onClick, body}) => (\n  <button onClick={onClick} style={{backgroundColor: `${shadeColor(body.data.hue,-20)}`}} id={body.data.name}>Toggle planet: {body.data.name}</button>\n);\nconst StructureButton = ({onClick, struct}) => (\n  <button onClick={onClick} style={{backgroundColor: `${shadeColor(struct.data.hue,-40)}`}} id={struct.data.name}>Toggle structure: {struct.data.name}</button>\n);\n\n//planet data\nconst marsData = {\n  size: 9,\n  orbitX: 200,\n  orbitY: 160,\n  rot: 200,\n  speed: -1.5,\n  mass: 100,\n  hue: \"#ff4336\",\n  glow: 0.8,\n  angle: 0,\n  name: \"Mars\",\n}\n\nconst phobosData = {\n  size: 6,\n  orbitX: 35,\n  orbitY: 32,\n  rot: 100,\n  speed: 1.5,\n  mass: 50,\n  hue: \"#EE1111\",\n  glow: 0.6,\n  angle: 40,\n  name: \"Phobos\",\n}\n\nconst venusData = {\n  size: 12,\n  orbitX: 105,\n  orbitY: 90,\n  rot: 205,\n  speed: 1,\n  mass: 165,\n  hue: \"#00A86B\",\n  glow: 0.8,\n  angle: 10,\n  name: \"Venus\",\n}\n\nconst earthData = {\n  size: 11,\n  orbitX: 155,\n  orbitY: 140,\n  rot: 20,\n  speed: 1,\n  mass: 150,\n  hue: \"#007FFF\",\n  glow: 1.2,\n  angle: 20,\n  name: \"Earth\",\n}\n\nconst solData = {\n  size: 19,\n  orbitX: 0,\n  speed: 0,\n  mass: 220,\n  hue: \"#FFCC33\",\n  glow: 2.5,\n  angle: 0,\n  name: \"Sol\",\n}\n\nconst saturnData = {\n  size: 14,\n  orbitX: 310,\n  speed: 0.5,\n  mass: 190,\n  hue: \"#d9b47d\",\n  glow: 1,\n  angle: 210,\n  name: \"Saturn\",\n}\n\nfunction rngBody(seed, type=\"planet\", scale=1, rstate=false) {\n  let rng = seedrandom(seed, {state: rstate})\n  if (type===\"star\") {\n    return {\n      orbitX: 0,\n      speed: 0,\n      size: Math.floor((rng.quick()*17+10)*scale),\n      mass: Math.floor((rng.quick()*200+60)*scale),\n      hue: \"#\"+((rng.int32().toString(16)).slice(-6)),\n      glow: 1.5,\n      name: seed+\" Primary\",\n      rngstate: rstate?rng.state:null,\n    }\n  }\n  let ox = Math.floor(rng.quick()*300*Math.pow(scale, 0.5));\n  return {\n    orbitX: ox,\n    orbitY: ox-Math.floor(3+rng.quick()*15*Math.pow(scale, 2.5)),\n    rot: Math.floor(330*rng.quick()),\n    angle: Math.floor(330*rng.quick()),\n    speed: +((rng.quick()*1.5+0.3)/scale).toFixed(1),\n    size: Math.floor((rng.quick()*12+4)*Math.pow(scale, 1.25)),\n    mass: Math.floor((rng.quick()*150+40)*scale),\n    hue: shadeColor(\"#\"+((rng.int32().toString(16)).slice(-6)),20),\n    glow: Math.floor(20*rng.quick())/20,\n    name: seed,\n    rngstate: rstate?rng.state:null,\n  }\n}\n\nclass Body {\n  constructor(data, parent=null) {\n    this.data = data;\n    this.parent = parent;\n    this.xPar = this.parent ? this.parent.x : data.xPar||350;\n    this.yPar = this.parent ? this.parent.y : data.yPar||350;\n    this.size = data.size||15;\n    this.orbitX = data.orbitX||0;\n    this.orbitY = data.orbitY||this.orbitX;\n    this.type = data.orbitX>0 ? \"planet\" : \"star\";\n    this.rot = data.rot||0;\n    if (this.orbitX!==this.orbitY) {\n      this.e = Math.sqrt(1 - (Math.pow(this.orbitY, 2)/Math.pow(this.orbitX, 2)));\n      this.pfdist = new Victor(this.orbitX*this.e, 0)\n      this.pfdist.rotateDeg(this.rot);\n      this.pf = {\n        x: this.xPar + this.pfdist.x,\n        y: this.yPar + this.pfdist.y,\n      }\n      this.per = this.orbitX-this.orbitX*this.e;\n      this.aph = this.orbitX+this.orbitX*this.e;\n    }\n    this.speed = data.speed||0;\n    this.speedWarp = 0;\n    this.mass = data.mass||0;\n    this.hue = data.hue||\"#FFFF00\";\n    this.glow = data.glow||0;\n    this.name = data.name||\"Unknown\";\n    this.angle = data.angle||0;\n    this.dir = this.speed>0?1:-1;\n    this.x = this.xPar + this.orbitX;\n    this.y = this.yPar + this.orbitY;\n    this.dx = 0;\n    this.dy = 0;\n    this.coll = 0;\n    console.log(\"creating body: \"+this.name);\n    this.rngstate = data.rngstate||0;\n  }\n\n  getsPulled(force, target, tick=0) {\n    let dist = objectDistance(this, target);\n    let fade = 1+(tick*0.05)\n    this.speedWarp = (force*200/this.mass)/(Math.pow(dist * 0.5, 1.1)*fade);\n    if (dist > this.size*2*fade)  {\n      this.dx -= force*towardsBody(this, target).x/(Math.pow(dist * 0.04, 1.1)*fade);\n      this.dy -= force*towardsBody(this, target).y/(Math.pow(dist * 0.04, 1.1)*fade);\n    }\n  }\n\n  movePlanet() {\n    this.angle += this.orbitX===this.orbitY ?\n    (Math.acos(1 - Math.pow((this.speed/(1+this.speedWarp))/this.orbitX, 2)/2)%Math.PI*2)*this.dir :\n    (Math.acos(1 - Math.pow((this.speed*(1+this.e*Math.cos(this.angle))/(1+this.speedWarp))/this.orbitX, 2)/2)%Math.PI*2)*this.dir;\n\n\n    if (this.parent) {\n      this.xPar = this.parent.x;\n      this.yPar = this.parent.y;\n      if (this.orbitX!==this.orbitY) {\n        this.xPar -= this.pfdist.x;\n        this.yPar -= this.pfdist.y;\n      }\n    }\n    if (this.orbitX===this.orbitY) {\n      this.x = this.xPar + this.orbitX * Math.cos(this.angle) + this.dx;\n      this.y = this.yPar + this.orbitY * Math.sin(this.angle) + this.dy;\n    }\n    else {\n      let el = new Victor(this.orbitX * Math.cos(this.angle), this.orbitY * Math.sin(this.angle))\n      el.rotateDeg(this.rot)\n      this.x = this.xPar + el.x + this.dx;\n      this.y = this.yPar + el.y + this.dy;\n    }\n    if (this.dx) {\n      this.dx = Math.abs(this.dx)>1 ? this.dx*0.99 : 0;\n    }\n    if (this.dy) {\n      this.dy = Math.abs(this.dy)>1 ? this.dy*0.99 : 0;\n    }\n    if (this.speedWarp) {\n      this.speedWarp = this.speedWarp>0.1 ? this.speedWarp*0.8 : 0;\n    }\n    if (this.coll) {\n      this.coll--;\n    }\n  };\n}\n\n//structure data\nconst rs1 = { numSeg: 5, gap: 0.35, radius: 190, speed: -1.4, origin: {x: 350, y: 350}, width: 16, hue: \"#DF70FF\", name: \"S1\"};\nconst rs2 = { numSeg: 12, gap: 0.4, radius: 320, speed: 0.7, origin: {x: 350, y: 350}, width: 12, hue: \"#FFD5D0\", name: \"S2\"};\nconst rs3 = { numSeg: 2, gap: 0.2, radius: 50, speed: 0.5, origin: {x: 350, y: 350}, width: 10, hue: \"#86CFEF\", name: \"S3\"};\nconst rs4 = { numSeg: 18, gap: 0.1, radius: 250, speed: 0.4, origin: {x: 350, y: 350}, width: 12, hue: \"#FF6655\", name: \"S4\"};\n\nfunction rngStruct(seed, scale=1, rstate=false) {\n  let rand = seedrandom(seed, {state: rstate})\n  // let ox = Math.floor(rng.quick()*350*Math.pow(scale, 0.5));\n  return {\n    numSeg: Math.floor(1+12*rand.quick())*1,\n    arg: 0,\n    gap: Math.floor(50*rand.quick())/100,\n    speed: ((rand.quick()*1.5)/scale).toFixed(1)-1,\n    width: Math.floor((rand.quick()*15+4)*1),\n    radius: Math.floor((rand.quick()*280)+30*1),\n    hue: shadeColor(\"#\"+((rand.int32().toString(16)).slice(-6)),30),\n    glow: Math.floor(20*rand.quick())/15,\n    name: seed,\n    rngstate: rstate?rand.state:null,\n    origin: {x: 350, y: 350},\n  }\n}\n\nclass ringStructure {\n  constructor({numSeg=5, gap=0.4, radius=240, speed=5, origin={x: 350, y: 350}, width=10, hue=\"#E0E0E0\", glow=1,name=\"(Unknown)\",arg=0}={}) {\n    this.numSeg = numSeg;\n    this.arg = arg;\n    this.gap = gap;\n    this.radius = radius;\n    this.speed = speed;\n    this.dir = speed<0?-1:1;\n    this.origin = origin;\n    this.width = width;\n    this.hue = hue;\n    this.glow = 0.5;\n    this.regen = 4;\n    this.segments = [];\n    this.name = name;\n    // this.arcLength = (((Math.PI*2*(1-gap))/numSeg*1+Math.PI*3)%(Math.PI*2)-Math.PI);\n    this.arcLength = (Math.PI*2*(1-gap))/numSeg;\n\n  }\n\n  addSegments(openings=0) {\n    let arg = this.dir===1?this.arg:this.arg-Math.PI*2;\n    let gap = this.gap;\n    let numSeg = this.numSeg;\n    let r = this.radius;\n    let origin = this.origin;\n    let width = this.width;\n    let hue = this.hue;\n    let glow = this.glow;\n    let dir = this.dir;\n    let arcLength = this.arcLength;\n    for (let i=0;i<numSeg;i++) {\n      let segment = {\n        a: arg,\n        b: arg + arcLength,\n        arcLength: arcLength,\n        randArc: _.random(arcLength*0.4,true),\n        r: r,\n        ac: arg%(Math.PI*2),\n        bc: (arg + arcLength)%(Math.PI*2),\n        dir: dir,\n        origin: origin,\n        width: width,\n        hue: i===0?\"#4DEEE4\":hue,\n        glow: i===0?glow*5:glow,\n        health: 3,\n        phase: 0,\n      };\n      this.segments.push(segment);\n      arg += (Math.PI*2)/numSeg;\n    }\n    for (let i=0;i<openings;i++) {\n      this.destroyRandom();\n    }\n  }\n\n  destroySegment(seg) {\n    const destroy = this.segments.filter(item => item !== seg);\n    this.segments = destroy;\n  }\n\n  destroyRandom() {\n    let rand = this.segments[_.random(this.segments.length)-1]\n    this.destroySegment(rand);\n  }\n\n  moveSegments() {\n    for (let seg of this.segments) {\n      if (this.speed>0) {\n        seg.a += Math.PI*2*0.001*this.speed;\n        seg.ac = (Math.abs(seg.a)+Math.PI*2)%(Math.PI*2);\n        seg.b += Math.PI*2*0.001*this.speed;\n        seg.bc = (Math.abs(seg.b)+Math.PI*2)%(Math.PI*2);\n      } else if (this.speed<0) {\n        seg.a += Math.PI*2*0.001*this.speed;\n\n        seg.b += Math.PI*2*0.001*this.speed;\n        seg.ac = Math.abs(seg.a-Math.PI*2)%(Math.PI*2);\n        seg.bc = Math.abs(seg.b-Math.PI*2)%(Math.PI*2);\n      }\n      let phase = Math.floor(Math.abs(Math.sin((seg.a+Math.PI*2)%(Math.PI*2))*10000));\n      let int = phase%150;\n      seg.glow = this.glow+(phase/300*this.glow)\n      // if (int===0) {\n      //\n      // }\n      // if (seg.health<3 && int<this.regen/_.clamp(seg.health+this.regen/2,1,5)) {\n      if (seg.health<3 && int<this.regen) {\n        seg.health<0?seg.health+=0.5:seg.health++;\n        // seg.health<0?seg.health+=0.5:seg.health+=Math.floor(this.regen/seg.health)+1;\n      }\n    }\n  }\n}\n\n//the canvas render is split into a dynamic wrapper and a nested non-updating actual canvas, idea by Phil Nash https://philna.sh/, elements from Reacteroids\nclass GameCanvas extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      zones: [],\n    }\n    this.saveContext = this.saveContext.bind(this);\n    //proton\n    this.tick = 1;\n    this.psiLevel = 0;\n    this.emitterList = [];\n  }\n\n  saveContext(canvas) {\n    this.protonCanvas = canvas;\n    this.ctx = canvas.getContext('2d');\n    this.width = this.ctx.canvas.width;\n    this.height = this.ctx.canvas.height;\n  }\n\n  componentDidMount() {\n    this.createProton();\n  }\n\n  createProton() {\n    this.proton = new Proton();\n    // const imageWidth = 342;\n    // const drawScopeWidth = 710;\n    // const rect = new Proton.Rectangle((this.protonCanvas.width - imageWidth) / 2, (this.protonCanvas.height - imageWidth) / 2, imageWidth, imageWidth);\n    // const rect2 = new Proton.Rectangle((this.protonCanvas.width - drawScopeWidth) / 2, 0, drawScopeWidth, this.protonCanvas.height);\n    // const rectZone = new Proton.RectZone(rect2.x, rect2.y, rect2.width, rect2.height);\n    // const zones = this.state.zones;\n    // this.emitterList[0].addBehaviour(this.customToZoneBehaviour(zones[0], zones[1], zones[2]));\n\n    // this.borderZoneBehaviour = new Proton.CrossZone(new Proton.RectZone(0, 0, this.protonCanvas.width, this.protonCanvas.height), 'bound');\n    // this.centerZone = new Proton.RectZone(this.width/2, this.height/2, this.props.world.bodies[0].size);\n    // this.centerBehaviour = new Proton.Repulsion(this.centerZone, 10, 30)\n    // this.randomBehaviour = new Proton.RandomDrift(5, 5, .05);\n    this.clickEmitter = this.createClickEmitter('#F8F8FF', '#F8F8FF', this.props.ball);\n    this.renderer = new Proton.CanvasRenderer(this.protonCanvas);\n    // this.renderer.onProtonUpdate = function() {\n    // TBD\n    // };\n    this.renderer.onParticleUpdate = (particle) => {\n      this.ctx.globalAlpha = 0.9;\n      // if (particle.radius>1) {\n      //   this.renderer.drawCircle(particle);\n      // }\n      this.ctx.beginPath();\n      this.ctx.strokeStyle = particle.color;\n      this.ctx.lineWidth = particle.energy*2+particle.radius/4;\n      this.ctx.moveTo(particle.old.p.x-particle.old.a.x*20, particle.old.p.y-particle.old.a.y*20);\n      this.ctx.lineTo(particle.p.x, particle.p.y);\n      this.ctx.closePath();\n      this.ctx.stroke();\n      this.ctx.globalAlpha = 1\n    };\n    this.proton.addRenderer(this.renderer);\n  }\n\n  createClickEmitter(color1, color2, target=null) {\n    var clickEmitter = new Proton.Emitter();\n    // let emitDirection  = Victor(target.x-this.protonCanvas.width/2, target.y-this.protonCanvas.height/2).verticalAngleDeg();\n    let centerZone = {\n      x: this.props.world.bodies[0].x||this.width/2,\n      y: this.props.world.bodies[0].y||this.height/2,\n    }\n    let centerBehaviour = new Proton.Repulsion(centerZone, 10, this.props.world.bodies[0].size*2||30)\n    let borderZoneBehaviour = new Proton.CrossZone(new Proton.RectZone(0, 0, this.protonCanvas.width, this.protonCanvas.height), 'bound');\n    let randomBehaviour = new Proton.RandomDrift(5, 5, .05);\n    clickEmitter.addBehaviour(randomBehaviour);\n    clickEmitter.addBehaviour(borderZoneBehaviour);\n    clickEmitter.addBehaviour(centerBehaviour);\n\n    clickEmitter.target = target;\n    clickEmitter.damping = 0.012;\n    clickEmitter.addInitialize(new Proton.Rate(40,0.025));\n    clickEmitter.addInitialize(new Proton.Mass(8));\n    clickEmitter.addInitialize(new Proton.Life(new Proton.Span(3,5)))\n    clickEmitter.addInitialize(new Proton.Radius(1));\n    clickEmitter.currVelocity = new Proton.Velocity(2, new Proton.Span(0,360), 'polar');\n    clickEmitter.addInitialize(clickEmitter.currVelocity);\n    // if (target.vx && target.vy) {\n    //   clickEmitter.addInitialize(new Proton.Force(target.vx*120, target.vy*120))\n    // }\n    clickEmitter.addBehaviour(new Proton.Color(color1, color2));\n    clickEmitter.pointAttraction = new Proton.Attraction(target, 20, 600);\n    clickEmitter.addBehaviour(clickEmitter.pointAttraction);\n    clickEmitter.p.x = this.props.mouseObj.x;\n    clickEmitter.p.y = this.props.mouseObj.y;\n    this.proton.addEmitter(clickEmitter);\n    return clickEmitter;\n  }\n\n  componentDidUpdate() {\n    const bodies = this.props.world.bodies;\n    if (this.props.tick > this.tick) {\n      // this.ctx.save();\n      // this.updateWorld();\n      if (this.props.tick%10===0) {\n        this.updateWorld();\n        if (this.props.tick%500===0) {\n          this.coreEmitter.emit(this.coreEmitter.e);\n        }\n      }\n      this.proton.update();\n      if (this.psiLevel < this.props.resources.psi && this.psiEmitter) {\n        this.psiLevel++;\n        this.psiEmitter.rate = this.psiLevel < 9 ?\n        new Proton.Rate(new Proton.Span(20+this.psiLevel*5, 25+this.psiLevel*8), this.psiLevel*0.25) :\n        new Proton.Rate(new Proton.Span(150, 180), 4)\n        this.psiEmission();\n      }\n      this.drawStructures();\n      for (let planet of bodies) {\n        if (planet) {\n          if (planet.status&&planet.status.uplink) {\n            this.drawConnect(planet, this.props.ball);\n            }\n          this.drawPlanet(planet);\n        }\n      }\n      this.drawBall();\n      this.drawScore();\n      // this.ctx.restore();\n      this.mouseInput()\n      this.tick = this.props.tick;\n    }\n  }\n\n  mouseInput() {\n    if (this.props.mousedown === true) {\n      //while mouse held down\n      if (this.props.mouseTick % 10 === 0) {\n        for (let a of this.emitterList) {\n          if (a&&a.mouseAttract) {\n            a.mouseAttract.reset(this.props.mouseObj, 25, 600);\n          }\n        }\n      }\n      this.clickEmission();\n    } else {\n      if (this.mouseReleased === true) {\n        //when mouse released\n        for (let a of this.emitterList) {\n          if (a&&a.mouseAttract) {\n            a.mouseAttract.reset(this.props.mouseObj, 5, 200);\n          }\n        }\n      }\n    }\n  }\n\n  clickEmission() {\n    this.clickEmitter.p.x = this.props.mouseObj.x;\n    this.clickEmitter.p.y = this.props.mouseObj.y;\n    this.clickEmitter.pointAttraction.reset(this.props.ball, 20, 600)\n    // let emitDirection = Victor(-this.props.mouseObj.x+this.props.ball.x, -this.props.mouseObj.y+this.props.ball.y).verticalAngleDeg();\n    // console.log(emitDirection)\n    // this.clickEmitter.currVelocity.reset(4, new Proton.Span((emitDirection+180)%360-60, (emitDirection+180)%360+60), 'polar');\n    this.clickEmitter.emit('once');\n  }\n\n  psiEmission() {\n    this.psiEmitter.p.x = this.props.ball.x;\n    this.psiEmitter.p.y = this.props.ball.y;\n    // this.psiEmitter.planetAttraction.reset(this.props.world.bodies[0], 25, 700);\n    let emitDirection = Victor(this.props.ball.x-this.protonCanvas.width/2, this.props.ball.y-this.protonCanvas.height/2).verticalAngleDeg();\n    this.psiEmitter.currVelocity.reset(new Proton.Span(2,3), new Proton.Span((emitDirection+180)%360-15, (emitDirection+180)%360+15), 'polar');\n    this.psiEmitter.emit('once');\n  }\n\n  updateWorld() {\n    this.updateEmitters();\n  }\n\n  updateEmitters(x) {\n    const bodies = this.props.world.bodies;\n    for (let body of bodies) {\n      if (body&&!this.emitterList[body.index]&&body.emitter) {\n        this.emitterList[body.index] = body.emitter;\n        this.proton.addEmitter(this.emitterList[body.index]);\n        this.emitterList[body.index].emit(this.emitterList[body.index].e);\n      }\n    }\n\n    //rewrite this garbage to get triggered by actual events and not check every damn time\n    for (let em of this.emitterList) {\n      if (em&&em.target&&!bodies[em.target]) {\n        this.proton.removeEmitter(em);\n        this.emitterList[em.target] = null;\n      }\n      else if (em&&em.target&&bodies[em.target]) {\n        em.p.x = bodies[em.target].x;\n        em.p.y = bodies[em.target].y;\n        if (bodies[em.target].coll%6===2) {\n          em.emit(em.e);\n        }\n        if (em.planetAttraction) {\n          // em.planetAttraction.reset(bodies[em.target], 15, 500);\n          em.planetAttraction.reset(bodies[em.target], em.planetAttraction.force/100, em.planetAttraction.radius);\n        }\n      }\n    }\n    if (!this.psiEmitter&&this.props.proton.psiEmitter) {\n      this.psiEmitter = this.props.proton.psiEmitter;\n      this.proton.addEmitter(this.psiEmitter);\n    }\n    if (!this.coreEmitter&&this.props.proton.coreEmitter) {\n      this.coreEmitter = this.props.proton.coreEmitter;\n      this.proton.addEmitter(this.coreEmitter);\n    }\n  }\n\n  drawConnect(origin, target) {\n    this.ctx.beginPath();\n    this.ctx.globalAlpha = origin.status.uplink?origin.status.uplink/100:0;\n    this.ctx.strokeStyle = '#4397DC';\n    this.ctx.lineWidth = 1;\n    this.ctx.setLineDash([40, 15]);\n    this.ctx.lineDashOffset = 20\n    this.ctx.moveTo(origin.x, origin.y);\n    this.ctx.lineTo(target.x, target.y);\n    this.ctx.closePath();\n    this.ctx.stroke();\n    this.ctx.shadowBlur = 0;\n    this.ctx.shadowColor = 0;\n    this.ctx.setLineDash([])\n    this.ctx.globalAlpha = 1\n  }\n\n  drawScore() {\n    const score = this.props.currentScore;\n    this.ctx.fillStyle = \"#F5F5F5\";\n    this.ctx.font = \"22px Arial\";\n    this.ctx.fillText(\"x\" + score, 10, 25);\n  }\n\n  drawBall(blur=1.5) {\n    const ball = this.props.ball;\n    const {x, y, vx, vy, size, color, glow} = ball;\n    const thrustLevel = Math.floor(ball.thrustLevel*10)\n    let power = thrustLevel?shadeColor(color,thrustLevel*6,thrustLevel*-10,thrustLevel*-15):color;\n    if (glow) {\n      this.ctx.shadowBlur = thrustLevel?glow*10+(Math.pow(thrustLevel*90,0.3)):glow*8;\n      this.ctx.shadowColor = power;\n    }\n    if (blur) {\n      this.ctx.beginPath();\n      this.ctx.globalAlpha = 0.25;\n      this.ctx.arc(x-(vx*blur), y-(vy*blur), size, 0, Math.PI * 2);\n      this.ctx.fillStyle = power;\n      this.ctx.fill();\n      this.ctx.closePath();\n      this.ctx.globalAlpha = 1;\n    }\n    this.ctx.beginPath();\n    this.ctx.arc(x, y, size, 0, Math.PI * 2);\n    this.ctx.fillStyle = color;\n    this.ctx.fill();\n    this.ctx.closePath();\n    this.ctx.shadowBlur = 0;\n    this.ctx.shadowColor = 0;\n  }\n\n  drawPlanet(p) {\n    //outlines the orbit\n    this.ctx.beginPath();\n    p.orbitX!==p.orbitY ?\n    this.ctx.ellipse(p.xPar, p.yPar, p.orbitX, p.orbitY, p.rot/360*(Math.PI*2), 0, Math.PI * 2, true) :\n    this.ctx.arc(p.xPar, p.yPar, p.orbitX, 0, Math.PI * 2, false);\n    this.ctx.lineWidth = 2;\n    this.ctx.globalAlpha = 0.4;\n    this.ctx.strokeStyle = \"#E0E0E0\";\n    this.ctx.closePath();\n    this.ctx.stroke();\n    //the planet itself\n    this.ctx.beginPath();\n    if (p.glow) {\n      this.ctx.shadowBlur = p.glow*10;\n      this.ctx.shadowColor = shadeColor(p.hue, 20);\n    }\n    this.ctx.globalAlpha = 1;\n    this.ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);\n    this.ctx.fillStyle = p.hue;\n    this.ctx.fill();\n    this.ctx.closePath();\n    if (p.status&&p.status.shield) {\n      // this.ctx.globalAlpha = 0.8;\n      this.ctx.shadowBlur = p.status.shield/50;\n      this.ctx.shadowColor = \"#77AAFF\";\n      this.ctx.globalAlpha = 0.1+p.status.shield/200;\n      let sGrad = this.ctx.createLinearGradient(p.x-p.size, p.y-p.size, p.x+p.size, p.y+p.size)\n      sGrad.addColorStop(0,\"#FFFFFF\")\n      sGrad.addColorStop(p.status.shield/100,p.hue)\n      sGrad.addColorStop(1,p.hue)\n      this.ctx.beginPath();\n\n      this.ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);\n      this.ctx.fillStyle = sGrad;\n      this.ctx.fill();\n      this.ctx.closePath();\n    }\n    this.ctx.shadowBlur = 0;\n    this.ctx.shadowColor = 0;\n  };\n\n  drawStructures() {\n    const structures = this.props.world.structures;\n    const bodies = this.props.world.bodies;\n    for (let layer of structures) {\n      if (layer) {\n        for (let seg of layer.segments) {\n          if (seg.health>0) {\n            this.drawSegment(seg);\n            if (seg.health<3) {\n              for (let body of bodies.slice(1)) {\n                this.drawBeam(seg,body)\n                }\n            }\n          }\n        }\n      }\n    }\n  }\n\n  drawSegment(seg) {\n    this.ctx.beginPath();\n    if (seg.glow) {\n      this.ctx.shadowBlur = seg.glow*1;\n      this.ctx.shadowColor = shadeColor(seg.hue, 20);\n    }\n    this.ctx.globalAlpha = seg.health*0.33;\n    this.ctx.arc(seg.origin.x, seg.origin.y, seg.r, seg.a, seg.b, false);\n    this.ctx.lineWidth = seg.width;\n    this.ctx.strokeStyle = seg.hue;\n    this.ctx.stroke();\n    this.ctx.closePath();\n    this.ctx.globalAlpha = 1;\n    this.ctx.shadowBlur = 0;\n    this.ctx.shadowColor = 0;\n  }\n\n  drawBeam(t, o) {\n    const tick = this.props.tick;\n    this.ctx.lineCap = \"round\";\n\n    this.ctx.globalAlpha = 0.3+0.4/t.health;\n    this.ctx.strokeStyle = '#84CFFA';\n    this.ctx.lineWidth = 5;\n    this.ctx.setLineDash([15, 20]);\n    this.ctx.lineDashOffset = 10+Math.floor((this.props.tick%50)/2)\n    let oc = Victor(o.x,o.y)\n    let tc = Victor(t.r,0)\n    t.dir>0?tc.rotate(t.a+(t.arcLength/2)):tc.rotate(t.b-(t.arcLength/2))\n    this.ctx.beginPath();\n    this.ctx.moveTo(o.x, o.y);\n    this.ctx.lineTo(t.origin.x+tc.x*0.97, t.origin.y+tc.y*0.97);\n    this.ctx.closePath();\n    this.ctx.stroke();\n\n    tc.rotateBy(t.randArc*t.dir*2)\n    this.ctx.moveTo(o.x, o.y);\n    this.ctx.beginPath();\n    this.ctx.lineTo(t.origin.x+tc.x*0.97, t.origin.y+tc.y*0.97);\n    this.ctx.closePath();\n    this.ctx.stroke();\n\n    tc.rotateBy(-t.randArc*t.dir*2)\n    this.ctx.moveTo(o.x, o.y);\n    this.ctx.beginPath();\n    this.ctx.lineTo(t.origin.x+tc.x*0.97, t.origin.y+tc.y*0.97);\n    this.ctx.closePath();\n    this.ctx.stroke();\n    this.ctx.lineCap = \"butt\";\n    this.ctx.shadowBlur = 0;\n    this.ctx.shadowColor = 0;\n    this.ctx.setLineDash([])\n    this.ctx.globalAlpha = 1\n  }\n\n  //to try later\n  // setZones(img) {\n  //   let zones = this.state.zones;\n  //   for (let i of img) {\n  //     let imagedata = Proton.Util.getImageData(this.ctx, i, rect)\n  //     zones.push(new Proton.ImageZone(imagedata, rect.x, rect.y))\n  //     }\n  //   this.setState((prevState) => {\n  //     return {\n  //       zones: zones,\n  //     }\n  //   });\n  // }\n\n  // customToZoneBehaviour(zone1, zone2, zone3) {\n  //   return {\n  //     initialize: function(particle) {\n  //       particle.R = Math.random() * 10;\n  //       particle.Angle = Math.random() * Math.PI * 2;\n  //       particle.speed = Math.random() * (-1.5) + 0.75;\n  //       particle.zones = [zone1.getPosition().clone(), zone2.getPosition().clone(), zone3.getPosition().clone()];\n  //     },\n  //\n  //     applyBehaviour: function(particle) {\n  //       if (mouseTick % 2 != 0) {\n  //         particle.v.clear();\n  //         particle.Angle += particle.speed;\n  //         let index = (mouseTick % 6 + 1) / 2 - 1;\n  //         let x = particle.zones[index].x + particle.R * Math.cos(particle.Angle);\n  //         let y = particle.zones[index].y + particle.R * Math.sin(particle.Angle);\n  //         particle.p.x += (x - particle.p.x) * 0.05;\n  //         particle.p.y += (y - particle.p.y) * 0.05;\n  //       }\n  //     }\n  //   }\n  // }\n\n  render() {\n    return (\n      <PureCanvas width={this.props.screen.width} height={this.props.screen.height} contextRef={this.saveContext} onMouseDown={this.props.onMouseDown} onMouseUp={this.props.onMouseUp} onMouseMove={this.props.onMouseMove} style={this.props.style}/>\n    )\n  }\n}\n\nclass PureCanvas extends React.Component {\n  shouldComponentUpdate() {\n    return false;\n  }\n  render() {\n    return (\n      <canvas id=\"myCanvas\"\n      width={this.props.width}\n      height={this.props.height}\n      ref={node =>\n        node ? this.props.contextRef(node) : null\n      } onMouseDown={this.props.onMouseDown} onMouseUp={this.props.onMouseUp} onMouseMove={this.props.onMouseMove} style={this.props.style}\n      />\n    );\n  }\n}\n\nclass ErrorBoundary extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  static getDerivedStateFromError(error) {\n    // Update state so the next render will show the fallback UI.\n    return { hasError: true };\n  }\n\n  componentDidCatch(error, info) {\n    // You can also log the error to an error reporting service\n    console.log(error, info);\n    this.setState({\n      error: error,\n      info: info\n    });\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return (\n        <div>\n        <h1>Something went wrong.</h1>\n        <details style={{ whiteSpace: 'pre-wrap' }}>\n        {this.state.error && this.state.error.toString()}\n        <br />\n        {this.state.info.componentStack}\n        </details>\n        </div>\n      )\n    }\n    return this.props.children\n  }\n}\n\nclass App extends Component {\n  render() {\n    return (\n      <ErrorBoundary>\n      <div className=\"App\">\n      <header className=\"header\">\n      <h1 className=\"header-name\">\n      Orbit game title\n      </h1>\n      </header>\n      <OrbitGame width=\"700\" height=\"700\"/>\n      </div>\n      </ErrorBoundary>\n    );\n  }\n}\n\nexport default App;\n// <header className=\"App-header\">\n// <img src={logo} className=\"App-logo\" alt=\"logo\" />\n// <p style={{ color: `${shadeColor('#CC44EE', 20, 0, -30)}` }}>\n// Edit <code>src/App.js</code> and save to reload.\n// </p>\n// <a\n// className=\"App-link\"\n// href=\"https://reactjs.org\"\n// target=\"_blank\"\n// rel=\"noopener noreferrer\"\n// >\n// Learn React\n// </a>\n// </header>\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}