{"version":3,"sources":["App.js","serviceWorker.js","index.tsx"],"names":["KEY","objectDistance","b1","arguments","length","undefined","x","y","b2","Math","sqrt","pow","towardsBody","origin","target","shadeColor","color","rShade","gShade","bShade","R","parseInt","substring","G","B","toString","OrbitGame","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","screen","width","height","ratio","window","devicePixelRatio","world","stage","bodies","pendingBodies","data","venusData","parent","index","active","marsData","phobosData","earthData","bDatabase","Venus","Mars","Phobos","Earth","Saturn","saturnData","structures","pendingStructures","rs1","openings","rs2","rs3","sDatabase","S1","S2","S3","S4","rs4","params","gravFalloff","bounceDampening","ball","vx","vy","size","mass","speed","thrustAcc","heading","power","coll","ct","glow","resources","matter","energy","psi","hm","keys","left","right","up","down","space","proton","mousedown","mouseTick","mouseReleased","mouseObj","init","tick","ts","randomHash","currentScore","inGame","animationID","timerID","handlePowerChange","bind","assertThisInitialized","increasePsi","handlePlanetToggle","handleStructureToggle","handlePauseStart","handleKeys","mouseupHandler","mousedownHandler","mousemoveHandler","sol","Body","solData","push","em","toConsumableArray","emitter","createNewEmitter","console","log","setState","prevState","objectSpread","pending","i","p","splice","e","color1","hue","rate1","rate2","velocity","damp","life","createPlanet","id","defineProperty","db","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","body","value","name","indexOf","err","return","ringStructure","addSegments","ps","createStructure","s","_ref","_ref$target","_ref$color","_ref$color2","color2","_ref$mass","_ref$radius","radius","_ref$velocity","_ref$rate","_ref$rate2","_ref$damp","_ref$e","_ref$life","_ref$planetAttraction","planetAttraction","_ref$x","_ref$y","_ref$a","a","_ref$b","b","Proton","Emitter","damping","rate","Rate","Span","addInitialize","Mass","Radius","Life","currVelocity","Velocity","addBehaviour","Color","borderZoneBehaviour","CrossZone","RectZone","centerZone","randomBehaviour","RandomDrift","Attraction","centerBehaviour","Repulsion","mouseAttract","_this2","psiEmitter","_this3","coreEmitter","_","random","type","_this4","newBodies","o","dx","dy","object","targets","gx","gy","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","dist","tx","ty","angle","Victor","horizontalAngle","PI","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","struct","arcLength","segments","bc","ac","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","seg","angleDiff","health","collState","_this5","_this6","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","planet","getsPulled","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_loop","otherBodies","filter","item","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_step7","_iterator7","planetCollision","orbitX","movePlanet","_iterator6","borderCollision","gravBall","_iteratorNormalCompletion8","_didIteratorError8","_iteratorError8","_step8","_iterator8","structureCollision","thrustInput","keyCode","_x","nativeEvent","layerX","_y","layerY","continueGame","stopGame","_this7","requestAnimationFrame","t","update","clearInterval","cancelAnimationFrame","addEventListener","makePsiEmitter","addCoreEmitter","_this8","delta","updatePlanets","updateStructures","planetMotion","_iteratorNormalCompletion9","_didIteratorError9","_iteratorError9","_step9","_iterator9","layer","moveSegments","moveBall","ui","pauseButton","react_default","createElement","App_Button","onClick","style","backgroundColor","text","sparkleButton","concat","chargeButton","className","App_GameCanvas","assign","onMouseDown","onMouseUp","onMouseMove","App_GUIWrap","App_StatsDisplay","App_ButtonBlock","App_PlanetButton","App_StructureButton","Component","GUIWrap","_ref2","children","StatsDisplay","_ref3","ButtonBlock","_ref4","Button","_ref5","PlanetButton","_ref6","StructureButton","_ref7","orbitY","rot","xPar","yPar","pfdist","rotateDeg","pf","per","aph","speedWarp","dir","force","fade","acos","cos","sin","el","abs","numSeg","gap","_ref8","_ref8$numSeg","_ref8$arg","arg","_ref8$gap","_ref8$radius","_ref8$speed","_ref8$origin","_ref8$width","_ref8$hue","_ref8$glow","_ref8$name","r","segment","destroyRandom","destroy","rand","destroySegment","_iteratorNormalCompletion10","_didIteratorError10","_iteratorError10","_step10","_iterator10","GameCanvas","_this9","zones","saveContext","psiLevel","emitterList","canvas","protonCanvas","ctx","getContext","createProton","_this10","clickEmitter","createClickEmitter","renderer","CanvasRenderer","onParticleUpdate","particle","globalAlpha","beginPath","strokeStyle","lineWidth","moveTo","old","lineTo","closePath","stroke","addRenderer","pointAttraction","addEmitter","updateWorld","psiEmission","emit","drawStructures","_iteratorNormalCompletion11","_didIteratorError11","_iteratorError11","_step11","_iterator11","drawConnect","drawPlanet","drawBall","drawScore","mouseInput","_iteratorNormalCompletion12","_didIteratorError12","_iteratorError12","_step12","_iterator12","reset","clickEmission","_iteratorNormalCompletion13","_didIteratorError13","_iteratorError13","_step13","_iterator13","emitDirection","verticalAngleDeg","updateEmitters","_iteratorNormalCompletion14","_didIteratorError14","_iteratorError14","_step14","_iterator14","_iteratorNormalCompletion15","_didIteratorError15","_iteratorError15","_step15","_iterator15","removeEmitter","setLineDash","lineDashOffset","shadowBlur","shadowColor","score","fillStyle","font","fillText","blur","arc","fill","ellipse","_iteratorNormalCompletion16","_didIteratorError16","_iteratorError16","_step16","_iterator16","_iteratorNormalCompletion17","_didIteratorError17","_iteratorError17","_step17","_iterator17","drawSegment","App_PureCanvas","contextRef","React","PureCanvas","_this11","ref","node","background","ErrorBoundary","_this12","hasError","error","info","whiteSpace","componentStack","App","App_ErrorBoundary","App_OrbitGame","Boolean","location","hostname","match","ReactDOM","render","src_App_0","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.77b63df2.chunk.js","sourcesContent":["import React, { Component } from 'react';\n// import TweenMax from \"gsap/TweenMax\";\nimport _ from 'lodash';\nimport Proton from 'proton-js';\nimport Victor from 'victor';\nimport './App.css';\n\n//global constants\nconst fps = 60;\nconst animInterval = 1000/fps;\nconst KEY = {\n  LEFT:  37,\n  RIGHT: 39,\n  UP: 38,\n  DOWN: 40,\n  A: 65,\n  D: 68,\n  W: 87,\n  S: 83,\n  SPACE: 32\n};\n\n//various utility\nfunction objectDistance(b1={x:0,y:0}, b2={x:0,y:0}) {\n  if (b1&&b2) {\n    return Math.sqrt(Math.pow(b1.x-b2.x, 2) + Math.pow(b1.y-b2.y, 2));\n  }\n}\n\nfunction towardsBody(origin, target) {\n  //makes a vector to follow\n  if (origin&&target) {\n    let tx = (origin.x - target.x) / objectDistance(origin, target);\n    let ty = (origin.y - target.y) / objectDistance(origin, target);\n    return { x: tx, y: ty };\n  }\n}\n\nfunction getBearing(originX, originY, targetX, targetY) {\n  return -Math.atan2(targetY-originY, targetX-originX) *360/(Math.PI*2);\n}\n\nfunction shadeColor(color, rShade, gShade=rShade, bShade=rShade) {\n  var R = parseInt(color.substring(1,3),16);\n  var G = parseInt(color.substring(3,5),16);\n  var B = parseInt(color.substring(5,7),16);\n  R = parseInt(R * (100 + rShade) / 100);\n  G = parseInt(G * (100 + gShade) / 100);\n  B = parseInt(B * (100 + bShade) / 100);\n  R = (R<255)?R:255;\n  G = (G<255)?G:255;\n  B = (B<255)?B:255;\n  var RR = ((R.toString(16).length===1)?\"0\"+R.toString(16):R.toString(16));\n  var GG = ((G.toString(16).length===1)?\"0\"+G.toString(16):G.toString(16));\n  var BB = ((B.toString(16).length===1)?\"0\"+B.toString(16):B.toString(16));\n  return \"#\"+RR+GG+BB;\n}\n\nclass OrbitGame extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      screen: {\n        width: this.props.width,\n        height: this.props.height,\n        // dynWidth: window.innerWidth/2,\n        // dynHeight: window.innerHeight/2,\n        ratio: window.devicePixelRatio || 1,\n      },\n      world: {\n        stage: null,\n        bodies: [],\n        pendingBodies: [{data: venusData, parent: 0, index: 2, active: true},{data: marsData, parent: 0, index: 1, active: true},{data: phobosData, parent: 1, index: 3, active: true},{data: earthData, parent: 0, index: 4, active: true}],\n        bDatabase: {\n          Venus: {data: venusData, parent: 0, index: 2, active: true},\n          Mars: {data: marsData, parent: 0, index: 1, active: true},\n          Phobos: {data: phobosData, parent: 1, index: 3, active: true},\n          Earth: {data: earthData, parent: 0, index: 4, active: true},\n          Saturn: {data: saturnData, parent: 0, index: 5, active: false},\n        },\n        structures: [],\n        pendingStructures: [{data: rs1, openings: 2, index: 0, active: true},{data: rs2, openings: 4, index: 1,  active: true},{data: rs3, openings: 0, index: 2, active: true}],\n        sDatabase: {\n          S1: {data: rs1, openings: 2, index: 0, active: true},\n          S2: {data: rs2, openings: 4, index: 1, active: true},\n          S3: {data: rs3, openings: 0, index: 2, active: true},\n          S4: {data: rs4, openings: 8, index: 3, active: false},\n        }\n      },\n      params: {\n        gravFalloff: 0.9,\n        bounceDampening: 0.9,\n      },\n      ball: {\n        x: 190,\n        y: 210,\n        vx: 0.5,\n        vy: 0.5,\n        size: 6,\n        mass: 3,\n        speed: 0,\n        thrustAcc: 0.1,\n        heading: 0,\n        power: 0,\n        coll: false,\n        ct: 0,\n        color: \"#E0EDFF\",\n        glow: 1,\n      },\n      resources: {\n        matter: 0,\n        energy: 1500,\n        psi: 0,\n        hm: 0,\n      },\n      keys: {\n        left  : 0,\n        right : 0,\n        up    : 0,\n        down  : 0,\n        space : 0,\n      },\n      proton: {\n\n      },\n      mousedown: false,\n      mouseTick: 0,\n      mouseReleased: false,\n      mouseObj: {\n        x: 350,\n        y: 350,\n        init: false,\n      },\n      tick: 0,\n      ts: 0,\n      randomHash: 0,\n      currentScore: 0,\n      inGame: true,\n    };\n    this.animationID = null;\n    this.timerID = null;\n    this.handlePowerChange = this.handlePowerChange.bind(this);\n    this.increasePsi = this.increasePsi.bind(this);\n    this.handlePlanetToggle = this.handlePlanetToggle.bind(this);\n    this.handleStructureToggle = this.handleStructureToggle.bind(this);\n    this.handlePauseStart=this.handlePauseStart.bind(this);\n    this.handleKeys=this.handleKeys.bind(this);\n    this.mouseupHandler = this.mouseupHandler.bind(this);\n    this.mousedownHandler = this.mousedownHandler.bind(this);\n    this.mousemoveHandler = this.mousemoveHandler.bind(this);\n\n    const sol = new Body(solData);\n    sol.index = 0;\n    this.state.world.bodies.push(sol);\n  }\n\n  createPlanet(data=null,parent=0,index=this.state.world.bodies.length,em=null) {\n    const bodies = [...this.state.world.bodies];\n    // console.log(data);\n    bodies[index] = new Body(data,bodies[parent]);\n    bodies[index].index = index;\n    bodies[index].emitter = this.createNewEmitter(em);\n    console.log(bodies[index]);\n    this.setState((prevState) => {\n      return {\n        world: {\n          ...prevState.world,\n          bodies: bodies,\n        }\n      }\n    });\n  }\n\n  updatePlanets() {\n    const pending = [...this.state.world.pendingBodies];\n    for (let i=0;i<pending.length;i++) {\n      let p = pending.splice(0,1)[0];\n      if (!p.em) {\n        p.em = { target: p.index, e: 600, color1: shadeColor(p.data.hue,80), rate1: 6, rate2: 1.5, velocity: 1.5, damp: 0.007, life: 7, mass: 5 };\n      }\n      this.createPlanet(p.data,p.parent,p.index,p.em||null);\n    }\n    this.setState((prevState) => {\n      return {\n        world: {\n          ...prevState.world,\n          pendingBodies: pending,\n        }\n      }\n    });\n  }\n\n  handlePlanetToggle(e) {\n    let p = e.target.id\n    // console.log(this.state.world.bDatabase);\n    let target = {...this.state.world.bDatabase[p]};\n    if (!target.active&&this.state.world.bodies[target.parent]) {\n      const pending = [...this.state.world.pendingBodies];\n      pending.push(target);\n      this.setState((prevState) => {\n        return {\n          world: {\n            ...prevState.world,\n            pendingBodies: pending,\n            bDatabase: {\n              ...prevState.world.bDatabase,\n              [p]: {\n                ...prevState.world.bDatabase[p],\n                active: true,\n              }\n            }\n          }\n        }\n      });\n    } else if (target.active) {\n      const bodies = [...this.state.world.bodies];\n      const db = {...this.state.world.bDatabase};\n      //disables any active children\n      for (let body of bodies) {\n        if (body&&body.parent===bodies[target.index]) {\n          console.log(body)\n          let name = body.name;\n          db[name].active = false;\n          bodies[bodies.indexOf(body)] = null;\n        }\n      }\n      bodies[target.index] = null;\n      db[p].active = false;\n      this.setState((prevState) => {\n        return {\n          world: {\n            ...prevState.world,\n            bodies: bodies,\n            bDatabase: db,\n          }\n        }\n      });\n    }\n  }\n\n  createStructure(data=null,openings=0,index=this.state.world.structures.length) {\n    const structures = [...this.state.world.structures];\n    structures[index] = new ringStructure(data);\n    structures[index].addSegments(openings);\n    structures[index].index = index;\n    // console.log(structures[index]);\n    this.setState((prevState) => {\n      return {\n        world: {\n          ...prevState.world,\n          structures: structures,\n        }\n      }\n    });\n  }\n\n  updateStructures() {\n    const ps = [...this.state.world.pendingStructures];\n    for (let i=0;i<ps.length;i++) {\n      let p = ps.splice(0,1)[0];\n      this.createStructure(p.data,p.openings,p.index);\n    }\n    this.setState((prevState) => {\n      return {\n        world: {\n          ...prevState.world,\n          pendingStructures: ps,\n        }\n      }\n    });\n  }\n\n  handleStructureToggle(e) {\n    let s = e.target.id;\n    let target = {...this.state.world.sDatabase[s]};\n    // console.log(this.state.world.sDatabase[s]);\n    if (!target.active) {\n      const pending = [...this.state.world.pendingStructures];\n      pending.push(target);\n      this.setState((prevState) => {\n        return {\n          world: {\n            ...prevState.world,\n            pendingStructures: pending,\n            sDatabase: {\n              ...prevState.world.sDatabase,\n              [s]: {\n                ...prevState.world.sDatabase[s],\n                active: true,\n              }\n            }\n          }\n        }\n      });\n    } else if (target.active) {\n      const structures = [...this.state.world.structures];\n      structures[target.index] = null;\n      this.setState((prevState) => {\n        return {\n          world: {\n            ...prevState.world,\n            structures: structures,\n            sDatabase: {\n              ...prevState.world.sDatabase,\n              [s]: {\n                ...prevState.world.sDatabase[s],\n                active: false,\n              }\n            }\n          }\n        }\n      });\n    }\n  }\n\n  createNewEmitter({target=false, color1=null, color2=null, mass=5, radius=1, velocity=2.5, rate1=20, rate2=0.5, damp=0.005, e='once', life=5, planetAttraction=true, x=350, y=350, a=0, b=360}={}) {\n    var emitter = new Proton.Emitter();\n    emitter.target = target;\n    emitter.damping = damp;\n    emitter.rate = new Proton.Rate(new Proton.Span(rate1, rate1*1.5), rate2);\n    emitter.addInitialize(emitter.rate);\n    emitter.addInitialize(new Proton.Mass(mass));\n    emitter.addInitialize(new Proton.Radius(radius));\n    if (life) { emitter.addInitialize(new Proton.Life(life)) }\n    emitter.currVelocity = new Proton.Velocity(new Proton.Span(velocity, velocity*1.5), new Proton.Span(a, b), 'polar');\n    emitter.addInitialize(emitter.currVelocity);\n    color1 ?\n    emitter.addBehaviour(new Proton.Color(color1, color2||color1)) :\n    emitter.addBehaviour(new Proton.Color('random'));\n    let borderZoneBehaviour = new Proton.CrossZone(new Proton.RectZone(0, 0, this.state.width, this.state.height), 'bound');\n    let centerZone = new Proton.RectZone(this.state.width/2, this.state.height/2, this.state.world.bodies[0].size);\n    let randomBehaviour = new Proton.RandomDrift(5, 5, .05);\n    emitter.addBehaviour(randomBehaviour);\n    emitter.addBehaviour(borderZoneBehaviour);\n    if (planetAttraction) {\n      emitter.planetAttraction = new Proton.Attraction(this.state.world.bodies[0], 10, 500);\n      emitter.addBehaviour(emitter.planetAttraction);\n    }\n    let centerBehaviour = new Proton.Repulsion(centerZone, 30, 40)\n    emitter.addBehaviour(centerBehaviour);\n    if (target) {\n      //proper initialization TBD\n      emitter.mouseAttract = new Proton.Attraction(this.state.mouseObj, 5, 200);\n      emitter.addBehaviour(emitter.mouseAttract);\n      emitter.p.x = this.state.width/2;\n      emitter.p.y = this.state.height/2;\n    };\n    if (!target) {\n      emitter.p.x = x;\n      emitter.p.y = y;\n    };\n    emitter.e = e;\n    console.log(emitter);\n    return emitter;\n  }\n\n  makePsiEmitter() {\n    this.setState((prevState) => {\n      return {\n        proton: {\n          ...prevState.proton,\n          psiEmitter: this.createNewEmitter({ e: 'once', color1: '#6699FF', color2: '#FFDDFF', rate1: 50, rate2: 0.01, velocity: 1, mass: 8, radius: 1, damp: 0.009, life: (1,5) }),\n        }\n      }\n    });\n  }\n\n  addCoreEmitter() {\n    this.setState((prevState) => {\n      return {\n        proton: {\n          ...prevState.proton,\n          coreEmitter: this.createNewEmitter({ e: 2, color1: shadeColor(this.state.world.bodies[0].hue,40,-10,-10), rate1: 6, rate2: 0.6, velocity: 1.8, damp: 0.014, life: 20, mass: 15, radius: 4, planetAttraction: true, a:_.random(-330,-30)+30, b:_.random(30,330)-30 }),\n        }\n      }\n    });\n  }\n\n  planetCollision(origin, body, type) {\n    if (objectDistance(origin, body)*0.95 < body.size + origin.size) {\n      if (type === 1) {\n        this.setState((prevState) => {\n          return {\n            currentScore: prevState.currentScore + 1,\n            ball: {\n              ...prevState.ball,\n              x: prevState.ball.x-(prevState.ball.vx * this.state.params.bounceDampening * 0.5),\n              y: prevState.ball.y-(prevState.ball.vy * this.state.params.bounceDampening * 0.5),\n              vx: -prevState.ball.vx * this.state.params.bounceDampening,\n              vy: -prevState.ball.vy * this.state.params.bounceDampening,\n            }\n          }\n        });\n      }\n      if (type === 2) {\n        this.setState((prevState) => {\n          let newBodies = [...prevState.world.bodies];\n          let b = newBodies[newBodies.indexOf(body)];\n          let o = newBodies[newBodies.indexOf(origin)];\n          if (o.speed) {\n            o.dx += towardsBody(origin, body).x*(o.coll*o.size/8)*(b.mass/o.mass);\n            o.dy += towardsBody(origin, body).y*(o.coll*o.size/8)*(b.mass/o.mass);\n            o.coll += 2;\n          }\n          // if (b.speed) {\n          // TBD\n          // }\n          return {\n            resources: {\n              ...prevState.resources,\n              matter: prevState.resources.matter+1,\n            },\n            bodies: newBodies,\n          }\n        });\n      }\n    }\n  }\n\n  borderCollision(object) {\n    if (object.x+object.vx > this.state.screen.width - object.size || object.x+object.vx < object.size) {\n      this.setState((prevState) => {\n        return {\n          ball: {\n            ...prevState.ball,\n            vx: -prevState.ball.vx * prevState.params.bounceDampening,\n          }\n        }\n      });\n    }\n    if (object.y+object.vy > this.state.screen.width - object.size || object.y+object.vy < object.size) {\n      this.setState((prevState) => {\n        return {\n          ball: {\n            ...prevState.ball,\n            vy: -prevState.ball.vy * prevState.params.bounceDampening,\n          }\n        }\n      });\n    }\n  }\n\n  gravBall(object, targets) {\n    var gx = 0;\n    var gy = 0;\n    for (let body of targets) {\n      if (body) {\n        let dist = objectDistance(object, body);\n        gx += body.mass*towardsBody(object, body).x/Math.pow(dist * this.state.params.gravFalloff, 2);\n        gy += body.mass*towardsBody(object, body).y/Math.pow(dist * this.state.params.gravFalloff, 2);\n      }\n    }\n    this.setState((prevState) => {\n      return {\n        ball: {\n          ...prevState.ball,\n          vx: prevState.ball.vx - gx,\n          vy: prevState.ball.vy - gy,\n        }\n      }\n    })\n  }\n\n  thrustInput() {\n    var tx = 0;\n    var ty = 0;\n    if (this.state.keys.up) {\n      ty -= this.state.ball.thrustAcc;\n    }\n    if (this.state.keys.down) {\n      ty += this.state.ball.thrustAcc;\n    }\n    if (this.state.keys.left) {\n      tx -= this.state.ball.thrustAcc;\n    }\n    if (this.state.keys.right) {\n      tx += this.state.ball.thrustAcc;\n    }\n    if (tx||ty) {\n      this.setState((prevState) => {\n        return {\n          ball: {\n            ...prevState.ball,\n            vx: prevState.ball.vx + tx,\n            vy: prevState.ball.vy + ty,\n          }\n        }\n      })\n    }\n  }\n\n  structureCollision() {\n    let ball = this.state.ball;\n    let angle = (Victor(ball.x-this.props.width/2, ball.y-this.props.height/2).horizontalAngle()+Math.PI*3)%(Math.PI*2)+Math.PI;\n    let coll = false;\n    //todo: fix for counterclockwise speeds\n    for (let struct of this.state.world.structures) {\n      if (struct&&objectDistance(ball,struct.origin) > struct.radius-struct.width/2-ball.size && objectDistance(ball,struct.origin) < struct.radius+struct.width/2+ball.size) {\n        let arcLength = ((struct.segments[0].bc-struct.segments[0].ac)*(struct.speed>0?1:-1)+Math.PI*3)%(Math.PI*2)-Math.PI;\n        for (let seg of struct.segments) {\n          let angleDiff = (angle-(struct.speed>0?seg.ac:seg.bc)+Math.PI*3)%(Math.PI*2)-Math.PI;\n          if (seg.health>0&&((angleDiff>0&&angleDiff<arcLength)||(angleDiff<0&&angleDiff>Math.PI-arcLength))) {\n            // console.log(struct);\n            // console.log(angleDiff);\n            // console.log(arcLength);\n            seg.health--;\n            coll = struct.index;\n            return this.collState(coll);\n          }\n        }\n      }\n    }\n    return this.collState(coll);\n  }\n\n  collState(coll) {\n    this.setState((prevState) => {\n      if (coll!==false&&this.state.ball.coll===false) {\n        return {\n          ball: {\n            ...prevState.ball,\n            vx: -prevState.ball.vx * prevState.params.bounceDampening,\n            vy: -prevState.ball.vy * prevState.params.bounceDampening,\n            coll: coll,\n            ct: 1,\n          }\n        }\n      } else if (coll!==false&&this.state.ball.coll!==false) {\n        return {\n          ball: {\n            ...prevState.ball,\n            vx: prevState.ball.vx*(1+(prevState.ball.ct/10)),\n            vy: prevState.ball.vy*(1+(prevState.ball.ct/10)),\n            ct: prevState.ball.ct+1,\n          }\n        }\n      } else {\n        return {\n          ball: {\n            ...prevState.ball,\n            coll: false,\n            ct: 0,\n          },\n        }\n        //\"NO COLLISION! Fake News!\" - Donald J. Trump\n      }\n    });\n  }\n\n  planetMotion() {\n    const bodies = this.state.world.bodies;\n    //apply a pulling force, costs energy\n    if (this.state.mousedown && this.state.resources.energy > 0 && this.state.mouseTick%1===0) {\n      for (let planet of bodies) {\n        if (planet) {\n          planet.getsPulled(12, this.state.mouseObj, this.state.mouseTick)\n        }\n      }\n      this.setState((prevState) => {\n        return {\n          resources: {\n            ...prevState.resources,\n            energy: prevState.resources.energy-1,\n          }\n        }\n      })\n    };\n    //normal motion\n    for (let planet of bodies) {\n      if (planet) {\n        let otherBodies = bodies.filter(item => item !== planet);\n        for (let body of otherBodies) {\n          if (body) { this.planetCollision(planet, body, 2) }\n        }\n        if (planet.orbitX) {\n          planet.movePlanet();\n        }\n      }\n    };\n  }\n\n  moveBall() {\n    const ball = this.state.ball;\n    const bodies = this.state.world.bodies;\n    this.borderCollision(ball);\n    this.gravBall(ball, bodies);\n    for (let body of bodies) {\n      if (body) { this.planetCollision(ball, body, 1) }\n    }\n    this.structureCollision();\n    this.thrustInput();\n    const speed = objectDistance(ball, {x: ball.vx, y:ball.vy});\n    this.setState((prevState) => {\n      return {\n        ball: {\n          ...prevState.ball,\n          x: prevState.ball.x + prevState.ball.vx,\n          y: prevState.ball.y + prevState.ball.vy,\n          speed: speed,\n        }\n      }\n    })\n  }\n\n  handlePowerChange() {\n    this.setState((prevState) => {\n      return {\n        currentScore: 0,\n        resources: {\n          ...prevState.resources,\n          energy: prevState.resources.energy + prevState.currentScore*10,\n        },\n      }\n    });\n  }\n\n  increasePsi() {\n    this.setState((prevState) => {\n      return {\n        resources: {\n          ...prevState.resources,\n          psi: prevState.resources.psi+1,\n        },\n      }\n    });\n  }\n\n  handleKeys(value, e) {\n    let keys = this.state.keys;\n    if(e.keyCode === KEY.LEFT   || e.keyCode === KEY.A) { keys.left  = value }\n    if(e.keyCode === KEY.DOWN   || e.keyCode === KEY.S) { keys.down  = value }\n    if(e.keyCode === KEY.RIGHT  || e.keyCode === KEY.D) { keys.right = value }\n    if(e.keyCode === KEY.UP     || e.keyCode === KEY.W) { keys.up    = value }\n    if(e.keyCode === KEY.SPACE) keys.space = value;\n    this.setState((prevState) => {\n      return { keys: keys }\n    });\n  }\n\n  mousedownHandler(e) {\n    this.setState((prevState) => {\n      return {\n        mousedown: true,\n      }\n    });\n    this.mousemoveHandler(e);\n  }\n\n  mouseupHandler(e) {\n    this.setState((prevState) => {\n      return { mousedown: false }\n    });\n  }\n\n  mousemoveHandler(e) {\n    // if (this.state.mousedown||!this.state.mouseObj.init) {\n    if (this.state.mousedown) {\n      // console.log(e.nativeEvent.layerX)\n      // console.log(e.nativeEvent.layerY)\n      var _x = e.nativeEvent.layerX;\n      var _y = e.nativeEvent.layerY;\n      this.setState((prevState) => {\n        return {\n          mouseObj: {\n            x: _x,\n            y: _y,\n          },\n        }\n      });\n    }\n  }\n\n  handlePauseStart() {\n    if (this.state.inGame === false) {\n      this.continueGame();\n      console.log(\"continue\");\n    } else {\n      this.stopGame();\n      console.log(\"pause\");\n    }\n  }\n\n  continueGame() {\n    requestAnimationFrame((t) => {this.update(t)});\n    this.setState(() => {\n      return { inGame: true, }\n    });\n  }\n\n  stopGame() {\n    clearInterval(this.timerID);\n    cancelAnimationFrame(this.animationID);\n    this.setState(() => {\n      return { inGame: false, }\n    });\n  }\n\n  componentDidMount() {\n    window.addEventListener('keyup',   this.handleKeys.bind(this, false));\n    window.addEventListener('keydown', this.handleKeys.bind(this, true));\n    // window.addEventListener('resize',  this.handleResize.bind(this, false));\n    this.makePsiEmitter();\n    this.addCoreEmitter();\n    this.continueGame();\n  }\n\n  componentWillUnmount() {\n    cancelAnimationFrame(this.animationID);\n  }\n\n  update(t) {\n    // const bodies = this.state.world.bodies;\n    const structures = this.state.world.structures;\n    //fps\n    let delta = t - this.state.ts;\n    if (delta > animInterval) {\n      this.setState((prevState) => {\n        return {\n          ts: t - (delta % animInterval),\n          tick: prevState.tick + 1,\n          mouseTick: prevState.mousedown ? prevState.mouseTick+1 : 0,\n          mouseReleased: !prevState.mousedown&&prevState.mouseTick>0 ? true : false,\n        }\n      });\n      if (this.state.world.pendingBodies.length>0) {\n        this.updatePlanets();\n      };\n      if (this.state.world.pendingStructures.length>0) {\n        this.updateStructures();\n      };\n      this.planetMotion();\n      for (let layer of structures) {\n        if (layer) {\n          layer.moveSegments();\n        }\n      }\n      this.moveBall();\n    }\n    if (this.state.inGame) {\n      this.animationID = requestAnimationFrame((t) => {this.update(t)});\n    }\n  }\n\n  render() {\n    // const readyCanvas = this.state.world.bodies.length > 0 ?\n    // <GameCanvas onMouseDown={this.mousedownHandler} onMouseUp={this.mouseupHandler} onMouseMove={this.mousemoveHandler} {...this.state} /> :\n    // null;\n    //interface elements\n    const ui = {\n      tick: this.state.tick,\n      ts: this.state.ts,\n      inGame: this.state.inGame,\n      currentScore: this.state.currentScore,\n      ball: this.state.ball,\n      resources: this.state.resources,\n      mousedown: this.mousedown,\n    }\n    const bodies = this.state.world.bDatabase;\n    const structures = this.state.world.sDatabase;\n    const pauseButton = this.state.inGame ?\n    <Button onClick={this.handlePauseStart} style={{ backgroundColor: 'red' }} text=\"Pause\" /> :\n    <Button onClick={this.handlePauseStart} text=\"Continue\" />;\n    const sparkleButton = <Button onClick={this.increasePsi} style={{ backgroundColor: '#4666FF' }} text={`Psi blasts: ${this.state.resources.psi}`} />;\n    const chargeButton = <Button onClick={this.handlePowerChange} style={{ backgroundColor: '#E0115F' }} text={`Energy: ${this.state.resources.energy} (click to charge)`} />;\n\n    return (\n      <div className=\"showcase\">\n      <GameCanvas onMouseDown={this.mousedownHandler} onMouseUp={this.mouseupHandler} onMouseMove={this.mousemoveHandler} {...this.state} />\n      <GUIWrap ui={ui}>\n      <StatsDisplay ui={ui} />\n      <p>WASD to accelerate</p>\n      <ButtonBlock ui={ui}>\n      {pauseButton}{sparkleButton}{chargeButton}\n      </ButtonBlock>\n      <ButtonBlock ui={ui}>\n      <PlanetButton onClick={this.handlePlanetToggle} body={bodies.Earth}/>\n      <PlanetButton onClick={this.handlePlanetToggle} body={bodies.Venus}/>\n      <PlanetButton onClick={this.handlePlanetToggle} body={bodies.Saturn}/>\n      <PlanetButton onClick={this.handlePlanetToggle} body={bodies.Mars}/>\n      <PlanetButton onClick={this.handlePlanetToggle} body={bodies.Phobos}/>\n      </ButtonBlock>\n      <ButtonBlock ui={ui}>\n      <StructureButton onClick={this.handleStructureToggle} struct={structures.S1} />\n      <StructureButton onClick={this.handleStructureToggle} struct={structures.S2} />\n      <StructureButton onClick={this.handleStructureToggle} struct={structures.S3} />\n      <StructureButton onClick={this.handleStructureToggle} struct={structures.S4} />\n      </ButtonBlock>\n      </GUIWrap>\n      </div>\n    );\n  }\n};\n\n//interface\nconst GUIWrap = ({ ui, children }) => (\n  <div className=\"game-interface\">\n  {children}\n  </div>\n);\nconst StatsDisplay = ({ ui }) => (\n  <div className=\"interface-element\">\n  <p>{`Energy: ${ui.resources.energy} || Matter: ${ui.resources.matter} || Psi: ${ui.resources.psi} || Score: ${ui.currentScore}`}</p>\n  </div>\n);\nconst ButtonBlock = ({ ui, children }) => (\n  <div className=\"interface-element\">\n  {children}\n  </div>\n);\nconst Button = ({ onClick, text, style, id }) => (\n  <button onClick={onClick} type=\"button\" style={style} id={id}>\n  {text}\n  </button>\n);\nconst PlanetButton = ({onClick, body}) => (\n  <button onClick={onClick} style={{backgroundColor: `${shadeColor(body.data.hue,-20)}`}} id={body.data.name}>Toggle planet: {body.data.name}</button>\n)\nconst StructureButton = ({onClick, struct}) => (\n  <button onClick={onClick} style={{backgroundColor: `${shadeColor(struct.data.hue,-40)}`}} id={struct.data.name}>Toggle structure: {struct.data.name}</button>\n)\n\n//planet data\nconst marsData = {\n  size: 9,\n  orbitX: 200,\n  orbitY: 160,\n  rot: 200,\n  speed: -1.5,\n  mass: 100,\n  hue: \"#ff4336\",\n  glow: 0.8,\n  angle: 0,\n  name: \"Mars\",\n}\n\nconst phobosData = {\n  size: 6,\n  orbitX: 35,\n  orbitY: 32,\n  rot: 100,\n  speed: 1.5,\n  mass: 50,\n  hue: \"#EE1111\",\n  glow: 0.6,\n  angle: 40,\n  name: \"Phobos\",\n}\n\nconst venusData = {\n  size: 12,\n  orbitX: 105,\n  orbitY: 90,\n  rot: 205,\n  speed: 1,\n  mass: 165,\n  hue: \"#00A86B\",\n  glow: 0.8,\n  angle: 10,\n  name: \"Venus\",\n}\n\nconst earthData = {\n  size: 11,\n  orbitX: 155,\n  orbitY: 140,\n  rot: 20,\n  speed: 1,\n  mass: 150,\n  hue: \"#007FFF\",\n  glow: 1.2,\n  angle: 20,\n  name: \"Earth\",\n}\n\nconst solData = {\n  size: 19,\n  orbitX: 0,\n  speed: 0,\n  mass: 220,\n  hue: \"#FFCC33\",\n  glow: 2.5,\n  angle: 0,\n  name: \"Sol\",\n}\n\nconst saturnData = {\n  size: 14,\n  orbitX: 310,\n  speed: 0.5,\n  mass: 190,\n  hue: \"#d9b47d\",\n  glow: 1,\n  angle: 210,\n  name: \"Saturn\",\n}\n\nclass Body {\n  constructor(data, parent=null) {\n    this.data = data;\n    this.parent = parent;\n    this.xPar = this.parent ? this.parent.x : data.xPar||350;\n    this.yPar = this.parent ? this.parent.y : data.yPar||350;\n    this.size = data.size||15;\n    this.orbitX = data.orbitX||0;\n    this.orbitY = data.orbitY||this.orbitX;\n    this.rot = data.rot||0;\n    if (this.orbitX!==this.orbitY) {\n      this.e = Math.sqrt(1 - (Math.pow(this.orbitY, 2)/Math.pow(this.orbitX, 2)));\n      this.pfdist = new Victor(this.orbitX*this.e, 0)\n      this.pfdist.rotateDeg(this.rot);\n      this.pf = {\n        x: this.xPar + this.pfdist.x,\n        y: this.yPar + this.pfdist.y,\n      }\n      this.per = this.orbitX-this.orbitX*this.e;\n      this.aph = this.orbitX+this.orbitX*this.e;\n    }\n    this.speed = data.speed||0;\n    this.speedWarp = 0;\n    this.mass = data.mass||0;\n    this.hue = data.hue||\"#FFFF00\";\n    this.glow = data.glow||0;\n    this.name = data.name||\"Unknown\";\n    this.angle = data.angle||0;\n    this.dir = this.speed>0?1:-1;\n    this.x = this.xPar + this.orbitX;\n    this.y = this.yPar + this.orbitY;\n    this.dx = 0;\n    this.dy = 0;\n    this.coll = 0;\n    console.log(\"creating body: \"+this.name);\n  }\n\n  getsPulled(force, target, tick=0) {\n    let dist = objectDistance(this, target);\n    let fade = 1+(tick*0.05)\n    this.speedWarp = (force*200/this.mass)/(Math.pow(dist * 0.5, 1.1)*fade);\n    if (dist > this.size*2*fade)  {\n      this.dx -= force*towardsBody(this, target).x/(Math.pow(dist * 0.04, 1.1)*fade);\n      this.dy -= force*towardsBody(this, target).y/(Math.pow(dist * 0.04, 1.1)*fade);\n    }\n  }\n\n  movePlanet() {\n    this.angle += this.orbitX===this.orbitY ?\n    (Math.acos(1 - Math.pow((this.speed/(1+this.speedWarp))/this.orbitX, 2)/2)%Math.PI*2)*this.dir :\n    (Math.acos(1 - Math.pow((this.speed*(1+this.e*Math.cos(this.angle))/(1+this.speedWarp))/this.orbitX, 2)/2)%Math.PI*2)*this.dir;\n\n    if (this.parent) {\n      this.xPar = this.parent.x;\n      this.yPar = this.parent.y;\n      if (this.orbitX!==this.orbitY) {\n        this.xPar -= this.pfdist.x;\n        this.yPar -= this.pfdist.y;\n      }\n    }\n    if (this.orbitX===this.orbitY) {\n      this.x = this.xPar + this.orbitX * Math.cos(this.angle) + this.dx;\n      this.y = this.yPar + this.orbitY * Math.sin(this.angle) + this.dy;\n    }\n    else {\n      let el = new Victor(this.orbitX * Math.cos(this.angle), this.orbitY * Math.sin(this.angle))\n      el.rotateDeg(this.rot)\n      this.x = this.xPar + el.x + this.dx;\n      this.y = this.yPar + el.y + this.dy;\n    }\n    if (this.dx) {\n      this.dx = Math.abs(this.dx)>1 ? this.dx*0.99 : 0;\n    }\n    if (this.dy) {\n      this.dy = Math.abs(this.dy)>1 ? this.dy*0.99 : 0;\n    }\n    if (this.speedWarp) {\n      this.speedWarp = this.speedWarp>0.1 ? this.speedWarp*0.8 : 0;\n    }\n    if (this.coll) {\n      this.coll--;\n    }\n  };\n}\n\n//structure data\nconst rs1 = { numSeg: 6, gap: 0.25, radius: 190, speed: 0.4, origin: {x: 350, y: 350}, width: 16, hue: \"#DF70FF\", name: \"S1\"};\nconst rs2 = { numSeg: 12, gap: 0.4, radius: 320, speed: 0.7, origin: {x: 350, y: 350}, width: 12, hue: \"#FFD5D0\", name: \"S2\"};\nconst rs3 = { numSeg: 2, gap: 0.2, radius: 50, speed: 0.5, origin: {x: 350, y: 350}, width: 10, hue: \"#86CFEF\", name: \"S3\"};\nconst rs4 = { numSeg: 18, gap: 0.1, radius: 250, speed: 0.4, origin: {x: 350, y: 350}, width: 12, hue: \"#FF6655\", name: \"S4\"};\n\nclass ringStructure {\n  constructor({numSeg=5, arg=0, gap=0.4, radius=240, speed=5, origin={x: 350, y: 350}, width=10, hue=\"#E0E0E0\", glow=1,name=\"(Unknown)\"}={}) {\n    this.numSeg = numSeg;\n    this.arg = arg;\n    this.gap = gap;\n    this.radius = radius;\n    this.speed = speed;\n    this.origin = origin;\n    this.width = width;\n    this.hue = hue;\n    this.glow = glow;\n    this.segments = [];\n    this.name = name;\n  }\n\n  addSegments(openings=0) {\n    let arg = this.arg;\n    let gap = this.gap;\n    let numSeg = this.numSeg;\n    let r = this.radius;\n    let origin = this.origin;\n    let width = this.width;\n    let hue = this.hue;\n    let glow = this.glow;\n    for (let i=0;i<numSeg;i++) {\n      let segment = {\n        a: arg,\n        b: arg + (Math.PI*2*(1-gap))/numSeg,\n        r: r,\n        ac: arg%(Math.PI*2),\n        bc: (arg + (Math.PI*2*(1-gap))/numSeg)%(Math.PI*2),\n        origin: origin,\n        width: width,\n        hue: hue,\n        glow: glow,\n        health: 3,\n      };\n      this.segments.push(segment);\n      arg += (Math.PI*2)/numSeg;\n    }\n    // console.log(this.segments);\n    for (let i=0;i<openings;i++) {\n      this.destroyRandom();\n    }\n  }\n\n  destroySegment(seg) {\n    const destroy = this.segments.filter(item => item !== seg);\n    this.segments = destroy;\n  }\n\n  destroyRandom() {\n    let rand = this.segments[_.random(this.segments.length)-1]\n    this.destroySegment(rand);\n  }\n\n  moveSegments() {\n    for (let seg of this.segments) {\n      seg.a += Math.PI*2*0.001*this.speed;\n      seg.ac = (Math.abs(seg.a)+Math.PI*2)%(Math.PI*2);\n      seg.b += Math.PI*2*0.001*this.speed;\n      seg.bc = (Math.abs(seg.b)+Math.PI*2)%(Math.PI*2);\n      if (seg.health<3 && seg.ac%(Math.PI*2*0.1)<0.01) {\n        seg.health++;\n      }\n    }\n  }\n}\n\n//the canvas render is split into a dynamic wrapper and a nested non-updating actual canvas, idea by Phil Nash https://philna.sh/, elements from Reacteroids\nclass GameCanvas extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      zones: [],\n    }\n    this.saveContext = this.saveContext.bind(this);\n    //proton\n    this.tick = 1;\n    this.psiLevel = 0;\n    this.emitterList = [];\n  }\n\n  saveContext(canvas) {\n    this.protonCanvas = canvas;;\n    this.ctx = canvas.getContext('2d');\n    this.width = this.ctx.canvas.width;\n    this.height = this.ctx.canvas.height;\n  }\n\n  componentDidMount() {\n    this.createProton();\n    console.log(this.props);\n  }\n\n  createProton() {\n    this.proton = new Proton();\n    // const imageWidth = 342;\n    // const drawScopeWidth = 710;\n    // const rect = new Proton.Rectangle((this.protonCanvas.width - imageWidth) / 2, (this.protonCanvas.height - imageWidth) / 2, imageWidth, imageWidth);\n    // const rect2 = new Proton.Rectangle((this.protonCanvas.width - drawScopeWidth) / 2, 0, drawScopeWidth, this.protonCanvas.height);\n    // const rectZone = new Proton.RectZone(rect2.x, rect2.y, rect2.width, rect2.height);\n    // const zones = this.state.zones;\n    // this.emitterList[0].addBehaviour(this.customToZoneBehaviour(zones[0], zones[1], zones[2]));\n    this.borderZoneBehaviour = new Proton.CrossZone(new Proton.RectZone(0, 0, this.protonCanvas.width, this.protonCanvas.height), 'bound');\n    this.centerZone = new Proton.RectZone(this.width/2, this.height/2, this.props.world.bodies[0].size);\n    this.centerBehaviour = new Proton.Repulsion(this.centerZone, 10, 30)\n    this.randomBehaviour = new Proton.RandomDrift(5, 5, .05);\n    this.clickEmitter = this.createClickEmitter('#FFE4EF', '#FD1212', this.props.ball);\n    this.renderer = new Proton.CanvasRenderer(this.protonCanvas);\n    // this.renderer.onProtonUpdate = function() {\n    // TBD\n    // };\n    this.renderer.onParticleUpdate = (particle) => {\n      this.ctx.globalAlpha = 0.9;\n      // if (particle.radius>1) {\n      //   this.renderer.drawCircle(particle);\n      // }\n      this.ctx.beginPath();\n      this.ctx.strokeStyle = particle.color;\n      this.ctx.lineWidth = particle.energy*2+particle.radius/4;\n      this.ctx.moveTo(particle.old.p.x-particle.old.a.x*20, particle.old.p.y-particle.old.a.y*20);\n      this.ctx.lineTo(particle.p.x, particle.p.y);\n      this.ctx.closePath();\n      this.ctx.stroke();\n      this.ctx.globalAlpha = 1\n    };\n    this.proton.addRenderer(this.renderer);\n  }\n\n  createClickEmitter(color1, color2, target=null) {\n    var clickEmitter = new Proton.Emitter();\n    // let emitDirection  = Victor(target.x-this.protonCanvas.width/2, target.y-this.protonCanvas.height/2).verticalAngleDeg();\n    clickEmitter.target = target;\n    clickEmitter.damping = 0.012;\n    clickEmitter.addInitialize(new Proton.Rate(40,0.05));\n    clickEmitter.addInitialize(new Proton.Mass(10));\n    clickEmitter.addInitialize(new Proton.Life(new Proton.Span(3,5)))\n    clickEmitter.addInitialize(new Proton.Radius(2));\n    clickEmitter.currVelocity = new Proton.Velocity(2, new Proton.Span(0,360), 'polar');\n    clickEmitter.addInitialize(clickEmitter.currVelocity);\n    // if (target.vx && target.vy) {\n    //   clickEmitter.addInitialize(new Proton.Force(target.vx*120, target.vy*120))\n    // }\n    clickEmitter.addBehaviour(new Proton.Color(color1, color2));\n    clickEmitter.addBehaviour(this.randomBehaviour);\n    clickEmitter.addBehaviour(this.borderZoneBehaviour);\n    clickEmitter.addBehaviour(this.centerBehaviour);\n    clickEmitter.pointAttraction = new Proton.Attraction(target, 20, 600);\n    clickEmitter.addBehaviour(clickEmitter.pointAttraction);\n    clickEmitter.p.x = this.props.mouseObj.x;\n    clickEmitter.p.y = this.props.mouseObj.y;\n    this.proton.addEmitter(clickEmitter);\n    return clickEmitter;\n  }\n\n  componentDidUpdate() {\n    const bodies = this.props.world.bodies;\n    if (this.props.tick > this.tick) {\n      // this.ctx.save();\n      this.updateWorld();\n      this.proton.update();\n      if (this.psiLevel < this.props.resources.psi && this.psiEmitter) {\n        this.psiLevel++;\n        this.psiEmitter.rate = this.psiLevel < 9 ?\n        new Proton.Rate(new Proton.Span(20+this.psiLevel*5, 25+this.psiLevel*8), this.psiLevel*0.25) :\n        new Proton.Rate(new Proton.Span(150, 180), 4)\n        this.psiEmission();\n      }\n      if (this.props.tick%500===0) {\n        this.coreEmitter.emit(this.coreEmitter.e);\n      }\n      this.drawStructures();\n      for (let planet of bodies) {\n        if (planet) {\n          this.drawConnect(planet, this.props.ball);\n          this.drawPlanet(planet);\n        }\n      }\n      this.drawBall();\n      this.drawScore();\n      // this.ctx.restore();\n      this.mouseInput()\n      this.tick = this.props.tick;\n    }\n  }\n\n  mouseInput() {\n    if (this.props.mousedown === true) {\n      //while mouse held down\n      if (this.props.mouseTick % 10 === 0) {\n        for (let a of this.emitterList) {\n          if (a&&a.mouseAttract) {\n            a.mouseAttract.reset(this.props.mouseObj, 25, 600);\n          }\n        }\n      }\n      this.clickEmission();\n    } else {\n      if (this.mouseReleased === true) {\n        //when mouse released\n        for (let a of this.emitterList) {\n          if (a&&a.mouseAttract) {\n            a.mouseAttract.reset(this.props.mouseObj, 5, 200);\n          }\n        }\n      }\n    }\n  }\n\n  clickEmission() {\n    this.clickEmitter.p.x = this.props.mouseObj.x;\n    this.clickEmitter.p.y = this.props.mouseObj.y;\n    this.clickEmitter.pointAttraction.reset(this.props.ball, 20, 600)\n    // let emitDirection = Victor(-this.props.mouseObj.x+this.props.ball.x, -this.props.mouseObj.y+this.props.ball.y).verticalAngleDeg();\n    // console.log(emitDirection)\n    // this.clickEmitter.currVelocity.reset(4, new Proton.Span((emitDirection+180)%360-60, (emitDirection+180)%360+60), 'polar');\n    this.clickEmitter.emit('once');\n  }\n\n  psiEmission() {\n    this.psiEmitter.p.x = this.props.ball.x;\n    this.psiEmitter.p.y = this.props.ball.y;\n    this.psiEmitter.planetAttraction.reset(this.props.world.bodies[0], 25, 700);\n    let emitDirection = Victor(this.props.ball.x-this.protonCanvas.width/2, this.props.ball.y-this.protonCanvas.height/2).verticalAngleDeg();\n    this.psiEmitter.currVelocity.reset(new Proton.Span(2,3), new Proton.Span((emitDirection+180)%360-15, (emitDirection+180)%360+15), 'polar');\n    this.psiEmitter.emit('once');\n    // console.log(this.psiEmitter)\n  }\n\n  updateWorld() {\n    this.updateEmitters();\n  }\n\n  updateEmitters(x) {\n    const bodies = this.props.world.bodies;\n    for (let body of bodies) {\n      if (body&&!this.emitterList[body.index]&&body.emitter) {\n        this.emitterList[body.index] = body.emitter;\n        this.proton.addEmitter(this.emitterList[body.index]);\n        this.emitterList[body.index].emit(this.emitterList[body.index].e);\n        // console.log(this.emitterList)\n      }\n    }\n    for (let em of this.emitterList) {\n      if (em&&em.target&&!bodies[em.target]) {\n        // console.log(em)\n        this.proton.removeEmitter(em);\n        this.emitterList[em.target] = null;\n      }\n      if (em&&em.target&&bodies[em.target]) {\n        em.p.x = bodies[em.target].x;\n        em.p.y = bodies[em.target].y;\n        if (bodies[em.target].coll%6===2) {\n          em.emit(em.e);\n        }\n        if (em.planetAttraction) {\n          em.planetAttraction.reset(bodies[em.target], 15, 500);\n        }\n      }\n    }\n    if (!this.psiEmitter&&this.props.proton.psiEmitter) {\n      this.psiEmitter = this.props.proton.psiEmitter;\n      this.proton.addEmitter(this.psiEmitter);\n      // console.log(this.psiEmitter);\n    }\n    if (!this.coreEmitter&&this.props.proton.coreEmitter) {\n      this.coreEmitter = this.props.proton.coreEmitter;\n      this.proton.addEmitter(this.coreEmitter);\n      // console.log(this.coreEmitter);\n    }\n  }\n\n  drawConnect(origin, target) {\n    this.ctx.beginPath();\n    this.ctx.globalAlpha = 0.5\n    this.ctx.strokeStyle = '#4397DC';\n    this.ctx.lineWidth = 1;\n    this.ctx.setLineDash([40, 15]);\n    this.ctx.lineDashOffset = 20\n    this.ctx.moveTo(origin.x, origin.y);\n    this.ctx.lineTo(target.x, target.y);\n    this.ctx.closePath();\n    this.ctx.stroke();\n    this.ctx.shadowBlur = 0;\n    this.ctx.shadowColor = 0;\n    this.ctx.setLineDash([])\n    this.ctx.globalAlpha = 1\n  }\n\n  drawScore() {\n    const score = this.props.currentScore;\n    this.ctx.fillStyle = \"#F5F5F5\";\n    this.ctx.font = \"22px Arial\";\n    this.ctx.fillText(\"x\" + score, 10, 25);\n  }\n\n  drawBall(blur=1.5) {\n    const ball = this.props.ball;\n    const {x, y, vx, vy, size, color, glow} = ball;\n    if (glow) {\n      this.ctx.shadowBlur = glow*15;\n      this.ctx.shadowColor = shadeColor(color, 10);\n    }\n    if (blur) {\n      this.ctx.beginPath();\n      this.ctx.globalAlpha = 0.3;\n      this.ctx.arc(x-(vx*blur), y-(vy*blur), size, 0, Math.PI * 2);\n      this.ctx.fillStyle = color;\n      this.ctx.fill();\n      this.ctx.closePath();\n      this.ctx.globalAlpha = 1;\n    }\n    this.ctx.beginPath();\n    this.ctx.arc(x, y, size, 0, Math.PI * 2);\n    this.ctx.fillStyle = color;\n    this.ctx.fill();\n    this.ctx.closePath();\n    this.ctx.shadowBlur = 0;\n    this.ctx.shadowColor = 0;\n  }\n\n  drawPlanet(p) {\n    //outlines the orbit\n    this.ctx.beginPath();\n    p.orbitX!==p.orbitY ?\n    this.ctx.ellipse(p.xPar, p.yPar, p.orbitX, p.orbitY, p.rot/360*(Math.PI*2), 0, Math.PI * 2, true) :\n    this.ctx.arc(p.xPar, p.yPar, p.orbitX, 0, Math.PI * 2, false);\n    this.ctx.lineWidth = 2;\n    this.ctx.globalAlpha = 0.4;\n    this.ctx.strokeStyle = \"#E0E0E0\";\n    this.ctx.closePath();\n    this.ctx.stroke();\n    this.ctx.globalAlpha = 1;\n    //the planet itself\n    this.ctx.beginPath();\n    if (p.glow) {\n      this.ctx.shadowBlur = p.glow*10;\n      this.ctx.shadowColor = shadeColor(p.hue, 20);\n    }\n    this.ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);\n    this.ctx.fillStyle = p.hue;\n    this.ctx.fill();\n    this.ctx.closePath();\n    this.ctx.shadowBlur = 0;\n    this.ctx.shadowColor = 0;\n  };\n\n  drawStructures() {\n    const structures = this.props.world.structures;\n    for (let layer of structures) {\n      if (layer) {\n        for (let seg of layer.segments) {\n          this.drawSegment(seg);\n        }\n      }\n    }\n  }\n\n  drawSegment(seg) {\n    this.ctx.beginPath();\n    if (seg.glow) {\n      this.ctx.shadowBlur = seg.glow*10;\n      this.ctx.shadowColor = shadeColor(seg.hue, 10);\n    }\n    this.ctx.globalAlpha = seg.health*0.33;\n    this.ctx.arc(seg.origin.x, seg.origin.y, seg.r, seg.a, seg.b, false);\n    this.ctx.lineWidth = seg.width;\n    this.ctx.strokeStyle = seg.hue;\n    this.ctx.stroke();\n    this.ctx.closePath();\n    this.ctx.globalAlpha = 1;\n    this.ctx.shadowBlur = 0;\n    this.ctx.shadowColor = 0;\n  }\n\n  //to try later\n  // setZones(img) {\n  //   let zones = this.state.zones;\n  //   for (let i of img) {\n  //     let imagedata = Proton.Util.getImageData(this.ctx, i, rect)\n  //     zones.push(new Proton.ImageZone(imagedata, rect.x, rect.y))\n  //     }\n  //   this.setState((prevState) => {\n  //     return {\n  //       zones: zones,\n  //     }\n  //   });\n  // }\n\n  // customToZoneBehaviour(zone1, zone2, zone3) {\n  //   return {\n  //     initialize: function(particle) {\n  //       particle.R = Math.random() * 10;\n  //       particle.Angle = Math.random() * Math.PI * 2;\n  //       particle.speed = Math.random() * (-1.5) + 0.75;\n  //       particle.zones = [zone1.getPosition().clone(), zone2.getPosition().clone(), zone3.getPosition().clone()];\n  //     },\n  //\n  //     applyBehaviour: function(particle) {\n  //       if (mouseTick % 2 != 0) {\n  //         particle.v.clear();\n  //         particle.Angle += particle.speed;\n  //         let index = (mouseTick % 6 + 1) / 2 - 1;\n  //         let x = particle.zones[index].x + particle.R * Math.cos(particle.Angle);\n  //         let y = particle.zones[index].y + particle.R * Math.sin(particle.Angle);\n  //         particle.p.x += (x - particle.p.x) * 0.05;\n  //         particle.p.y += (y - particle.p.y) * 0.05;\n  //       }\n  //     }\n  //   }\n  // }\n\n  render() {\n    return (\n      <PureCanvas width={this.props.screen.width} height={this.props.screen.height} contextRef={this.saveContext} onMouseDown={this.props.onMouseDown} onMouseUp={this.props.onMouseUp} onMouseMove={this.props.onMouseMove}/>\n    )\n  }\n}\n\nclass PureCanvas extends React.Component {\n  shouldComponentUpdate() {\n    return false;\n  }\n  render() {\n    return (\n      <canvas id=\"myCanvas\"\n      width={this.props.width}\n      height={this.props.height}\n      ref={node =>\n        node ? this.props.contextRef(node) : null\n      } onMouseDown={this.props.onMouseDown} onMouseUp={this.props.onMouseUp} onMouseMove={this.props.onMouseMove} style={{ background: \"#36454F\" }}\n      />\n    );\n  }\n}\n\nclass ErrorBoundary extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  static getDerivedStateFromError(error) {\n    // Update state so the next render will show the fallback UI.\n    return { hasError: true };\n  }\n\n  componentDidCatch(error, info) {\n    // You can also log the error to an error reporting service\n    console.log(error, info);\n    this.setState({\n      error: error,\n      info: info\n    });\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return (\n        <div>\n        <h1>Something went wrong.</h1>\n        <details style={{ whiteSpace: 'pre-wrap' }}>\n        {this.state.error && this.state.error.toString()}\n        <br />\n        {this.state.info.componentStack}\n        </details>\n        </div>\n      )\n    }\n    return this.props.children\n  }\n}\n\nclass App extends Component {\n  render() {\n    return (\n      <ErrorBoundary>\n      <div className=\"App\">\n      <header className=\"header\">\n        <h1 className=\"header-name\">\n          Orbit game title\n        </h1>\n      </header>\n      <OrbitGame width=\"700\" height=\"700\"/>\n      </div>\n      </ErrorBoundary>\n    );\n  }\n}\n\nexport default App;\n// <header className=\"App-header\">\n// <img src={logo} className=\"App-logo\" alt=\"logo\" />\n// <p style={{ color: `${shadeColor('#CC44EE', 20, 0, -30)}` }}>\n// Edit <code>src/App.js</code> and save to reload.\n// </p>\n// <a\n// className=\"App-link\"\n// href=\"https://reactjs.org\"\n// target=\"_blank\"\n// rel=\"noopener noreferrer\"\n// >\n// Learn React\n// </a>\n// </header>\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}