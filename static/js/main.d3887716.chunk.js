(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(t,e,a){t.exports=a(24)},21:function(t,e,a){},23:function(t,e,a){},24:function(t,e,a){"use strict";a.r(e);var i=a(0),s=a.n(i),r=a(15),n=a.n(r),o=(a(21),a(7)),l=a(2),h=a(4),c=a(5),u=a(6),d=a(9),p=a(8),v=a(10),m=a(3),b=a(12),y=a.n(b),g=a(1),f=a.n(g),w=a(11),x=a.n(w),S=(a(23),37),k=39,E=38,O=40,P=65,j=68,C=87,M=83,D=32;function I(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0};if(t&&e)return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function F(t,e){if(t&&e)return{x:(t.x-e.x)/I(t,e),y:(t.y-e.y)/I(t,e)}}function A(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,s=parseInt(t.substring(1,3),16),r=parseInt(t.substring(3,5),16),n=parseInt(t.substring(5,7),16);return s=parseInt(s*(100+e)/100),r=(r=parseInt(r*(100+a)/100))<255?r:255,n=(n=parseInt(n*(100+i)/100))<255?n:255,"#"+(1===(s=s<255?s:255).toString(16).length?"0"+s.toString(16):s.toString(16))+(1===r.toString(16).length?"0"+r.toString(16):r.toString(16))+(1===n.toString(16).length?"0"+n.toString(16):n.toString(16))}var B=function(t){function e(t){var a;Object(c.a)(this,e),(a=Object(d.a)(this,Object(p.a)(e).call(this,t))).state={screen:{width:a.props.width,height:a.props.height,ratio:window.devicePixelRatio||1},world:{stage:null,bodies:[],pendingBodies:[{data:G,parent:0,index:2,active:!0},{data:Y,parent:0,index:1,active:!0},{data:H,parent:1,index:3,active:!0},{data:N,parent:0,index:4,active:!0}],bDatabase:{Venus:{data:G,parent:0,index:2,active:!0},Mars:{data:Y,parent:0,index:1,active:!0},Phobos:{data:H,parent:1,index:3,active:!0},Earth:{data:N,parent:0,index:4,active:!0},Saturn:{data:V,parent:0,index:5,active:!1}},structures:[],pendingStructures:[{data:K,openings:2,index:0,active:!0},{data:q,openings:4,index:1,active:!0},{data:J,openings:0,index:2,active:!0}],sDatabase:{S1:{data:K,openings:2,index:0,active:!0},S2:{data:q,openings:4,index:1,active:!0},S3:{data:J,openings:0,index:2,active:!0},S4:{data:$,openings:8,index:3,active:!1}}},params:{gravFalloff:.9,bounceDampening:.9},ball:{x:190,y:210,vx:.5,vy:.5,size:6,mass:3,speed:0,thrustAcc:.1,heading:0,power:0,coll:!1,ct:0,color:"#E0EDFF",glow:1},resources:{matter:0,energy:1500,psi:0,hm:0},keys:{left:0,right:0,up:0,down:0,space:0},proton:{},mousedown:!1,mouseTick:0,mouseReleased:!1,mouseObj:{x:350,y:350,init:!1},tick:0,ts:0,randomHash:0,currentScore:0,inGame:!0},a.animationID=null,a.timerID=null,a.handlePowerChange=a.handlePowerChange.bind(Object(m.a)(Object(m.a)(a))),a.increasePsi=a.increasePsi.bind(Object(m.a)(Object(m.a)(a))),a.handlePlanetToggle=a.handlePlanetToggle.bind(Object(m.a)(Object(m.a)(a))),a.handleStructureToggle=a.handleStructureToggle.bind(Object(m.a)(Object(m.a)(a))),a.handlePauseStart=a.handlePauseStart.bind(Object(m.a)(Object(m.a)(a))),a.handleKeys=a.handleKeys.bind(Object(m.a)(Object(m.a)(a))),a.mouseupHandler=a.mouseupHandler.bind(Object(m.a)(Object(m.a)(a))),a.mousedownHandler=a.mousedownHandler.bind(Object(m.a)(Object(m.a)(a))),a.mousemoveHandler=a.mousemoveHandler.bind(Object(m.a)(Object(m.a)(a)));var i=new Z(U);return i.index=0,a.state.world.bodies.push(i),a}return Object(v.a)(e,t),Object(u.a)(e,[{key:"createPlanet",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.state.world.bodies.length,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=Object(h.a)(this.state.world.bodies);s[a]=new Z(t,s[e]),s[a].index=a,s[a].emitter=this.createNewEmitter(i),console.log(s[a]),this.setState(function(t){return{world:Object(l.a)({},t.world,{bodies:s})}})}},{key:"updatePlanets",value:function(){for(var t=Object(h.a)(this.state.world.pendingBodies),e=0;e<t.length;e++){var a=t.splice(0,1)[0];a.em||(a.em={target:a.index,e:300,color1:A(a.data.hue,40),rate1:6,rate2:1.5,velocity:2,damp:.006,life:5,mass:4}),this.createPlanet(a.data,a.parent,a.index,a.em||null)}this.setState(function(e){return{world:Object(l.a)({},e.world,{pendingBodies:t})}})}},{key:"handlePlanetToggle",value:function(t){var e=t.target.id,a=Object(l.a)({},this.state.world.bDatabase[e]);if(!a.active&&this.state.world.bodies[a.parent]){var i=Object(h.a)(this.state.world.pendingBodies);i.push(a),this.setState(function(t){return{world:Object(l.a)({},t.world,{pendingBodies:i,bDatabase:Object(l.a)({},t.world.bDatabase,Object(o.a)({},e,Object(l.a)({},t.world.bDatabase[e],{active:!0})))})}})}else if(a.active){var s=Object(h.a)(this.state.world.bodies),r=Object(l.a)({},this.state.world.bDatabase),n=!0,c=!1,u=void 0;try{for(var d,p=s[Symbol.iterator]();!(n=(d=p.next()).done);n=!0){var v=d.value;if(v&&v.parent===s[a.index]){console.log(v);var m=v.name;r[m].active=!1,s[s.indexOf(v)]=null}}}catch(b){c=!0,u=b}finally{try{n||null==p.return||p.return()}finally{if(c)throw u}}s[a.index]=null,r[e].active=!1,this.setState(function(t){return{world:Object(l.a)({},t.world,{bodies:s,bDatabase:r})}})}}},{key:"createStructure",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.state.world.structures.length,i=Object(h.a)(this.state.world.structures);i[a]=new Q(t),i[a].addSegments(e),i[a].index=a,this.setState(function(t){return{world:Object(l.a)({},t.world,{structures:i})}})}},{key:"updateStructures",value:function(){for(var t=Object(h.a)(this.state.world.pendingStructures),e=0;e<t.length;e++){var a=t.splice(0,1)[0];this.createStructure(a.data,a.openings,a.index)}this.setState(function(e){return{world:Object(l.a)({},e.world,{pendingStructures:t})}})}},{key:"handleStructureToggle",value:function(t){var e=t.target.id,a=Object(l.a)({},this.state.world.sDatabase[e]);if(a.active){if(a.active){var i=Object(h.a)(this.state.world.structures);i[a.index]=null,this.setState(function(t){return{world:Object(l.a)({},t.world,{structures:i,sDatabase:Object(l.a)({},t.world.sDatabase,Object(o.a)({},e,Object(l.a)({},t.world.sDatabase[e],{active:!1})))})}})}}else{var s=Object(h.a)(this.state.world.pendingStructures);s.push(a),this.setState(function(t){return{world:Object(l.a)({},t.world,{pendingStructures:s,sDatabase:Object(l.a)({},t.world.sDatabase,Object(o.a)({},e,Object(l.a)({},t.world.sDatabase[e],{active:!0})))})}})}}},{key:"createNewEmitter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.target,a=void 0!==e&&e,i=t.color1,s=void 0===i?null:i,r=t.color2,n=void 0===r?null:r,o=t.mass,l=void 0===o?5:o,h=t.radius,c=void 0===h?1:h,u=t.velocity,d=void 0===u?2.5:u,p=t.rate1,v=void 0===p?20:p,m=t.rate2,b=void 0===m?.5:m,y=t.damp,g=void 0===y?.005:y,w=t.e,x=void 0===w?"once":w,S=t.life,k=void 0===S?5:S,E=t.planetAttraction,O=void 0===E||E,P=t.x,j=void 0===P?350:P,C=t.y,M=void 0===C?350:C,D=t.a,I=void 0===D?0:D,F=t.b,A=void 0===F?360:F,B=new f.a.Emitter;B.target=a,B.damping=g,B.rate=new f.a.Rate(new f.a.Span(v,1.5*v),b),B.addInitialize(B.rate),B.addInitialize(new f.a.Mass(l)),B.addInitialize(new f.a.Radius(c)),k&&B.addInitialize(new f.a.Life(k)),B.currVelocity=new f.a.Velocity(new f.a.Span(d,1.5*d),new f.a.Span(I,A),"polar"),B.addInitialize(B.currVelocity),s?B.addBehaviour(new f.a.Color(s,n||s)):B.addBehaviour(new f.a.Color("random"));var z=new f.a.CrossZone(new f.a.RectZone(0,0,this.state.width,this.state.height),"bound"),T=new f.a.RectZone(this.state.width/2,this.state.height/2,this.state.world.bodies[0].size),X=new f.a.RandomDrift(5,5,.05);B.addBehaviour(X),B.addBehaviour(z),O&&(B.planetAttraction=new f.a.Attraction(this.state.world.bodies[0],10,500),B.addBehaviour(B.planetAttraction));var R=new f.a.Repulsion(T,30,40);return B.addBehaviour(R),a&&(B.mouseAttract=new f.a.Attraction(this.state.mouseObj,5,200),B.addBehaviour(B.mouseAttract),B.p.x=this.state.width/2,B.p.y=this.state.height/2),a||(B.p.x=j,B.p.y=M),B.e=x,console.log(B),B}},{key:"makePsiEmitter",value:function(){var t=this;this.setState(function(e){return{proton:Object(l.a)({},e.proton,{psiEmitter:t.createNewEmitter({e:"once",color1:"#6699FF",color2:"#FFDDFF",rate1:50,rate2:.01,velocity:1,mass:8,radius:1,damp:.009,life:5})})}})}},{key:"addCoreEmitter",value:function(){var t=this;this.setState(function(e){return{proton:Object(l.a)({},e.proton,{coreEmitter:t.createNewEmitter({e:3,color1:A(t.state.world.bodies[0].hue,30,-10,-10),rate1:6,rate2:.5,velocity:2,damp:.015,life:20,mass:15,radius:1.5,planetAttraction:!0,a:y.a.random(0,180),b:y.a.random(181,360)})})}})}},{key:"planetCollision",value:function(t,e,a){var i=this;.9*I(t,e)<e.size+t.size&&(1===a&&this.setState(function(t){return{currentScore:t.currentScore+1,ball:Object(l.a)({},t.ball,{x:t.ball.x-t.ball.vx*i.state.params.bounceDampening*.5,y:t.ball.y-t.ball.vy*i.state.params.bounceDampening*.5,vx:-t.ball.vx*i.state.params.bounceDampening,vy:-t.ball.vy*i.state.params.bounceDampening})}}),2===a&&this.setState(function(a){var i=Object(h.a)(a.world.bodies),s=i[i.indexOf(e)],r=i[i.indexOf(t)];return r.speed&&(r.dx+=F(t,e).x*(r.coll*r.size/8)*(s.mass/r.mass),r.dy+=F(t,e).y*(r.coll*r.size/8)*(s.mass/r.mass),r.coll+=2),{resources:Object(l.a)({},a.resources,{matter:a.resources.matter+1}),bodies:i}}))}},{key:"borderCollision",value:function(t){(t.x+t.vx>this.state.screen.width-t.size||t.x+t.vx<t.size)&&this.setState(function(t){return{ball:Object(l.a)({},t.ball,{vx:-t.ball.vx*t.params.bounceDampening})}}),(t.y+t.vy>this.state.screen.width-t.size||t.y+t.vy<t.size)&&this.setState(function(t){return{ball:Object(l.a)({},t.ball,{vy:-t.ball.vy*t.params.bounceDampening})}})}},{key:"gravBall",value:function(t,e){var a=0,i=0,s=!0,r=!1,n=void 0;try{for(var o,h=e[Symbol.iterator]();!(s=(o=h.next()).done);s=!0){var c=o.value;if(c){var u=I(t,c);a+=c.mass*F(t,c).x/Math.pow(u*this.state.params.gravFalloff,2),i+=c.mass*F(t,c).y/Math.pow(u*this.state.params.gravFalloff,2)}}}catch(d){r=!0,n=d}finally{try{s||null==h.return||h.return()}finally{if(r)throw n}}this.setState(function(t){return{ball:Object(l.a)({},t.ball,{vx:t.ball.vx-a,vy:t.ball.vy-i})}})}},{key:"thrustInput",value:function(){var t=0,e=0;this.state.keys.up&&(e-=this.state.ball.thrustAcc),this.state.keys.down&&(e+=this.state.ball.thrustAcc),this.state.keys.left&&(t-=this.state.ball.thrustAcc),this.state.keys.right&&(t+=this.state.ball.thrustAcc),(t||e)&&this.setState(function(a){return{ball:Object(l.a)({},a.ball,{vx:a.ball.vx+t,vy:a.ball.vy+e})}})}},{key:"structureCollision",value:function(){var t=this.state.ball,e=(x()(t.x-this.props.width/2,t.y-this.props.height/2).horizontalAngle()+3*Math.PI)%(2*Math.PI)+Math.PI,a=!1,i=!0,s=!1,r=void 0;try{for(var n,o=this.state.world.structures[Symbol.iterator]();!(i=(n=o.next()).done);i=!0){var l=n.value;if(l&&I(t,l.origin)>l.radius-l.width/2-t.size&&I(t,l.origin)<l.radius+l.width/2+t.size){var h=((l.segments[0].bc-l.segments[0].ac)*(l.speed>0?1:-1)+3*Math.PI)%(2*Math.PI)-Math.PI,c=!0,u=!1,d=void 0;try{for(var p,v=l.segments[Symbol.iterator]();!(c=(p=v.next()).done);c=!0){var m=p.value,b=(e-(l.speed>0?m.ac:m.bc)+3*Math.PI)%(2*Math.PI)-Math.PI;if(m.health>0&&(b>0&&b<h||b<0&&b>Math.PI-h))return m.health--,a=l.index,this.collState(a)}}catch(y){u=!0,d=y}finally{try{c||null==v.return||v.return()}finally{if(u)throw d}}}}}catch(y){s=!0,r=y}finally{try{i||null==o.return||o.return()}finally{if(s)throw r}}return this.collState(a)}},{key:"collState",value:function(t){var e=this;this.setState(function(a){return!1!==t&&!1===e.state.ball.coll?{ball:Object(l.a)({},a.ball,{vx:-a.ball.vx*a.params.bounceDampening,vy:-a.ball.vy*a.params.bounceDampening,coll:t,ct:1})}:!1!==t&&!1!==e.state.ball.coll?{ball:Object(l.a)({},a.ball,{vx:a.ball.vx*(1+a.ball.ct/10),vy:a.ball.vy*(1+a.ball.ct/10),ct:a.ball.ct+1})}:{ball:Object(l.a)({},a.ball,{coll:!1,ct:0})}})}},{key:"planetMotion",value:function(){var t=this,e=this.state.world.bodies;if(this.state.mousedown&&this.state.resources.energy>0&&this.state.mouseTick%1===0){var a=!0,i=!1,s=void 0;try{for(var r,n=e[Symbol.iterator]();!(a=(r=n.next()).done);a=!0){var o=r.value;o&&o.getsPulled(12,this.state.mouseObj,this.state.mouseTick)}}catch(m){i=!0,s=m}finally{try{a||null==n.return||n.return()}finally{if(i)throw s}}this.setState(function(t){return{resources:Object(l.a)({},t.resources,{energy:t.resources.energy-1})}})}var h=!0,c=!1,u=void 0;try{for(var d,p=function(){var a=d.value;if(a){var i=e.filter(function(t){return t!==a}),s=!0,r=!1,n=void 0;try{for(var o,l=i[Symbol.iterator]();!(s=(o=l.next()).done);s=!0){var h=o.value;h&&t.planetCollision(a,h,2)}}catch(m){r=!0,n=m}finally{try{s||null==l.return||l.return()}finally{if(r)throw n}}a.orbitX&&a.movePlanet()}},v=e[Symbol.iterator]();!(h=(d=v.next()).done);h=!0)p()}catch(m){c=!0,u=m}finally{try{h||null==v.return||v.return()}finally{if(c)throw u}}}},{key:"moveBall",value:function(){var t=this.state.ball,e=this.state.world.bodies;this.borderCollision(t),this.gravBall(t,e);var a=!0,i=!1,s=void 0;try{for(var r,n=e[Symbol.iterator]();!(a=(r=n.next()).done);a=!0){var o=r.value;o&&this.planetCollision(t,o,1)}}catch(c){i=!0,s=c}finally{try{a||null==n.return||n.return()}finally{if(i)throw s}}this.structureCollision(),this.thrustInput();var h=I(t,{x:t.vx,y:t.vy});this.setState(function(t){return{ball:Object(l.a)({},t.ball,{x:t.ball.x+t.ball.vx,y:t.ball.y+t.ball.vy,speed:h})}})}},{key:"handlePowerChange",value:function(){this.setState(function(t){return{currentScore:0,resources:Object(l.a)({},t.resources,{energy:t.resources.energy+10*t.currentScore})}})}},{key:"increasePsi",value:function(){this.setState(function(t){return{resources:Object(l.a)({},t.resources,{psi:t.resources.psi+1})}})}},{key:"handleKeys",value:function(t,e){var a=this.state.keys;e.keyCode!==S&&e.keyCode!==P||(a.left=t),e.keyCode!==O&&e.keyCode!==M||(a.down=t),e.keyCode!==k&&e.keyCode!==j||(a.right=t),e.keyCode!==E&&e.keyCode!==C||(a.up=t),e.keyCode===D&&(a.space=t),this.setState(function(t){return{keys:a}})}},{key:"mousedownHandler",value:function(t){this.setState(function(t){return{mousedown:!0}}),this.mousemoveHandler(t)}},{key:"mouseupHandler",value:function(t){this.setState(function(t){return{mousedown:!1}})}},{key:"mousemoveHandler",value:function(t){if(this.state.mousedown){var e=t.nativeEvent.layerX,a=t.nativeEvent.layerY;this.setState(function(t){return{mouseObj:{x:e,y:a}}})}}},{key:"handlePauseStart",value:function(){!1===this.state.inGame?(this.continueGame(),console.log("continue")):(this.stopGame(),console.log("pause"))}},{key:"continueGame",value:function(){var t=this;requestAnimationFrame(function(e){t.update(e)}),this.setState(function(){return{inGame:!0}})}},{key:"stopGame",value:function(){clearInterval(this.timerID),cancelAnimationFrame(this.animationID),this.setState(function(){return{inGame:!1}})}},{key:"componentDidMount",value:function(){window.addEventListener("keyup",this.handleKeys.bind(this,!1)),window.addEventListener("keydown",this.handleKeys.bind(this,!0)),this.makePsiEmitter(),this.addCoreEmitter(),this.continueGame()}},{key:"componentWillUnmount",value:function(){cancelAnimationFrame(this.animationID)}},{key:"update",value:function(t){var e=this,a=this.state.world.structures,i=t-this.state.ts;if(i>1e3/60){this.setState(function(e){return{ts:t-i%(1e3/60),tick:e.tick+1,mouseTick:e.mousedown?e.mouseTick+1:0,mouseReleased:!e.mousedown&&e.mouseTick>0}}),this.state.world.pendingBodies.length>0&&this.updatePlanets(),this.state.world.pendingStructures.length>0&&this.updateStructures(),this.planetMotion();var s=!0,r=!1,n=void 0;try{for(var o,l=a[Symbol.iterator]();!(s=(o=l.next()).done);s=!0){var h=o.value;h&&h.moveSegments()}}catch(c){r=!0,n=c}finally{try{s||null==l.return||l.return()}finally{if(r)throw n}}this.moveBall()}this.state.inGame&&(this.animationID=requestAnimationFrame(function(t){e.update(t)}))}},{key:"render",value:function(){var t={tick:this.state.tick,ts:this.state.ts,inGame:this.state.inGame,currentScore:this.state.currentScore,ball:this.state.ball,resources:this.state.resources,mousedown:this.mousedown},e=this.state.world.bDatabase,a=this.state.world.sDatabase,i=this.state.inGame?s.a.createElement(R,{onClick:this.handlePauseStart,style:{backgroundColor:"red"},text:"Pause"}):s.a.createElement(R,{onClick:this.handlePauseStart,text:"Continue"}),r=s.a.createElement(R,{onClick:this.increasePsi,style:{backgroundColor:"#4666FF"},text:"Psi blasts: ".concat(this.state.resources.psi)}),n=s.a.createElement(R,{onClick:this.handlePowerChange,style:{backgroundColor:"#E0115F"},text:"Energy: ".concat(this.state.resources.energy," (click to charge)")});return s.a.createElement("div",{className:"showcase"},s.a.createElement(_,Object.assign({onMouseDown:this.mousedownHandler,onMouseUp:this.mouseupHandler,onMouseMove:this.mousemoveHandler},this.state)),s.a.createElement(z,{ui:t},s.a.createElement(T,{ui:t}),s.a.createElement("p",null,"WASD to accelerate"),s.a.createElement(X,{ui:t},i,r,n),s.a.createElement(X,{ui:t},s.a.createElement(L,{onClick:this.handlePlanetToggle,body:e.Earth}),s.a.createElement(L,{onClick:this.handlePlanetToggle,body:e.Venus}),s.a.createElement(L,{onClick:this.handlePlanetToggle,body:e.Saturn}),s.a.createElement(L,{onClick:this.handlePlanetToggle,body:e.Mars}),s.a.createElement(L,{onClick:this.handlePlanetToggle,body:e.Phobos})),s.a.createElement(X,{ui:t},s.a.createElement(W,{onClick:this.handleStructureToggle,struct:a.S1}),s.a.createElement(W,{onClick:this.handleStructureToggle,struct:a.S2}),s.a.createElement(W,{onClick:this.handleStructureToggle,struct:a.S3}),s.a.createElement(W,{onClick:this.handleStructureToggle,struct:a.S4}))))}}]),e}(i.Component),z=function(t){t.ui;var e=t.children;return s.a.createElement("div",{className:"game-interface"},e)},T=function(t){var e=t.ui;return s.a.createElement("div",{className:"interface-element"},s.a.createElement("p",null,"Energy: ".concat(e.resources.energy," || Matter: ").concat(e.resources.matter," || Psi: ").concat(e.resources.psi," || Score: ").concat(e.currentScore)))},X=function(t){t.ui;var e=t.children;return s.a.createElement("div",{className:"interface-element"},e)},R=function(t){var e=t.onClick,a=t.text,i=t.style,r=t.id;return s.a.createElement("button",{onClick:e,type:"button",style:i,id:r},a)},L=function(t){var e=t.onClick,a=t.body;return s.a.createElement("button",{onClick:e,style:{backgroundColor:"".concat(A(a.data.hue,-20))},id:a.data.name},"Toggle planet: ",a.data.name)},W=function(t){var e=t.onClick,a=t.struct;return s.a.createElement("button",{onClick:e,style:{backgroundColor:"".concat(A(a.data.hue,-40))},id:a.data.name},"Toggle structure: ",a.data.name)},Y={size:9,orbitX:190,orbitY:150,rot:200,speed:-1.5,mass:100,hue:"#ff4336",glow:.8,angle:0,name:"Mars"},H={size:6,orbitX:33,orbitY:31,rot:100,speed:1.5,mass:50,hue:"#EE1111",glow:.6,angle:30,name:"Phobos"},G={size:12,orbitX:70,orbitY:65,rot:250,speed:1,mass:165,hue:"#00A86B",glow:.8,angle:0,name:"Venus"},N={size:11,orbitX:145,orbitY:130,rot:330,speed:1,mass:150,hue:"#007FFF",glow:1.2,angle:120,name:"Earth"},U={size:19,orbitX:0,speed:0,mass:220,hue:"#FFCC33",glow:2.5,angle:0,name:"Sol"},V={size:14,orbitX:310,speed:.5,mass:190,hue:"#d9b47d",glow:1,angle:210,name:"Saturn"},Z=function(){function t(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;Object(c.a)(this,t),this.data=e,this.parent=a,this.xPar=this.parent?this.parent.x:e.xPar||350,this.yPar=this.parent?this.parent.y:e.yPar||350,this.size=e.size||15,this.orbitX=e.orbitX||0,this.orbitY=e.orbitY||this.orbitX,this.rot=e.rot||0,this.orbitX!==this.orbitY&&(this.e=Math.sqrt(1-Math.pow(this.orbitY,2)/Math.pow(this.orbitX,2)),this.pfdist=new x.a(this.orbitX*this.e,0),this.pfdist.rotateDeg(this.rot),this.pf={x:this.xPar+this.pfdist.x,y:this.yPar+this.pfdist.y},this.per=this.orbitX-this.orbitX*this.e,this.aph=this.orbitX+this.orbitX*this.e),this.speed=e.speed||0,this.speedWarp=0,this.mass=e.mass||0,this.hue=e.hue||"#FFFF00",this.glow=e.glow||0,this.name=e.name||"Unknown",this.angle=e.angle||0,this.dir=this.speed>0?1:-1,this.x=this.xPar+this.orbitX,this.y=this.yPar+this.orbitY,this.dx=0,this.dy=0,this.coll=0,console.log("creating body: "+this.name)}return Object(u.a)(t,[{key:"getsPulled",value:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=I(this,e),s=1+.05*a;this.speedWarp=200*t/this.mass/(Math.pow(.5*i,1.1)*s),i>2*this.size*s&&(this.dx-=t*F(this,e).x/(Math.pow(.04*i,1.1)*s),this.dy-=t*F(this,e).y/(Math.pow(.04*i,1.1)*s))}},{key:"movePlanet",value:function(){if(this.angle+=this.orbitX===this.orbitY?Math.acos(1-Math.pow(this.speed/(1+this.speedWarp)/this.orbitX,2)/2)%Math.PI*2*this.dir:Math.acos(1-Math.pow(this.speed*(1+this.e*Math.cos(this.angle))/(1+this.speedWarp)/this.orbitX,2)/2)%Math.PI*2*this.dir,this.parent&&(this.xPar=this.parent.x,this.yPar=this.parent.y,this.orbitX!==this.orbitY&&(this.xPar-=this.pfdist.x,this.yPar-=this.pfdist.y)),this.orbitX===this.orbitY)this.x=this.xPar+this.orbitX*Math.cos(this.angle)+this.dx,this.y=this.yPar+this.orbitY*Math.sin(this.angle)+this.dy;else{var t=new x.a(this.orbitX*Math.cos(this.angle),this.orbitY*Math.sin(this.angle));t.rotateDeg(this.rot),this.x=this.xPar+t.x+this.dx,this.y=this.yPar+t.y+this.dy}this.dx&&(this.dx=Math.abs(this.dx)>1?.99*this.dx:0),this.dy&&(this.dy=Math.abs(this.dy)>1?.99*this.dy:0),this.speedWarp&&(this.speedWarp=this.speedWarp>.1?.8*this.speedWarp:0),this.coll&&this.coll--}}]),t}(),K={numSeg:6,gap:.25,radius:190,speed:.4,origin:{x:350,y:350},width:16,hue:"#DF70FF",name:"S1"},q={numSeg:12,gap:.4,radius:320,speed:.7,origin:{x:350,y:350},width:12,hue:"#FFD5D0",name:"S2"},J={numSeg:2,gap:.2,radius:50,speed:.5,origin:{x:350,y:350},width:10,hue:"#86CFEF",name:"S3"},$={numSeg:18,gap:.1,radius:250,speed:.4,origin:{x:350,y:350},width:12,hue:"#FF6655",name:"S4"},Q=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.numSeg,i=void 0===a?5:a,s=e.arg,r=void 0===s?0:s,n=e.gap,o=void 0===n?.4:n,l=e.radius,h=void 0===l?240:l,u=e.speed,d=void 0===u?5:u,p=e.origin,v=void 0===p?{x:350,y:350}:p,m=e.width,b=void 0===m?10:m,y=e.hue,g=void 0===y?"#E0E0E0":y,f=e.glow,w=void 0===f?1:f,x=e.name,S=void 0===x?"(Unknown)":x;Object(c.a)(this,t),this.numSeg=i,this.arg=r,this.gap=o,this.radius=h,this.speed=d,this.origin=v,this.width=b,this.hue=g,this.glow=w,this.segments=[],this.name=S}return Object(u.a)(t,[{key:"addSegments",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.arg,a=this.gap,i=this.numSeg,s=this.radius,r=this.origin,n=this.width,o=this.hue,l=this.glow,h=0;h<i;h++){var c={a:e,b:e+2*Math.PI*(1-a)/i,r:s,ac:e%(2*Math.PI),bc:(e+2*Math.PI*(1-a)/i)%(2*Math.PI),origin:r,width:n,hue:o,glow:l,health:3};this.segments.push(c),e+=2*Math.PI/i}for(var u=0;u<t;u++)this.destroyRandom()}},{key:"destroySegment",value:function(t){var e=this.segments.filter(function(e){return e!==t});this.segments=e}},{key:"destroyRandom",value:function(){var t=this.segments[y.a.random(this.segments.length)-1];this.destroySegment(t)}},{key:"moveSegments",value:function(){var t=!0,e=!1,a=void 0;try{for(var i,s=this.segments[Symbol.iterator]();!(t=(i=s.next()).done);t=!0){var r=i.value;r.a+=2*Math.PI*.001*this.speed,r.ac=(Math.abs(r.a)+2*Math.PI)%(2*Math.PI),r.b+=2*Math.PI*.001*this.speed,r.bc=(Math.abs(r.b)+2*Math.PI)%(2*Math.PI),r.health<3&&r.ac%(2*Math.PI*.1)<.01&&r.health++}}catch(n){e=!0,a=n}finally{try{t||null==s.return||s.return()}finally{if(e)throw a}}}}]),t}(),_=function(t){function e(t){var a;return Object(c.a)(this,e),(a=Object(d.a)(this,Object(p.a)(e).call(this,t))).state={zones:[]},a.saveContext=a.saveContext.bind(Object(m.a)(Object(m.a)(a))),a.tick=1,a.psiLevel=0,a.emitterList=[],a}return Object(v.a)(e,t),Object(u.a)(e,[{key:"saveContext",value:function(t){this.protonCanvas=t,this.ctx=t.getContext("2d"),this.width=this.ctx.canvas.width,this.height=this.ctx.canvas.height}},{key:"componentDidMount",value:function(){this.createProton(),console.log(this.props)}},{key:"createProton",value:function(){var t=this;this.proton=new f.a,this.borderZoneBehaviour=new f.a.CrossZone(new f.a.RectZone(0,0,this.protonCanvas.width,this.protonCanvas.height),"bound"),this.centerZone=new f.a.RectZone(this.width/2,this.height/2,this.props.world.bodies[0].size),this.centerBehaviour=new f.a.Repulsion(this.centerZone,10,30),this.randomBehaviour=new f.a.RandomDrift(5,5,.05),this.clickEmitter=this.createClickEmitter("#FF6FFF","#FD1212",this.props.ball),this.renderer=new f.a.CanvasRenderer(this.protonCanvas),this.renderer.onParticleUpdate=function(e){t.ctx.globalAlpha=.9,t.ctx.beginPath(),t.ctx.strokeStyle=e.color,t.ctx.lineWidth=2*e.energy+e.radius/4,t.ctx.moveTo(e.old.p.x-15*e.old.a.x,e.old.p.y-15*e.old.a.y),t.ctx.lineTo(e.p.x,e.p.y),t.ctx.closePath(),t.ctx.stroke(),t.ctx.globalAlpha=1},this.proton.addRenderer(this.renderer)}},{key:"createClickEmitter",value:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=new f.a.Emitter;return i.target=a,i.damping=.005,i.addInitialize(new f.a.Rate(50)),i.addInitialize(new f.a.Mass(5)),i.addInitialize(new f.a.Life(new f.a.Span(4,6))),i.addInitialize(new f.a.Radius(1)),i.currVelocity=new f.a.Velocity(3,new f.a.Span(0,360),"polar"),i.addInitialize(i.currVelocity),i.addBehaviour(new f.a.Color(t,e)),i.addBehaviour(this.randomBehaviour),i.addBehaviour(this.borderZoneBehaviour),i.addBehaviour(this.centerBehaviour),i.pointAttraction=new f.a.Attraction(a,20,600),i.addBehaviour(i.pointAttraction),i.p.x=this.props.mouseObj.x,i.p.y=this.props.mouseObj.y,this.proton.addEmitter(i),i}},{key:"componentDidUpdate",value:function(){var t=this.props.world.bodies;if(this.props.tick>this.tick){this.updateWorld(),this.proton.update(),this.psiLevel<this.props.resources.psi&&this.psiEmitter&&(this.psiLevel++,this.psiEmitter.rate=this.psiLevel<9?new f.a.Rate(new f.a.Span(20+5*this.psiLevel,25+8*this.psiLevel),.25*this.psiLevel):new f.a.Rate(new f.a.Span(150,180),4),this.psiEmission()),this.props.tick%500===0&&this.coreEmitter.emit(this.coreEmitter.e),this.drawStructures();var e=!0,a=!1,i=void 0;try{for(var s,r=t[Symbol.iterator]();!(e=(s=r.next()).done);e=!0){var n=s.value;n&&(this.drawConnect(n,this.props.ball),this.drawPlanet(n))}}catch(o){a=!0,i=o}finally{try{e||null==r.return||r.return()}finally{if(a)throw i}}this.drawBall(),this.drawScore(),this.mouseInput(),this.tick=this.props.tick}}},{key:"mouseInput",value:function(){if(!0===this.props.mousedown){if(this.props.mouseTick%10===0){var t=!0,e=!1,a=void 0;try{for(var i,s=this.emitterList[Symbol.iterator]();!(t=(i=s.next()).done);t=!0){var r=i.value;r&&r.mouseAttract&&r.mouseAttract.reset(this.props.mouseObj,25,600)}}catch(d){e=!0,a=d}finally{try{t||null==s.return||s.return()}finally{if(e)throw a}}}this.clickEmission()}else if(!0===this.mouseReleased){var n=!0,o=!1,l=void 0;try{for(var h,c=this.emitterList[Symbol.iterator]();!(n=(h=c.next()).done);n=!0){var u=h.value;u&&u.mouseAttract&&u.mouseAttract.reset(this.props.mouseObj,5,200)}}catch(d){o=!0,l=d}finally{try{n||null==c.return||c.return()}finally{if(o)throw l}}}}},{key:"clickEmission",value:function(){this.clickEmitter.p.x=this.props.mouseObj.x,this.clickEmitter.p.y=this.props.mouseObj.y,this.clickEmitter.pointAttraction.reset(this.props.ball,20,600),this.clickEmitter.emit("once")}},{key:"psiEmission",value:function(){this.psiEmitter.p.x=this.props.ball.x,this.psiEmitter.p.y=this.props.ball.y,this.psiEmitter.planetAttraction.reset(this.props.world.bodies[0],25,700);var t=x()(this.props.ball.x-this.protonCanvas.width/2,this.props.ball.y-this.protonCanvas.height/2).verticalAngleDeg();this.psiEmitter.currVelocity.reset(new f.a.Span(2,3),new f.a.Span((t+180)%360-15,(t+180)%360+15),"polar"),this.psiEmitter.emit("once")}},{key:"updateWorld",value:function(){this.updateEmitters()}},{key:"updateEmitters",value:function(t){var e=this.props.world.bodies,a=!0,i=!1,s=void 0;try{for(var r,n=e[Symbol.iterator]();!(a=(r=n.next()).done);a=!0){var o=r.value;o&&!this.emitterList[o.index]&&o.emitter&&(this.emitterList[o.index]=o.emitter,this.proton.addEmitter(this.emitterList[o.index]),this.emitterList[o.index].emit(this.emitterList[o.index].e))}}catch(v){i=!0,s=v}finally{try{a||null==n.return||n.return()}finally{if(i)throw s}}var l=!0,h=!1,c=void 0;try{for(var u,d=this.emitterList[Symbol.iterator]();!(l=(u=d.next()).done);l=!0){var p=u.value;p&&p.target&&!e[p.target]&&(this.proton.removeEmitter(p),this.emitterList[p.target]=null),p&&p.target&&e[p.target]&&(p.p.x=e[p.target].x,p.p.y=e[p.target].y,e[p.target].coll%5===2&&p.emit("once"),p.planetAttraction&&p.planetAttraction.reset(e[p.target],15,500))}}catch(v){h=!0,c=v}finally{try{l||null==d.return||d.return()}finally{if(h)throw c}}!this.psiEmitter&&this.props.proton.psiEmitter&&(this.psiEmitter=this.props.proton.psiEmitter,this.proton.addEmitter(this.psiEmitter)),!this.coreEmitter&&this.props.proton.coreEmitter&&(this.coreEmitter=this.props.proton.coreEmitter,this.proton.addEmitter(this.coreEmitter))}},{key:"drawConnect",value:function(t,e){this.ctx.beginPath(),this.ctx.globalAlpha=.5,this.ctx.strokeStyle="#4397DC",this.ctx.lineWidth=1,this.ctx.setLineDash([40,15]),this.ctx.lineDashOffset=20,this.ctx.moveTo(t.x,t.y),this.ctx.lineTo(e.x,e.y),this.ctx.closePath(),this.ctx.stroke(),this.ctx.shadowBlur=0,this.ctx.shadowColor=0,this.ctx.setLineDash([]),this.ctx.globalAlpha=1}},{key:"drawScore",value:function(){var t=this.props.currentScore;this.ctx.fillStyle="#F5F5F5",this.ctx.font="22px Arial",this.ctx.fillText("x"+t,10,25)}},{key:"drawBall",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1.5,e=this.props.ball,a=e.x,i=e.y,s=e.vx,r=e.vy,n=e.size,o=e.color,l=e.glow;l&&(this.ctx.shadowBlur=15*l,this.ctx.shadowColor=A(o,10)),t&&(this.ctx.beginPath(),this.ctx.globalAlpha=.3,this.ctx.arc(a-s*t,i-r*t,n,0,2*Math.PI),this.ctx.fillStyle=o,this.ctx.fill(),this.ctx.closePath(),this.ctx.globalAlpha=1),this.ctx.beginPath(),this.ctx.arc(a,i,n,0,2*Math.PI),this.ctx.fillStyle=o,this.ctx.fill(),this.ctx.closePath(),this.ctx.shadowBlur=0,this.ctx.shadowColor=0}},{key:"drawPlanet",value:function(t){this.ctx.beginPath(),t.orbitX!==t.orbitY?this.ctx.ellipse(t.xPar,t.yPar,t.orbitX,t.orbitY,t.rot/360*(2*Math.PI),0,2*Math.PI,!0):this.ctx.arc(t.xPar,t.yPar,t.orbitX,0,2*Math.PI,!1),this.ctx.lineWidth=2,this.ctx.globalAlpha=.4,this.ctx.strokeStyle="#E0E0E0",this.ctx.closePath(),this.ctx.stroke(),this.ctx.globalAlpha=1,this.ctx.beginPath(),t.glow&&(this.ctx.shadowBlur=10*t.glow,this.ctx.shadowColor=A(t.hue,20)),this.ctx.arc(t.x,t.y,t.size,0,2*Math.PI),this.ctx.fillStyle=t.hue,this.ctx.fill(),this.ctx.closePath(),this.ctx.shadowBlur=0,this.ctx.shadowColor=0}},{key:"drawStructures",value:function(){var t=this.props.world.structures,e=!0,a=!1,i=void 0;try{for(var s,r=t[Symbol.iterator]();!(e=(s=r.next()).done);e=!0){var n=s.value;if(n){var o=!0,l=!1,h=void 0;try{for(var c,u=n.segments[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var d=c.value;this.drawSegment(d)}}catch(p){l=!0,h=p}finally{try{o||null==u.return||u.return()}finally{if(l)throw h}}}}}catch(p){a=!0,i=p}finally{try{e||null==r.return||r.return()}finally{if(a)throw i}}}},{key:"drawSegment",value:function(t){this.ctx.beginPath(),t.glow&&(this.ctx.shadowBlur=10*t.glow,this.ctx.shadowColor=A(t.hue,10)),this.ctx.globalAlpha=.33*t.health,this.ctx.arc(t.origin.x,t.origin.y,t.r,t.a,t.b,!1),this.ctx.lineWidth=t.width,this.ctx.strokeStyle=t.hue,this.ctx.stroke(),this.ctx.closePath(),this.ctx.globalAlpha=1,this.ctx.shadowBlur=0,this.ctx.shadowColor=0}},{key:"render",value:function(){return s.a.createElement(tt,{width:this.props.screen.width,height:this.props.screen.height,contextRef:this.saveContext,onMouseDown:this.props.onMouseDown,onMouseUp:this.props.onMouseUp,onMouseMove:this.props.onMouseMove})}}]),e}(s.a.Component),tt=function(t){function e(){return Object(c.a)(this,e),Object(d.a)(this,Object(p.a)(e).apply(this,arguments))}return Object(v.a)(e,t),Object(u.a)(e,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){var t=this;return s.a.createElement("canvas",{id:"myCanvas",width:this.props.width,height:this.props.height,ref:function(e){return e?t.props.contextRef(e):null},onMouseDown:this.props.onMouseDown,onMouseUp:this.props.onMouseUp,onMouseMove:this.props.onMouseMove,style:{background:"#36454F"}})}}]),e}(s.a.Component),et=function(t){function e(t){var a;return Object(c.a)(this,e),(a=Object(d.a)(this,Object(p.a)(e).call(this,t))).state={hasError:!1},a}return Object(v.a)(e,t),Object(u.a)(e,[{key:"componentDidCatch",value:function(t,e){console.log(t,e),this.setState({error:t,info:e})}},{key:"render",value:function(){return this.state.hasError?s.a.createElement("div",null,s.a.createElement("h1",null,"Something went wrong."),s.a.createElement("details",{style:{whiteSpace:"pre-wrap"}},this.state.error&&this.state.error.toString(),s.a.createElement("br",null),this.state.info.componentStack)):this.props.children}}],[{key:"getDerivedStateFromError",value:function(t){return{hasError:!0}}}]),e}(i.Component),at=function(t){function e(){return Object(c.a)(this,e),Object(d.a)(this,Object(p.a)(e).apply(this,arguments))}return Object(v.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){return s.a.createElement(et,null,s.a.createElement("div",{className:"App"},s.a.createElement("header",{className:"header"},s.a.createElement("h1",{className:"header-name"},"Orbit game title")),s.a.createElement(B,{width:"700",height:"700"})))}}]),e}(i.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n.a.render(s.a.createElement(at,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[16,1,2]]]);
//# sourceMappingURL=main.d3887716.chunk.js.map