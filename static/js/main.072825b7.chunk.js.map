{"version":3,"sources":["particle.png","App.js","serviceWorker.js","index.tsx"],"names":["module","exports","Modal","setAppElement","KEY","objectDistance","b1","arguments","length","undefined","x","y","b2","v1","Victor","v2","distance","towardsBody","origin","target","shadeColor","color","rShade","gShade","bShade","R","parseInt","substring","G","B","toString","OrbitGame","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","state","screen","width","height","ratio","window","devicePixelRatio","starList","name","num","world","stage","bodies","pendingBodies","bDatabase","Sol","data","solData","parent","index","active","status","shield","uplink","buildings","marsData","Math","floor","seedrandom","quick","venusData","phobosData","earthData","saturnData","structures","pendingStructures","sDatabase","rs1","openings","rs2","rs3","rs4","params","gravFalloff","bounceDampening","ball","vx","vy","size","mass","speed","thrustAcc","thrustLevel","heading","power","coll","ct","glow","resources","matter","mInc","energy","eInc","psi","psiInc","psiFlux","psiChoir","hm","keys","left","right","up","down","space","released","mousedown","mouseTick","mouseReleased","mouseObj","init","proton","selectedObj","tick","ts","randomHash","currentScore","inGame","showModal","sharedEB","animationID","timerID","handlePowerChange","bind","assertThisInitialized","handleChargePsi","psiBlast","beamBlast","beamPhase","handlePlanetBuild","handleSystemChange","handlePlanetToggle","handleStructureToggle","handlePauseStart","handleKeys","mouseupHandler","mousedownHandler","mousemoveHandler","handleOpenModal","handleCloseModal","ui","_this2","starTravelList","toConsumableArray","push","map","star","react_default","a","createElement","App_StarButton","onClick","key","App_Button","style","backgroundColor","text","concat","pos","_this3","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_loop","body","value","v","setState","prevState","_iterator","Symbol","iterator","next","done","_ret","err","return","objectSpread","type","e","p","id","find","b","lvl","console","log","key_update","keyCode","_x","nativeEvent","layerX","_y","layerY","selectOnCanvas","beam","systemChange","planetToggle","s","structureToggle","system","rngData","rngBody","i","planet","sysStruct","rngStruct","struct","starlist","n","genSysPlanets","genSysStructures","pending","db","dbplanets","slice","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","createPrimary","loadStagePlanets","loadStageStructures","addCoreEmitter","continueGame","currStage","bdb","sdb","bdb2","sdb2","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_step7","_iterator7","_iteratorNormalCompletion8","_didIteratorError8","_iteratorError8","_step8","_iterator8","loadStage","Body","em","emitter","createNewEmitter","splice","color1","hue","rate1","rate2","velocity","damp","life","createPlanet","planets","_iteratorNormalCompletion9","_didIteratorError9","_iteratorError9","_step9","_iterator9","ringStructure","addSegments","ps","pop","borderZoneBehaviour","Proton","CrossZone","RectZone","randomBehaviour","RandomDrift","centerZone","centerBehaviour","Repulsion","_ref","_ref$target","_ref$color","_ref$color2","color2","_ref$mass","_ref$radius","radius","_ref$velocity","_ref$rate","_ref$rate2","_ref$damp","_ref$e","_ref$life","_ref$planetAttraction","planetAttraction","_ref$x","_ref$y","_ref$a","_ref$b","special","Emitter","damping","rate","Rate","addInitialize","Mass","Radius","Life","currVelocity","Velocity","Span","c","Color","addBehaviour","coreAttraction","Attraction","mouseAttract","_this4","psiEmitter","_this5","coreEmitter","_","random","sample","particles","particle","dead","tx","ty","pow","object","targets","gx","gy","_iteratorNormalCompletion10","_didIteratorError10","_iteratorError10","_step10","_iterator10","dist","angle","horizontalAngle","PI","_iteratorNormalCompletion11","_didIteratorError11","_iteratorError11","_step11","_iterator11","arcLength","_iteratorNormalCompletion12","_didIteratorError12","_iteratorError12","_step12","_iterator12","segments","seg","angleDiff","ac","bc","health","structCollState","bounce","_this6","_iteratorNormalCompletion13","_didIteratorError13","_iteratorError13","_step13","_iterator13","_iteratorNormalCompletion14","_didIteratorError14","_iteratorError14","_step14","_loop2","movePlanet","otherBodies","filter","item","_iteratorNormalCompletion15","_didIteratorError15","_iteratorError15","_step15","_iterator15","planetCollision","_iterator14","indexOf","o","dx","dy","pcx","pcy","_iteratorNormalCompletion16","_didIteratorError16","_iteratorError16","_step16","_iterator16","_this$planetCollision","_this$planetCollision2","slicedToArray","cx","cy","g","ballGravPull","t","thrustInput","tl","sqrt","abs","borderCollision","clamp","sc","structCollisionCheck","scx","scy","pc","ballCheckPlanets","res","stopGame","_this7","requestAnimationFrame","update","clearInterval","cancelAnimationFrame","addEventListener","defineEB","createGalaxy","makePsiEmitter","delta","updatePlanets","updateStructures","planetMotion","_iterator17","_iteratorNormalCompletion17","_step17","layer","moveSegments","moveBall","emitterParticleCheck","beamBlastPower","economyUpdate","_this8","_this9","makeMapInterface","planetList","App_PlanetButton","structList","App_StructureButton","selectionInfo","App_PlanetInfoBox","textAlign","listStyle","padding","margin","minWidth","minHeight","obj","fBuild","controlButtons","makeControlButtons","canvasCheck","App_GameCanvas","assign","onMouseDown","onMouseUp","onMouseMove","background","className","App_GUIWrap","lib_default","isOpen","contentLabel","onRequestClose","shouldCloseOnOverlayClick","content","maxWidth","fontColor","App_ButtonBlock","App_StatsDisplay","App_Controls","fontSize","alignSelf","borderRadius","src","alt","Component","GUIWrap","_ref2","children","StatsDisplay","_ref3","transitionDuration","display","PlanetInfoBox","_ref4","toFixed","bList","Controls","_ref5","ButtonBlock","_ref6","Button","_ref7","StarButton","_ref8","PlanetButton","_ref9","StructureButton","_ref10","orbitX","orbitY","rot","seed","scale","rstate","rng","int32","rngstate","ox","xPar","yPar","pfdist","rotateDeg","pf","per","aph","speedWarp","dir","pullTick","force","fade","acos","cos","sin","el","numSeg","gap","rand","arg","_ref11","_ref11$numSeg","_ref11$gap","_ref11$radius","_ref11$speed","_ref11$origin","_ref11$width","_ref11$hue","_ref11$name","_ref11$arg","regen","vulnSeg","r","segment","randArc","phase","destroyRandom","destroy","destroySegment","int","_iteratorNormalCompletion18","_didIteratorError18","_iteratorError18","_step18","_iterator18","tc","rotate","GameCanvas","_this11","zones","saveContext","saveOverlay","psiLevel","emitterList","canvas","protonCanvas","ctx","getContext","protonCanvas2","ctx2","createProton","_this12","clickEmitter","createClickEmitter","renderer","CanvasRenderer","onParticleUpdate","globalAlpha","beginPath","strokeStyle","lineWidth","moveTo","old","lineTo","closePath","stroke","addRenderer","proton2","blastEmitters","rend2","WebGLRenderer","blendFunc","pointAttraction","addEmitter","updateWorld","psiEmission","drawStructures","_iteratorNormalCompletion19","_didIteratorError19","_iteratorError19","_step19","_iterator19","drawConnect","drawPlanet","drawBall","drawScore","drawBeamPower","mouseInput","mt","_iteratorNormalCompletion20","_didIteratorError20","_iteratorError20","_step20","_iterator20","reset","clickEmission","_iteratorNormalCompletion21","_didIteratorError21","_iteratorError21","_step21","_iterator21","emit","emitDirection","verticalAngleDeg","updateEmitters","_iteratorNormalCompletion22","_didIteratorError22","_iteratorError22","_step22","_iterator22","_iteratorNormalCompletion23","_didIteratorError23","_iteratorError23","_step23","_iterator23","removeEmitter","_iteratorNormalCompletion24","_didIteratorError24","_iteratorError24","_step24","_iterator24","createOverlayEmitter","_iteratorNormalCompletion25","_didIteratorError25","_iteratorError25","_step25","_iterator25","blastAttract","setLineDash","lineDashOffset","shadowBlur","shadowColor","score","fillStyle","font","fillText","blur","arc","fill","ellipse","sGrad","createLinearGradient","addColorStop","_iteratorNormalCompletion26","_didIteratorError26","_iteratorError26","_step26","_iterator26","_iteratorNormalCompletion27","_didIteratorError27","_iteratorError27","_step27","_iterator27","drawSegment","startBeamCharge","feedBeamCharge","_iteratorNormalCompletion28","_didIteratorError28","_iteratorError28","_step28","_iterator28","stop","drawBeamBlast","_iteratorNormalCompletion29","_didIteratorError29","_iteratorError29","_step29","_iterator29","_iteratorNormalCompletion30","_didIteratorError30","_iteratorError30","_step30","_iterator30","_iteratorNormalCompletion31","_didIteratorError31","_iteratorError31","_step31","_iterator31","numBlasts","_iteratorNormalCompletion32","_didIteratorError32","_iteratorError32","_step32","_iterator32","_iteratorNormalCompletion33","_didIteratorError33","_iteratorError33","_step33","_iterator33","createBlastEmitter","s1","s2","V","Alpha","Scale","App_PureCanvas","contextRef","contextRef2","React","PureCanvas","_this13","ref","node","ErrorBoundary","_this14","hasError","error","info","whiteSpace","componentStack","App","App_ErrorBoundary","App_OrbitGame","href","Boolean","location","hostname","match","ReactDOM","render","src_App_0","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.072825b7.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAJkSURBVHjaxJeJbusgEEW94S1L//83X18M2MSuLd2pbqc4wZGqRLrKBsyZhQHny7Jk73xVL8xpVhWrcmiB5lX+6GJ5YgQ2owbAm8oIwH1VgKZUmGcRqKGGPgtEQQAzGR8hQ59fAmhJHSAagigJ4E7GPWRXOYC6owAd1JM6wDQPADyMWUqZRMqmAojHp1Vn6EQQEgUNMJLnUjMyJsM49wygBkAPw9dVFwXRkncCIIW3GRgoTQUZn6HxCMAFEFd8TwEQ78X4rHbILoAUmeT+RFG4UhQ6MiIAE4W/UsYFjuVjAIa2nIY4q1R0GFtQWG3E84lqw2GO2QOoCKBVu0BAPgDSU0eUDjjQenNkV/AW/pWChhpMTelo1a64AOKM30vk18GzTHXCNtI/Knz3DFBgsUqBGIjTInXRY1yA9xkVoqW5tVq3pDR9A0hfF5BSARmVnh7RMDCaIdcNgbPBkgzn1Bu+SfIEFSpSBmkxyrMicb0fAEuCZrWnN89veA/4XcakrPcjBWzkTuLjlbfTQPOlBhz+HwkqqPXmPQDdrQItxE1moGof1S74j/8txk8EHhTQrAE8qlwfqS5yukm1x/rAJ9Jiaa6nyATqD78aUVBhFo8b1V4DdTXdCW+IxA1zB4JhiOhZMEWO1HqnvdoHZ4FAMIhV9REF8FiUm0jsYPEJx/Fm/N8OhH90HI9YRHesWbXXZwAShU8qThe7H8YAuJmw5yOd989uRINKRTJAhoF8jbqrHKfeCYdIISZfSq26bk/K+yO3YvfKrVgiwQBHnwt8ynPB25+M8hceTt/ybPhnryJ78+tLgAEAuCFyiQgQB30AAAAASUVORK5CYII=\"","import React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport styled from 'styled-components';\nimport Modal from 'react-modal';\n// import TweenMax from \"gsap/TweenMax\";\nimport _ from 'lodash';\nimport seedrandom from 'seedrandom';\nimport Proton from 'proton-js';\nimport Victor from 'victor';\nimport './App.css';\nimport particle from './particle.png';\n\n//global constants\nModal.setAppElement('#root')\nconst fps = 60;\nconst animInterval = 1000/fps;\nconst KEY = {\n  LEFT:  37,\n  RIGHT: 39,\n  UP: 38,\n  DOWN: 40,\n  A: 65,\n  D: 68,\n  W: 87,\n  S: 83,\n  SPACE: 32\n};\n\n//various utility\nfunction objectDistance(b1={x:0,y:0}, b2={x:0,y:0}) {\n  let v1 = new Victor(b1.x,b1.y);\n  let v2 = new Victor(b2.x,b2.y);\n  return v1.distance(v2);\n}\n\nfunction towardsBody(origin, target) {\n  //makes a vector to follow\n  if (origin&&target) {\n    let tx = (origin.x - target.x) / objectDistance(origin, target);\n    let ty = (origin.y - target.y) / objectDistance(origin, target);\n    return { x: tx, y: ty };\n  }\n}\n\nfunction getBearing(origin={x:0,y:0}, target={x:0,y:0}) {\n  let v= new Victor(target.x-origin.x,target.y-origin.y);\n  return (v.horizontalAngle()+Math.PI)\n}\n\nfunction shadeColor(color, rShade, gShade=rShade, bShade=rShade) {\n  var R = parseInt(color.substring(1,3),16);\n  var G = parseInt(color.substring(3,5),16);\n  var B = parseInt(color.substring(5,7),16);\n  R = parseInt(R * (100 + rShade) / 100);\n  G = parseInt(G * (100 + gShade) / 100);\n  B = parseInt(B * (100 + bShade) / 100);\n  R = (R<255)?R:255;\n  G = (G<255)?G:255;\n  B = (B<255)?B:255;\n  var RR = ((R.toString(16).length===1)?\"0\"+R.toString(16):R.toString(16));\n  var GG = ((G.toString(16).length===1)?\"0\"+G.toString(16):G.toString(16));\n  var BB = ((B.toString(16).length===1)?\"0\"+B.toString(16):B.toString(16));\n  return \"#\"+RR+GG+BB;\n}\n\nclass OrbitGame extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      screen: {\n        width: this.props.width,\n        height: this.props.height,\n        // dynWidth: window.innerWidth/2,\n        // dynHeight: window.innerHeight/2,\n        ratio: window.devicePixelRatio || 1,\n      },\n      starList: [\n        {name:\"Lalande\",num:5},{name:\"Tau Ceti\",num:4},{name:\"Groombridge\",num:2},{name:\"Alpha Centauri\",num:4},{name:\"Epsilon Eriadni\",num:7},{name:\"Procyon A\",num:0},{name:\"Procyon B\",num:1},{name:\"Ross 154\",num:3},{name:\"Barnard's Star\",num:8}\n      ],\n      world: {\n        stage: \"Sol\",\n        bodies: [],\n        pendingBodies: [],\n        //will externalize db stuff\n        bDatabase: {\n          Sol: [\n            {data: solData, parent: 0, index: 0, active: true, status: {\n              shield: 0,\n              uplink: 0,\n              buildings: [],\n            }},\n            {data: marsData, parent: 0, index: 1, active: true, status: {\n              shield: Math.floor(seedrandom(\"m1\".toString()).quick()*70+30),\n              uplink: Math.floor(seedrandom(\"m2\".toString()).quick()*70+30),\n              buildings: [],\n            }},\n            {data: venusData, parent: 0, index: 2, active: true, status: {\n              shield: Math.floor(seedrandom(\"v1\".toString()).quick()*70+30),\n              uplink: Math.floor(seedrandom(\"v2\".toString()).quick()*70+30),\n              buildings: [],\n            }},\n            {data: phobosData, parent: 1, index: 3, active: true, status: {}},\n            {data: earthData, parent: 0, index: 4, active: true, status: {\n              shield: Math.floor(seedrandom(\"e1\".toString()).quick()*70+30),\n              uplink: Math.floor(seedrandom(\"e2\".toString()).quick()*70+30),\n              buildings: [],\n            }},\n            {data: saturnData, parent: 0, index: 5, active: false, status: {\n              shield: Math.floor(seedrandom(\"s1\".toString()).quick()*70+30),\n              uplink: Math.floor(seedrandom(\"s2\".toString()).quick()*70+30),\n              buildings: [],\n            }},\n          ],\n          // AlphaCentauri: [],\n          // Wolf359: [],\n          // EpsilonEridani: [],\n        },\n        structures: [],\n        pendingStructures: [\n\n        ],\n        sDatabase: {\n          Sol: [\n            {data: rs1, openings: 1, index: 0, active: true, status: {}},\n            {data: rs2, openings: 4, index: 1, active: true, status: {}},\n            {data: rs3, openings: 0, index: 2, active: true, status: {}},\n            {data: rs4, openings: 8, index: 3, active: false, status: {}},\n          ]\n        }\n      },\n      params: {\n        gravFalloff: 0.9,\n        bounceDampening: 0.9,\n      },\n      ball: {\n        x: 190,\n        y: 210,\n        vx: 0.5,\n        vy: 0.5,\n        size: 6,\n        mass: 3,\n        speed: 0,\n        thrustAcc: 0.1,\n        thrustLevel: 0,\n        heading: 0,\n        power: 0,\n        coll: false,\n        ct: 0,\n        color: \"#E0EDFF\",\n        glow: 1,\n      },\n      resources: {\n        matter: 100,\n        mInc: 0,\n        energy: 1500,\n        eInc: 0,\n        psi: 100,\n        psiInc: 0,\n        psiFlux: 0,\n        psiChoir: 0,\n        hm: 0,\n      },\n      keys: {\n        left  : 0,\n        right : 0,\n        up    : 0,\n        down  : 0,\n        space : 0,\n        released: {\n          left  : false,\n          right : false,\n          up : false,\n          down: false,\n          space:false\n        }\n      },\n      mousedown: false,\n      mouseTick: 0,\n      mouseReleased: false,\n      mouseObj: {\n        x: 350,\n        y: 350,\n        init: false,\n      },\n      proton: {\n\n      },\n      selectedObj: null,\n      tick: 0,\n      ts: 0,\n      randomHash: 0,\n      currentScore: 0,\n      inGame: true,\n      showModal: false,\n    };\n    this.sharedEB = [];\n    this.animationID = null;\n    this.timerID = null;\n    this.handlePowerChange = this.handlePowerChange.bind(this);\n    this.handleChargePsi = this.handleChargePsi.bind(this);\n    this.psiBlast = 0;\n    this.beamBlast = 0;\n    this.beamPhase = 0;\n    this.handlePlanetBuild = this.handlePlanetBuild.bind(this);\n    this.handleSystemChange = this.handleSystemChange.bind(this);\n    // this.handleCanvasClick = this.handleCanvasClick.bind(this);\n    this.handlePlanetToggle = this.handlePlanetToggle.bind(this);\n    this.handleStructureToggle = this.handleStructureToggle.bind(this);\n    this.handlePauseStart=this.handlePauseStart.bind(this);\n    this.handleKeys=this.handleKeys.bind(this);\n    this.mouseupHandler = this.mouseupHandler.bind(this);\n    this.mousedownHandler = this.mousedownHandler.bind(this);\n    this.mousemoveHandler = this.mousemoveHandler.bind(this);\n    this.handleOpenModal = this.handleOpenModal.bind(this);\n    this.handleCloseModal = this.handleCloseModal.bind(this);\n  }\n\n  //user interface\n  makeMapInterface(ui) {\n    const starTravelList = [...this.state.starList];\n    starTravelList.push({name:'Sol',num:6})\n    return starTravelList.map(\n      (star) =>\n      <StarButton onClick={this.handleSystemChange} star={star.name} ui={ui} key={star.name}/>\n    )\n  }\n\n  makeControlButtons() {\n    const pauseButton = this.state.inGame ?\n    <Button onClick={this.handlePauseStart} style={{ backgroundColor: 'red' }} text=\"Pause\" key={\"Pause\"}/> :\n    <Button onClick={this.handlePauseStart} text=\"Continue\" key={\"Pause\"}/>;\n    const sparkleButton = <Button onClick={this.handleChargePsi} style={{ backgroundColor: '#4666FF' }} text={`Psi blasts: ${this.state.resources.psi}`} key={\"Psi\"}/>;\n    const chargeButton = <Button onClick={this.handlePowerChange} style={{ backgroundColor: '#E0115F' }} text={`Energy: ${this.state.resources.energy} (click to charge)`} key={\"Energy\"}/>;\n    return [pauseButton, sparkleButton, chargeButton]\n  }\n\n  selectOnCanvas(pos) {\n    const bodies = [...this.state.world.bodies];\n    for (let body of bodies) {\n      if (objectDistance(pos, body) < body.size*1.5) {\n        // console.log(body.name)\n        return this.setState((prevState) => {\n          return {\n            selectedObj: body,\n          }\n        });\n      }\n    }\n  }\n\n  //handlers\n  handlePowerChange() {\n    this.setState((prevState) => {\n      return {\n        currentScore: 0,\n        resources: {\n          ...prevState.resources,\n          energy: prevState.resources.energy + prevState.currentScore*10,\n        },\n      }\n    });\n  }\n\n  // handleCanvasClick(e) {\n  //\n  // }\n\n  handleChargePsi() {\n    let psi = this.state.resources.psi;\n    this.psiBlast += 2;\n    return this.setState({ resources: {...this.state.resources, psi: psi-1}});\n  }\n\n  handlePlanetBuild(type, e) {\n    const bodies = this.state.world.bodies;\n    let p = e.target.id;\n    let target = bodies.find( b => b.name === p );\n    switch (type) {\n      case 0: {\n        target.status.shield++\n        break;\n      }\n      case 1: {\n        if (this.state.resources.matter>5) {\n        target.status.buildings[type] ?\n        target.status.buildings[type].lvl++:\n        target.status.buildings[type] = {\n          name: 'Power grid',\n          lvl: 1,\n        };\n        this.setState({ resources: {...this.state.resources, eInc: this.state.resources.eInc+1, matter: this.state.resources.matter-5}});\n        }\n        break;\n      }\n      case 2: {\n        if (this.state.resources.matter>10) {\n        target.status.buildings[type] ?\n        target.status.buildings[type].lvl++:\n        target.status.buildings[type] = {\n          name: 'Ansible',\n          lvl: 1,\n        };\n        this.setState({ resources: {...this.state.resources, psiInc: this.state.resources.psiInc+1, matter: this.state.resources.matter-10}});\n        }\n        break;\n      }\n      case 3: {\n        if (this.state.resources.matter>5) {\n        target.status.buildings[type] ?\n        target.status.buildings[type].lvl++:\n        target.status.buildings[type] = {\n          name: 'Choir relay',\n          lvl: 1,\n        };\n        this.setState({ resources: {...this.state.resources, psiChoir: this.state.resources.psiChoir+1, matter: this.state.resources.matter-5}});\n        }\n        break;\n      }\n      default: {\n        console.log(\"No such building: \" + type)\n        break;\n      }\n    };\n  }\n\n  handleKeys(value, e) {\n    let keys = {...this.state.keys};\n    let key_update = false;\n    if(e.keyCode === KEY.LEFT   || e.keyCode === KEY.A) {\n      keys.released.left = !value&&keys.left\n      keys.left  = value?keys.left+1:0\n      key_update = key_update||(keys.left||keys.released.left)\n    }\n    if(e.keyCode === KEY.DOWN   || e.keyCode === KEY.S) {\n      keys.released.down = !value&&keys.down\n      keys.down  = value?keys.down+1:0\n      key_update = key_update||(keys.down||keys.released.down)\n    }\n    if(e.keyCode === KEY.RIGHT  || e.keyCode === KEY.D) {\n      keys.released.right = !value&&keys.right\n      keys.right  = value?keys.right+1:0\n      key_update = key_update||(keys.right||keys.released.right)\n    }\n    if(e.keyCode === KEY.UP     || e.keyCode === KEY.W) {\n      keys.released.up = !value&&keys.up\n      keys.up  = value?keys.up+1:0\n      key_update = key_update||(keys.up||keys.released.up)\n    }\n    if(e.keyCode === KEY.SPACE) {\n      keys.released.space = !value&&keys.space\n      keys.space  = value?keys.space+1:0\n      key_update = key_update||(keys.space||keys.released.space)\n    }\n    //set state only if differs from current!\n    if (key_update) {\n      this.setState({ keys: keys });\n    }\n  }\n\n  mousedownHandler(e) {\n    let _x = e.nativeEvent.layerX;\n    let _y = e.nativeEvent.layerY;\n    this.setState((prevState) => {\n      return {\n        mousedown: true,\n        mouseObj: {\n          x: _x,\n          y: _y,\n        },\n      }\n    });\n    this.selectOnCanvas({x:_x,y:_y});\n  }\n\n  beamBlastPower() {\n    const beam = this.state.beamBlast;\n    if (!beam) {\n      if (this.state.mousedown&&this.state.mouseTick===1) {\n        //start charge mode\n        console.log('start charge mode')\n        return this.setState((prevState) => {\n          return {\n            beamBlast: 1,\n            beamPhase: 1\n          }\n        });\n      } else {\n        if (this.state.beamPhase) {\n          return this.setState({ beamPhase: 0 })\n        }\n        return\n      }\n    } else if (beam>0) {\n      if (this.state.mouseReleased) {\n        //destroy segment/s here\n\n        //switch to blast mode\n        console.log('switch to blast mode')\n        return this.setState({ beamBlast: beam*-1, beamPhase: 3 })\n      }\n      else {\n        //continue charge mode\n        if (beam<50&&this.state.mouseTick%4===0) {\n          // console.log(beam)\n          return this.setState({ beamBlast: beam+1, beamPhase: 2 })\n        }\n      }\n    } else {\n      //continue blast mode\n      return this.setState({ beamBlast: beam+1, })\n    }\n  }\n\n  mouseupHandler(e) {\n    return this.setState({ mousedown: false });\n  }\n\n  mousemoveHandler(e) {\n    if (this.state.mousedown&&this.state.mouseTick%4===0) {\n      let _x = e.nativeEvent.layerX;\n      let _y = e.nativeEvent.layerY;\n      return this.setState({ mouseObj: {x:_x,y:_y} });\n    }\n  }\n\n  handleOpenModal () {\n    return this.setState({ showModal: true });\n  }\n  handleCloseModal () {\n    return this.setState({ showModal: false });\n  }\n  handleSystemChange(e) {\n    let target = e.target.id;\n    return this.systemChange(target);\n  }\n  handlePlanetToggle(e) {\n    let p = e.target.id;\n    return this.planetToggle(p);\n  }\n  handleStructureToggle(e) {\n    let s = e.target.id;\n    return this.structureToggle(s);\n  }\n\n  //generating stuff\n  async genSysPlanets(name=\"Alpha Centauri\", num=3) {\n    const bDatabase = {...this.state.world.bDatabase};\n    if (!bDatabase[name]) {\n      let system = [];\n      let rngData = rngBody(name, \"star\");\n      let star = {\n        data: {...rngData}, index: 0, parent: 0, active: false, status:  {\n          buildings: [],\n        },\n      }\n      system.push(star);\n      for (let i=1;i<num+1;i++) {\n        let parent = Math.floor(seedrandom(i.toString()).quick()*(i/num)*4);\n        let rngData = rngBody(name+\" \"+i.toString(), \"planet\", 1/(parent/2+1));\n        //smaller scale for outlying moons\n        // console.log(rngData);\n        let planet = {\n          data: {...rngData}, index: i, parent: parent, active: false, status: {\n            shield: Math.floor(seedrandom(\"s\"+i.toString()).quick()*70+30),\n            uplink: Math.floor(seedrandom(\"u\"+i.toString()).quick()*70+30),\n            buildings: [],\n          },\n        };\n        system.push(planet);\n      }\n      return system;\n    }\n    else { return null }\n  }\n\n  async genSysStructures(name=\"Alpha Centauri\", num=4) {\n    const sDatabase = {...this.state.world.sDatabase};\n    if (!sDatabase[name]) {\n      let sysStruct = [];\n      for (let i=0;i<num;i++) {\n        let rngData = rngStruct(name+\" \"+i.toString());\n        let struct = {data: {...rngData}, index: i, openings: 1, active: false};\n        sysStruct.push(struct);\n      }\n      return sysStruct;\n    }\n    else { return null }\n  }\n\n  async createGalaxy(starlist=[{name:\"Wolf 359\",num:6},{name:\"Tau Ceti\",num:4},{name:\"Groombridge\",num:1}]) {\n    // console.log(starlist)\n    const bDatabase = {...this.state.world.bDatabase};\n    const sDatabase = {...this.state.world.sDatabase};\n    for (let n of starlist) {\n      let system = await this.genSysPlanets(n.name,n.num);\n      let sysStruct = await this.genSysStructures(n.name,3);\n      bDatabase[n.name] = system;\n      sDatabase[n.name] = sysStruct;\n    }\n    return this.setState((prevState) => {\n      return {\n        world: {\n          ...prevState.world,\n          bDatabase: bDatabase,\n          sDatabase: sDatabase,\n        }\n      }\n    });\n  }\n\n  loadStagePlanets(stage) {\n    const pending = [];\n    const bDatabase = {...this.state.world.bDatabase};\n    const db = bDatabase[stage];\n    const dbplanets = db.slice(1);\n    //the active check doesn't fit the rest of the logic, gotta change something\n    if (dbplanets) {\n      for (let planet of dbplanets) {\n        if (planet.active&&db[planet.parent].active) {\n          pending.push(planet);\n        }\n      };\n    }\n    this.setState((prevState) => {\n      return {\n        world: {\n          ...prevState.world,\n          pendingBodies: pending,\n          stage: stage,\n        }\n      }\n    });\n  }\n\n  loadStageStructures(stage) {\n    const pending = [];\n    const sDatabase = {...this.state.world.sDatabase};\n    const db = sDatabase[stage];\n    if (db) {\n      for (let struct of db) {\n        // console.log(struct)\n        if (struct.active) {\n          pending.push(struct);\n        }\n      };\n    }\n    this.setState((prevState) => {\n      return {\n        world: {\n          ...prevState.world,\n          structures: [],\n          pendingStructures: pending,\n        }\n      }\n    });\n  }\n\n  async loadStage(stage=\"Sol\") {\n    await this.createPrimary(this.state.world.bDatabase[stage][0].data);\n    this.loadStagePlanets(stage);\n    this.loadStageStructures(stage);\n    this.addCoreEmitter();\n    return this.continueGame();\n  }\n\n  //moving around the galaxy\n  systemChange(target) {\n    const currStage = this.state.world.stage;\n    const bDatabase = {...this.state.world.bDatabase};\n    const sDatabase = {...this.state.world.sDatabase};\n    const bdb = bDatabase[currStage];\n    const sdb = sDatabase[currStage];\n    const bdb2 = bDatabase[target];\n    const sdb2 = sDatabase[target];\n    for (let b of bdb) {\n      b.active = false;\n    }\n    if (sdb) {\n      for (let s of sdb) {\n        s.active = false;\n      }\n    }\n    for (let b of bdb2) {\n      b.active = true;\n    }\n    if (sdb2) {\n      for (let s of sdb2) {\n        s.active = true;\n      }\n    }\n    this.setState((prevState) => {\n      return {\n        // inGame: 'loading',\n        world: {\n          ...prevState.world,\n          bDatabase: bDatabase,\n          sDatabase: sDatabase,\n        },\n        ball: {\n          ...prevState.ball,\n          x: prevState.screen.width/4,\n          y: prevState.screen.height/3\n        }\n      }\n    });\n    this.loadStage(target);\n    // console.log(target);\n  }\n\n  async createPrimary(data) {\n    const star = new Body(data);\n    star.index = 0;\n    star.status = {\n      shield: 0,\n      uplink: 0,\n      buildings: [],\n    };\n    const bodies = [];\n    bodies.push(star);\n    return this.setState((prevState) => {\n      return {\n        world: {\n          ...prevState.world,\n          bodies: bodies,\n          stage: data.name,\n        }\n      }\n    });\n  }\n\n  //planet and star make/toggle\n  createPlanet(data=null,parent=0,index=this.state.world.bodies.length,em=null,status=null) {\n    const bodies = [...this.state.world.bodies];\n    bodies[index] = new Body(data,bodies[parent]);\n    bodies[index].index = index;\n    bodies[index].emitter = this.createNewEmitter(em);\n    // bodies[index].blastEmitter = this.createBlastEmitter(0,bodies[index].size,1.5,0.1,bodies[index].x,bodies[index].y,null);\n    bodies[index].status = status||\n    {\n      shield: 5,\n      uplink: 100,\n      buildings: [],\n    }\n    ;\n    this.setState((prevState) => {\n      return {\n        world: {\n          ...prevState.world,\n          bodies: bodies,\n        }\n      }\n    });\n  }\n\n  updatePlanets() {\n    const pending = [...this.state.world.pendingBodies];\n    for (let i=0;i<pending.length;i++) {\n      let p = pending.splice(0,1)[0];\n      if (!p.em) {\n        p.em = { target: p.index, e: 600, color1: shadeColor(p.data.hue,80), rate1: 6, rate2: 1.5, velocity: 1.5, damp: 0.007, life: 7, mass: 5 };\n      }\n      this.createPlanet(p.data,p.parent,p.index,p.em||null,p.status||null);\n    }\n    this.setState((prevState) => {\n      return {\n        world: {\n          ...prevState.world,\n          pendingBodies: pending,\n        }\n      }\n    });\n  }\n\n  planetToggle(p) {\n    // let p = e.target.id;\n    const bodies = [...this.state.world.bodies];\n    const planets = bodies.slice(1);\n    const stage = this.state.world.stage;\n    const bDatabase = {...this.state.world.bDatabase};\n    const db = bDatabase[stage];\n    const target = db.find( b => b.data.name === p );\n    if (!target.active&&bodies[target.parent]) {\n      db[target.index].active = true;\n      const pending = [...this.state.world.pendingBodies];\n      pending.push(target);\n      this.setState((prevState) => {\n        return {\n          world: {\n            ...prevState.world,\n            pendingBodies: pending,\n            bDatabase: bDatabase\n          }\n        }\n      });\n    }\n    else if (target.active) {\n      //disables any active children. but the star is exempt even if it's its own parent by default\n      for (let body of planets) {\n        if (body&&body.parent===bodies[target.index]) {\n          let i = body.index;\n          db[i].active = false;\n          bodies[i] = null;\n        }\n      }\n      db[target.index].active = false;\n      bodies[target.index] = null;\n      this.setState((prevState) => {\n        return {\n          world: {\n            ...prevState.world,\n            bodies: bodies,\n            bDatabase: bDatabase,\n          }\n        }\n      });\n    }\n  }\n\n  //structure make/toggle\n  createStructure(data=null,openings=0,index=this.state.world.structures.length) {\n    const structures = [...this.state.world.structures];\n    structures[index] = new ringStructure(data);\n    structures[index].addSegments(openings);\n    structures[index].index = index;\n    // console.log(structures[index])\n    this.setState((prevState) => {\n      return {\n        world: {\n          ...prevState.world,\n          structures: structures,\n        }\n      }\n    });\n  }\n\n  updateStructures() {\n    const ps = [...this.state.world.pendingStructures];\n    const structures = [...this.state.world.structures];\n    for (let i=0;i<ps.length;i++) {\n      let p = ps.pop()\n      // console.log(p.data)\n      structures[p.index] = new ringStructure(p.data);\n      structures[p.index].addSegments(p.openings);\n      structures[p.index].index = p.index;\n    }\n    this.setState((prevState) => {\n      return {\n        world: {\n          ...prevState.world,\n          structures: structures,\n          pendingStructures: ps,\n        }\n      }\n    });\n  }\n\n  structureToggle(s) {\n    const structures = [...this.state.world.structures];\n    const stage = this.state.world.stage;\n    const sDatabase = {...this.state.world.sDatabase};\n    const db = sDatabase[stage];\n    const target = db.find( struct => struct.data.name === s );\n    // console.log(structures)\n    if (!target.active) {\n      db[target.index].active = true;\n      const pending = [...this.state.world.pendingStructures];\n      pending.push(target);\n      this.setState((prevState) => {\n        return {\n          world: {\n            ...prevState.world,\n            pendingStructures: pending,\n            sDatabase: sDatabase,\n          }\n        }\n      });\n    } else if (target.active) {\n      db[target.index].active = false;\n      structures[target.index] = null;\n      this.setState((prevState) => {\n        return {\n          world: {\n            ...prevState.world,\n            structures: structures,\n            sDatabase: sDatabase,\n          }\n        }\n      });\n    }\n  }\n\n  //proton stuff\n  defineEB() {\n    this.sharedEB.borderZoneBehaviour = new Proton.CrossZone(new Proton.RectZone(0, 0, this.state.screen.width, this.state.screen.height), 'bound');\n    this.sharedEB.randomBehaviour = new Proton.RandomDrift(5, 5, .05);\n    const centerZone = this.state.world.bodies[0]?{\n      x: this.state.world.bodies[0].x,\n      y: this.state.world.bodies[0].y,\n    }:{\n      x: 350,\n      y: 350,\n    }\n    // console.log(centerZone);\n    this.sharedEB.centerBehaviour = new Proton.Repulsion(centerZone, 30, this.state.world.bodies[0]?this.state.world.bodies[0].size*2:30)\n    return this.sharedEB\n  }\n\n  createNewEmitter({target=null, color1=null, color2=null, mass=5, radius=1, velocity=2.5, rate1=20, rate2=0.5, damp=0.005, e='once', life=5, planetAttraction=true, x=350, y=350, a=0, b=360}={}, special=false) {\n    let emitter = new Proton.Emitter();\n    emitter.e = e;\n    emitter.damping = damp;\n    emitter.rate = new Proton.Rate(rate1, rate2);\n    emitter.addInitialize(emitter.rate);\n    emitter.addInitialize(new Proton.Mass(mass));\n    emitter.addInitialize(new Proton.Radius(radius));\n    if (life) { emitter.addInitialize(new Proton.Life(life)) }\n    emitter.currVelocity = new Proton.Velocity(velocity*1.5, new Proton.Span(a, b), 'polar');\n    // emitter.currVelocity = new Proton.Velocity(velocity*1.5, 360, 'polar');\n    emitter.addInitialize(emitter.currVelocity);\n    let c = color1?(new Proton.Color(color1, color2||color1)):(new Proton.Color('random'));\n    emitter.addBehaviour(c);\n    // let borderZoneBehaviour = new Proton.CrossZone(new Proton.RectZone(0, 0, this.state.screen.width, this.state.screen.height), 'bound');\n    if (this.sharedEB.borderZoneBehaviour) { emitter.addBehaviour(this.sharedEB.borderZoneBehaviour) }\n    // let randomBehaviour = new Proton.RandomDrift(5, 5, .05);\n    // emitter.addBehaviour(randomBehaviour);\n    if (this.sharedEB.randomBehaviour) { emitter.addBehaviour(this.sharedEB.randomBehaviour) }\n    // let rect = new Proton.RectZone(this.state.screen.width/2,this.state.screen.height/2,this.state.world.bodies[0].size);\n    // let centerZone = {\n    //   x: this.state.world.bodies[0].x||350,\n    //   y: this.state.world.bodies[0].y||350,\n    // }\n    // let centerBehaviour = new Proton.Repulsion(centerZone, 30, this.state.world.bodies[0].size*2)\n    // emitter.addBehaviour(centerBehaviour);\n    if (this.sharedEB.centerBehaviour) { emitter.addBehaviour(this.sharedEB.centerBehaviour) }\n    if (special==='core') {\n      emitter.coreAttraction = new Proton.Attraction(this.state.world.bodies[0], 10, 500);\n      emitter.addBehaviour(emitter.coreAttraction);\n    } else if (special==='psi') {\n      emitter.planetAttraction = new Proton.Attraction(this.state.world.bDatabase[this.state.world.stage][target].data, 10, 500);\n      emitter.addBehaviour(emitter.planetAttraction);\n    } else if (planetAttraction&&target!==null) {\n      emitter.planetAttraction = new Proton.Attraction(this.state.world.bDatabase[this.state.world.stage][target].data, 10, 500);\n      emitter.addBehaviour(emitter.planetAttraction);\n    }\n    emitter.target = target||0;\n    if (target) {\n      //proper initialization TBD\n      emitter.mouseAttract = new Proton.Attraction(this.state.mouseObj, 5, 200);\n      emitter.addBehaviour(emitter.mouseAttract);\n      emitter.p.x = x;\n      emitter.p.y = y;\n    };\n    if (!target) {\n      emitter.mouseAttract = new Proton.Attraction(this.state.mouseObj, 5, 200);\n      emitter.addBehaviour(emitter.mouseAttract);\n      emitter.p.x = x;\n      emitter.p.y = y;\n    };\n    // console.log(emitter.behaviours);\n    return emitter;\n  }\n\n  makePsiEmitter() {\n    this.setState((prevState) => {\n      return {\n        proton: {\n          ...prevState.proton,\n          psiEmitter: this.createNewEmitter({ e: 'once', color1: '#6699FF', color2: '#FFDDFF', rate1: 50, rate2: 0.01, velocity: 1, mass: 8, radius: 1, damp: 0.009, life: (1,5), special:'psi'}),\n        }\n      }\n    });\n  }\n\n  addCoreEmitter() {\n    this.setState((prevState) => {\n      return {\n        proton: {\n          ...prevState.proton,\n          coreEmitter: this.createNewEmitter({target:0, special:'core', e: 2, color1: shadeColor(this.state.world.bodies[0].hue,40,-10,-10), rate1: 6, rate2: 0.6, velocity: 1.8, damp: 0.014, life: 20, mass: 15, radius: 4, planetAttraction: true, a:_.random(-330,-30)+30, b:_.random(30,330)-30 }),\n        }\n      }\n    });\n  }\n\n  emitterParticleCheck(emitter=this.state.proton.psiEmitter,target=this.state.world.bodies[0],sample=16) {\n    let length = emitter.particles.length;\n    let centerBehaviour = new Proton.Repulsion(this.state.world.bodies[0], 60, this.state.world.bodies[0].size*15)\n    if (length>sample) {\n      for (let i=0;i<(length/sample)-1;i++) {\n        let particle = emitter.particles[length-(i*sample+1)];\n        // console.log(particle);\n        if (!particle.dead&&(objectDistance(particle.p,target)<target.size*5)) {\n          // let repulsion = particle.behaviours.find( b => b.name === \"Repulsion\" );\n          // repulsion.reset(this.state.world.bodies[0], 100, 100)\n          // let color = particle.behaviours.find( b => b.name === \"Color\" );\n          // let solar = particle.behaviours.find( b => b.name === \"Attraction\" && (b.targetPosition instanceof Body) );\n          // particle.removeBehaviour(solar);\n          // particle.removeBehaviour(color)\n          // particle.removeAllBehaviours();\n          particle.addBehaviour(new Proton.Color('#59FF98', '#49FF88'))\n          particle.mass*=2;\n          particle.energy*=2;\n          particle.addBehaviour(centerBehaviour)\n          this.setState({ resources: {...this.state.resources, matter: this.state.resources.matter+1} });\n        }\n      }\n    }\n  }\n\n  //motion stuff\n  thrustInput() {\n    let tx = 0;\n    let ty = 0;\n    if (this.state.keys.up) {\n      ty -= this.state.ball.thrustAcc*Math.pow(this.state.keys.up, 0.3)*1.5;\n    }\n    if (this.state.keys.down) {\n      ty += this.state.ball.thrustAcc*Math.pow(this.state.keys.down, 0.3)*1.5;\n    }\n    if (this.state.keys.left) {\n      tx -= this.state.ball.thrustAcc*Math.pow(this.state.keys.left, 0.3)*1.5;\n    }\n    if (this.state.keys.right) {\n      tx += this.state.ball.thrustAcc*Math.pow(this.state.keys.right, 0.3)*1.5;\n    }\n    return [tx, ty]\n  }\n\n  borderCollision(object) {\n    const bounce = this.state.params.bounceDampening*0.7;\n    const width = this.state.screen.width\n    const height = this.state.screen.height\n    if (object.x+object.vx > width - object.size || object.x+object.vx < object.size) {\n      // if (object.x+object.vx<width/-10||object.x+object.vx>width*1.1) {\n      //   //return from OOB\n      //   console.log('OOB X')\n      //   this.setState((prevState) => {\n      //     return {\n      //       ball: {\n      //         ...prevState.ball,\n      //         x: (object.x+object.vx)>0?width*Math.sqrt(bounce):width/5*(1+bounce/5),\n      //         y: (object.y+object.vy)>0?height*Math.sqrt(bounce):height/5*(1+bounce/5),\n      //         vx: prevState.vx*0.05,\n      //         vy: prevState.vy*0.05,\n      //       }\n      //     }\n      //   });\n      // }\n      return [-1, 1]\n    }\n    if (object.y+object.vy > height - object.size || object.y+object.vy < object.size) {\n      // if (object.y+object.vy<height/-10||object.y+object.vy>height*1.1) {\n      //   //return from OOB\n      //   console.log('OOB Y')\n      //   this.setState((prevState) => {\n      //     return {\n      //       ball: {\n      //         ...prevState.ball,\n      //         x: (object.x+object.vx)>0?width*Math.sqrt(bounce):width/5*(1+bounce/5),\n      //         y: (object.y+object.vy)>0?height*Math.sqrt(bounce):height/5*(1+bounce/5),\n      //         vx: prevState.vx*0.05,\n      //         vy: prevState.vy*0.05,\n      //       }\n      //     }\n      //   });\n      // }\n      return [1, -1]\n    }\n    return [1, 1]\n  }\n\n  ballGravPull(object, targets) {\n    let gx = 0;\n    let gy = 0;\n    for (let body of targets) {\n      if (body) {\n        let dist = objectDistance(object, body);\n        gx += body.mass*towardsBody(object, body).x/Math.pow(dist * this.state.params.gravFalloff, 2);\n        gy += body.mass*towardsBody(object, body).y/Math.pow(dist * this.state.params.gravFalloff, 2);\n      }\n    }\n    return [-gx, -gy]\n  }\n\n  structCollisionCheck() {\n    let ball = this.state.ball;\n    let angle = (Victor(ball.x-this.props.width/2, ball.y-this.props.height/2).horizontalAngle()+Math.PI*2)%(Math.PI*2);\n    // let coll = false;\n    let structures = [...this.state.world.structures]\n    for (let struct of this.state.world.structures) {\n      if (struct && objectDistance(ball,struct.origin) > struct.radius-struct.width/2-ball.size && objectDistance(ball,struct.origin) < struct.radius+struct.width/2+ball.size) {\n        // let arcLength = (((struct.segments[0].bc-struct.segments[0].ac)*struct.dir+Math.PI*3)%(Math.PI*2)-Math.PI);\n        let arcLength = struct.arcLength;\n        for (let seg of struct.segments) {\n          let angleDiff = struct.speed>0?\n          ((angle-seg.ac)+Math.PI*3)%(Math.PI*2)-Math.PI:\n          (-(angle+seg.bc)+Math.PI*3)%(Math.PI*2)-Math.PI;\n          if (seg.health>0&&((angleDiff>0&&angleDiff<arcLength)||(angleDiff<0&&angleDiff>Math.PI-arcLength))) {\n            // console.log('hit');\n            seg.health--;\n            if (seg.health===0) {\n              seg.health = -6;\n              console.log('segment disabled!')\n            }\n            return this.structCollState(struct.index);\n          }\n        }\n      }\n    }\n    //still run it to reset state if needed\n    return this.structCollState(false);\n  }\n\n  structCollState(coll) {\n    const bounce = this.state.params.bounceDampening*0.8;\n    if (coll!==false) {\n      //collision continues, increment tick:\n      if (this.state.ball.coll!==false) {\n        if (this.state.tick%3===0) {\n          this.setState((prevState) => {\n            return {\n              ball: {\n                ...prevState.ball,\n                ct: prevState.ball.ct+1,\n              }\n            }\n          })\n          return  [1*(1+this.state.ball.ct/10)*bounce,1*(1+this.state.ball.ct/10)*bounce]\n        }\n        return [1, 1]\n      } else {\n        //collision begins:\n        this.setState((prevState) => {\n          return {\n            ball: {\n              ...prevState.ball,\n              coll: coll,\n              ct: 1,\n            }\n          }\n        })\n        return [-1*bounce,-1*bounce]\n      }\n    }\n    //\"NO COLLISION! Fake News!\" - Donald J. Trump\n    else {\n      if (this.state.ball.coll!==false) {\n        this.setState((prevState) => {\n          return {\n            ball: {\n              ...prevState.ball,\n              coll: false,\n              ct: 0,\n            }\n          }\n        })\n      }\n      return [1, 1]\n    }\n  }\n\n  planetMotion() {\n    const bodies = [...this.state.world.bodies];\n    //apply a pulling force, costs energy\n    if (this.state.mousedown && this.state.resources.energy > 0 && this.state.mouseTick%2===0) {\n      for (let planet of bodies) {\n        if (planet) {\n          // planet.getsPulled(10, this.state.mouseObj, this.state.mouseTick)\n        }\n      }\n      this.setState({ resources: {...this.state.resources, energy: this.state.resources.energy-1} });\n    };\n    //normal motion\n    for (let planet of bodies) {\n      if (planet) {\n        if (planet.speed!==0&&planet.type!=='star') {\n          planet.movePlanet();\n        }\n        let otherBodies = bodies.filter(item => item !== planet);\n        for (let body of otherBodies) {\n          if (body) {\n            //have to think about handling it better\n            if (objectDistance(planet, body)*0.95 < body.size + planet.size) {\n              this.planetCollision(planet, body, 2);\n            }\n          }\n        }\n      }\n    };\n  }\n\n  planetCollision(origin, body, type) {\n    if (type === 1) {\n      const bounce = this.state.params.bounceDampening;\n      if (objectDistance(origin, body)*0.95 < body.size + origin.size) {\n        this.setState((prevState) => {\n          return {\n            currentScore: prevState.currentScore + 1,\n            resources: {\n              ...prevState.resources,\n              matter: prevState.resources.matter+1,\n            },\n            // ball: {\n            //   ...prevState.ball,\n            // x: prevState.ball.x-(prevState.ball.vx * bounce*0.5),\n            // y: prevState.ball.y-(prevState.ball.vy * bounce*0.5),\n            // vx: -prevState.ball.vx * this.state.params.bounceDampening,\n            // vy: -prevState.ball.vy * this.state.params.bounceDampening,\n          }\n\n        })\n        return [-1*bounce, -1*bounce]\n      }\n      return [1, 1]\n    } else if (type === 2 && objectDistance(origin, body)*0.96 < body.size + origin.size) {\n      //remake this to only check once\n      return this.setState((prevState) => {\n        let bodies = [...prevState.world.bodies];\n        let b = bodies[bodies.indexOf(body)];\n        let o = bodies[bodies.indexOf(origin)];\n        if (o.speed) {\n          //adds more deviation from the orbit depending on collision tick\n          o.dx += towardsBody(origin, body).x*(o.coll*o.size/8)*(b.mass/o.mass);\n          o.dy += towardsBody(origin, body).y*(o.coll*o.size/8)*(b.mass/o.mass);\n          o.coll += 2;\n        }\n        // TBD\n        // if (b.speed) {\n        // }\n        return {\n          resources: {\n            ...prevState.resources,\n            matter: prevState.resources.matter+1,\n          },\n          bodies: bodies,\n        }\n      });\n    }\n  }\n\n  ballCheckPlanets() {\n    const bodies = this.state.world.bodies;\n    const ball = this.state.ball;\n    let pcx = 0;\n    let pcy = 0;\n    for (let body of bodies) {\n      if (body) {\n        let [cx,cy] = this.planetCollision(ball, body, 1)\n        if (cx!==1||cy!==1) {\n          pcx += cx\n          pcy += cy\n        }\n      }\n    }\n    if (pcx||pcy) {\n      return [pcx,pcy]\n    }\n    return [1,1]\n  }\n\n  moveBall() {\n    const ball = this.state.ball;\n    const bodies = this.state.world.bodies;\n    const bounce = this.state.params.bounceDampening;\n    let g = this.ballGravPull(ball, bodies);\n    let t = this.thrustInput();\n    let tl = (t[0]||t[1])?Math.sqrt(Math.pow(Math.abs(t[0]),2)+Math.pow(Math.abs(t[1]),2)):0\n    let vx = this.state.ball.vx+g[0]+t[0];\n    let vy = this.state.ball.vy+g[1]+t[1];\n    let bc = this.borderCollision(ball);\n    if (bc[0]!==1||bc[1]!==1) {\n      //bounce off borders first\n      vx *= -1*bounce*0.5;\n      vy *= -1*bounce*0.5;\n      let speed = objectDistance(ball, {x: vx, y:vy});\n      return this.setState((prevState) => {\n        return {\n          ball: {\n            ...prevState.ball,\n            x: _.clamp(prevState.ball.x, 0, prevState.screen.width) + vx,\n            y: _.clamp(prevState.ball.y, 0, prevState.screen.height) + vy,\n            vx: vx,\n            vy: vy,\n            speed: speed,\n            thrustLevel: tl?tl:prevState.ball.thrustLevel?Math.floor(prevState.ball.thrustLevel*100)/101:0,\n          }\n        }\n      })\n    }\n    else {\n      // let sc = [1,1];\n      let sc = this.structCollisionCheck();\n      let scx = sc[0]===1?0:sc[0]\n      let scy = sc[1]===1?0:sc[1]\n      // let pc = [1,1];\n      let pc = this.ballCheckPlanets();\n      let pcx = pc[0]===1?0:pc[0]\n      let pcy = pc[1]===1?0:pc[1]\n      //this is so messy, have to return 0s for no collision and check if true\n      if (scx&&pcx) {\n        vx *= -sc[0]*pc[0];\n        vy *= -sc[1]*pc[1];\n      } else {\n        vx *= sc[0]*pc[0];\n        vy *= sc[1]*pc[1];\n      }\n      let speed = objectDistance(ball, {x: vx, y:vy});\n      return this.setState((prevState) => {\n        return {\n          ball: {\n            ...prevState.ball,\n            // will rewrite this completely\n            x: prevState.ball.x + vx + (prevState.ball.vx/4)*(scx)+(prevState.ball.vx/4)*(pcx),\n            y: prevState.ball.y + vy + (prevState.ball.vy/4)*(scy)+(prevState.ball.vy/4)*(pcy),\n            vx: vx,\n            vy: vy,\n            speed: speed,\n            thrustLevel: tl?tl:prevState.ball.thrustLevel?Math.floor(prevState.ball.thrustLevel*100)/101:0,\n          }\n        }\n      })\n    }\n  }\n\n  economyUpdate() {\n    //increment resources from buildings here, etc\n    const res = {...this.state.resources}\n    if (this.state.tick%20===0) {\n      res.matter += res.mInc;\n      res.energy += res.eInc;\n      res.psi += res.psiInc;\n      res.psiFlux += res.psiChoir;\n      this.setState({ resources: res});\n    }\n  }\n\n  handlePauseStart() {\n    if (this.state.inGame === false) {\n      this.continueGame();\n      console.log(\"continue\");\n    } else if (this.state.inGame === true) {\n      this.stopGame();\n      console.log(\"pause\");\n    }\n  }\n\n  //primary logic loop\n  continueGame() {\n    requestAnimationFrame((t) => {this.update(t)});\n    this.setState(() => {\n      return { inGame: true, }\n    });\n  }\n\n  stopGame() {\n    clearInterval(this.timerID);\n    cancelAnimationFrame(this.animationID);\n    this.setState(() => {\n      return { inGame: false, }\n    });\n  }\n\n  //React own methods\n  componentDidMount() {\n    window.addEventListener('keyup',   this.handleKeys.bind(this, false));\n    window.addEventListener('keydown', this.handleKeys.bind(this, true));\n    // window.addEventListener('resize',  this.handleResize.bind(this, false));\n    this.setState(() => {\n      return { inGame: \"loading\", }\n    });\n    this.defineEB();\n    this.createGalaxy(this.state.starList);\n    this.loadStage(\"Sol\");\n    this.makePsiEmitter();\n  }\n\n  componentWillUnmount() {\n    cancelAnimationFrame(this.animationID);\n  }\n\n  //just testing\n  // async nextFrame(t) {\n  //   return new Promise(resolve => {\n  //     requestAnimationFrame((t) => {this.update(t)})\n  //   })\n  // }\n\n  async update(t) {\n    //animInterval is the framerate setting, only do stuff if it's exceeded\n    let delta = t - this.state.ts;\n    if (delta > animInterval) {\n      //tick\n      this.setState((prevState) => {\n        return {\n          ts: t - (delta % animInterval),\n          tick: prevState.tick + 1,\n          mouseTick: prevState.mousedown ? prevState.mouseTick+1 : 0,\n          mouseReleased: !prevState.mousedown&&prevState.mouseTick>0 ? true : false,\n          // keysReleased: !prevState.keydown&&prevState.keyTick>0 ? true : false,\n        }\n      });\n      //physics\n      if (this.state.world.pendingBodies.length>0) {\n        this.updatePlanets();\n      };\n      if (this.state.world.pendingStructures.length>0) {\n        this.updateStructures();\n      };\n      this.planetMotion();\n      for (let layer of this.state.world.structures) {\n        if (layer) {\n          layer.moveSegments();\n        }\n      }\n      this.moveBall();\n      //graphics\n      if (this.state.tick%50===0&&this.state.proton.psiEmitter.particles.length>8) {\n        this.emitterParticleCheck(this.state.proton.psiEmitter,this.state.world.bodies[0],4);\n      }\n      if (this.psiBlast>0) {\n        this.psiBlast--;\n      }\n      if (this.state.mousedown||this.state.beamPhase) {\n        this.beamBlastPower();\n      }\n      this.economyUpdate()\n      //return\n      // if (this.state.inGame === true) {\n      //   return this.animationID = requestAnimationFrame((t) => {this.update(t)});\n      // }\n    }\n    //loop on\n    if (this.state.inGame === \"loading\") {\n      console.log(\"loading\")\n    }\n    if (this.state.inGame === true) {\n      return this.animationID = requestAnimationFrame((t) => {this.update(t)});\n      // return this.animationID = await this.nextFrame(t);\n    }\n  }\n\n  render() {\n    //UI elements\n    const ui = {\n      tick: this.state.tick,\n      ts: this.state.ts,\n      inGame: this.state.inGame,\n      currentScore: this.state.currentScore,\n      stage: this.state.world.stage,\n      ball: this.state.ball,\n      resources: this.state.resources,\n      mousedown: this.mousedown,\n    };\n    const stage = this.state.world.stage;\n    const starTravelList = this.makeMapInterface(ui);\n    const bDatabase = {...this.state.world.bDatabase}\n    const planetList = bDatabase[stage]&&bDatabase[stage].length>0?bDatabase[stage].slice(1).map(\n      (planet) =>\n      <PlanetButton onClick={this.handlePlanetToggle} body={planet} key={planet.data.name}/>\n    ):\n    null;\n    const sDatabase = {...this.state.world.sDatabase}\n    const structList = sDatabase[stage]?sDatabase[stage].map(\n      (struct) =>\n      <StructureButton onClick={this.handleStructureToggle} struct={struct} key={struct.data.name}/>\n    ):\n    null;\n    const selectionInfo = this.state.selectedObj?\n    <PlanetInfoBox style={{ color: '#05051A', backgroundColor: '#DACFDA', textAlign:'left', listStyle:'none', padding:'0.4em 0.6em',margin:'0.5em auto',minWidth:'30%',minHeight:\"6em\"}} obj={this.state.selectedObj} fBuild={this.handlePlanetBuild}/>:\n    <span style={{minWidth:'30%',minHeight:\"6em\",margin:'0.5em auto'}}>{`Click on an in-system body for an info box`}</span>;\n    const controlButtons = this.makeControlButtons();\n    const canvasCheck = this.state.world.bodies[0]?\n    <GameCanvas onMouseDown={this.mousedownHandler} onMouseUp={this.mouseupHandler} onMouseMove={this.mousemoveHandler} style={{ background: \"#36454F\" }} psiBlast={this.psiBlast} {...this.state} />\n    :null;\n\n    return (\n      <div className=\"showcase\">\n      {canvasCheck}\n      <GUIWrap ui={ui}>\n      <Modal\n      isOpen={this.state.showModal}\n      contentLabel=\"onRequestClose Example\"\n      onRequestClose={this.handleCloseModal}\n      shouldCloseOnOverlayClick={true}\n      style={{ content: {\n        backgroundColor: '#30405E',\n        maxWidth: '30%'\n      } }}\n      ui={ui}>\n      <h2 style={{fontColor: '#C0C0EE', margin:'0.5em', textAlign:'center'}}>Galaxy map</h2>\n      <ButtonBlock ui={ui}>\n      {starTravelList}\n      </ButtonBlock>\n      <button style={{backgroundColor: '#30405E', padding:'0.2em', margin:'2em 0.5em 0.5em'}} onClick={this.handleCloseModal}>Close</button>\n      </Modal>\n      <StatsDisplay ui={ui} />\n      <p>WASD to accelerate. Click, hold and release for a homing beam blast.</p>\n      <Controls ui={ui}>\n      <ButtonBlock ui={ui}>\n      {controlButtons}\n      </ButtonBlock>\n      <ButtonBlock ui={ui}>\n      {structList}\n      </ButtonBlock>\n      <ButtonBlock ui={ui}>\n      {planetList}\n      </ButtonBlock>\n      </Controls>\n      <button onClick={this.handleOpenModal} style={{fontSize:'1.3em',alignSelf:'center',backgroundColor: '#30405E', padding:'0.5em',margin:'0.6em auto',borderRadius:'1px'}}>GALAXY MAP</button>\n      <img src={particle} alt=\"\" width=\"32\" height=\"32\" />\n      {selectionInfo}\n      </GUIWrap>\n      </div>\n    );\n  };\n};\n\n//interface\nconst GUIWrap = ({ ui, children }) => (\n  <div className=\"game-interface\">\n  {children}\n  </div>\n);\nconst StatsDisplay = ({ ui }) => (\n  <div className=\"interface-element\" style={{fontSize:\"1.1em\",margin:'0.2em auto 0.2em 2em',width:\"100%\",padding:\"0.1em\",transitionDuration:'0',display:\"block\"}}>\n  <p style={{textAlign:'left'}}>{`Stage: ${ui.stage}`}</p>\n  <p style={{textAlign:'left'}}>{`Stable matter: ${ui.resources.matter} (+${ui.resources.mInc}) || Stable energy: ${ui.resources.energy} (+${ui.resources.eInc}) || Dark matter: 0 || Dark energy: 0`}</p>\n  <p style={{textAlign:'left'}}>{`Concentration: ${ui.resources.psi} (+${ui.resources.psiInc}) || Flux: ${ui.resources.psiFlux} || Choir: ${ui.resources.psiChoir} || Communion: ${ui.currentScore}`}</p>\n  </div>\n);\n\nconst PlanetInfoBox = ({ style, obj, fBuild }) => (\n  <section style={style}>\n  <ul style={{minWidth:\"15em\"}}>\n  <li>{`Name: ${obj.name}`}</li>\n  <li>{`Mass: ${obj.mass}`}</li>\n  <li>{`Coordinates: X ${obj.x.toFixed(0)}|| Y ${obj.y.toFixed(0)}`}</li>\n  <li>{`Type: ${obj.type}`}</li>\n  <li>{`Shield power: ${obj?obj.status?obj.status.shield?obj.status.shield:0:0:0}`}</li>\n  <li>{`Psychic uplink: ${obj?obj.status?obj.status.uplink?obj.status.uplink:0:0:0}`}</li>\n  </ul>\n  <span>Buildings:</span>\n  {\n    (() => {\n      const bList = obj.status.buildings.map(\n        (b) => (\n          <li>{`${b.name}: lvl ${b.lvl}`}</li>\n        )\n      )\n      return (\n        <ul style={{minWidth:\"5em\"}}>\n        {bList}\n        </ul>\n      );\n    })()\n  }\n  <button style={{fontSize: \"0.8em\",padding:\"0.1em\",margin:\"0.2em\"}} onClick={fBuild.bind(this,0)} id={`${obj.name}`}>CHARGE SHIELD</button>\n  <button style={{fontSize: \"0.8em\",padding:\"0.1em\",margin:\"0.2em\"}} onClick={fBuild.bind(this,1)} id={`${obj.name}`}>Power grid</button>\n  <button style={{fontSize: \"0.8em\",padding:\"0.1em\",margin:\"0.2em\"}} onClick={fBuild.bind(this,2)} id={`${obj.name}`}>Ansible</button>\n  <button style={{fontSize: \"0.8em\",padding:\"0.1em\",margin:\"0.2em\"}} onClick={fBuild.bind(this,3)} id={`${obj.name}`}>Choir relay</button>\n  </section>\n);\n\nconst Controls = ({ children }) => (\n  <div className=\"game-controls\" style={{padding:'0.1em',margin:'0.1em'}}>\n  {children}\n  </div>\n);\nconst ButtonBlock = ({ ui, children }) => (\n  <div className=\"interface-element\">\n  {children}\n  </div>\n);\nconst Button = ({ onClick, text, style, id }) => (\n  <button onClick={onClick} type=\"button\" style={style} id={id}>\n  {text}\n  </button>\n);\nconst StarButton = ({ onClick, star, ui }) => (\n  <button onClick={onClick} type=\"button\" style={ui.stage===star?{backgroundColor: '#DD1133'}:{backgroundColor: '#4422EE'}} id={star} >\n  Load system: {star}\n  </button>\n);\nconst PlanetButton = ({onClick, body}) => (\n  <button onClick={onClick} style={{backgroundColor: `${shadeColor(body.data.hue,-20)}`}} id={body.data.name}>Toggle planet: {body.data.name}</button>\n);\nconst StructureButton = ({onClick, struct}) => (\n  <button onClick={onClick} style={{backgroundColor: `${shadeColor(struct.data.hue,-40)}`}} id={struct.data.name}>Toggle structure: {struct.data.name}</button>\n);\n\n//planet data\nconst marsData = {\n  size: 9,\n  orbitX: 200,\n  orbitY: 160,\n  rot: 200,\n  speed: -1.5,\n  mass: 100,\n  hue: \"#ff4336\",\n  glow: 0.8,\n  angle: 0,\n  name: \"Mars\",\n}\n\nconst phobosData = {\n  size: 6,\n  orbitX: 35,\n  orbitY: 32,\n  rot: 100,\n  speed: 1.5,\n  mass: 50,\n  hue: \"#EE1111\",\n  glow: 0.6,\n  angle: 40,\n  name: \"Phobos\",\n}\n\nconst venusData = {\n  size: 12,\n  orbitX: 105,\n  orbitY: 90,\n  rot: 205,\n  speed: 1,\n  mass: 165,\n  hue: \"#00A86B\",\n  glow: 0.8,\n  angle: 10,\n  name: \"Venus\",\n}\n\nconst earthData = {\n  size: 11,\n  orbitX: 155,\n  orbitY: 140,\n  rot: 20,\n  speed: 1,\n  mass: 150,\n  hue: \"#007FFF\",\n  glow: 1.2,\n  angle: 20,\n  name: \"Earth\",\n}\n\nconst solData = {\n  size: 19,\n  orbitX: 0,\n  speed: 0,\n  mass: 220,\n  hue: \"#FFCC33\",\n  glow: 2.5,\n  angle: 0,\n  name: \"Sol\",\n}\n\nconst saturnData = {\n  size: 14,\n  orbitX: 310,\n  speed: 0.5,\n  mass: 190,\n  hue: \"#d9b47d\",\n  glow: 1,\n  angle: 210,\n  name: \"Saturn\",\n}\n\nfunction rngBody(seed, type=\"planet\", scale=1, rstate=false) {\n  let rng = seedrandom(seed, {state: rstate})\n  if (type===\"star\") {\n    return {\n      orbitX: 0,\n      speed: 0,\n      size: Math.floor((rng.quick()*17+10)*scale),\n      mass: Math.floor((rng.quick()*200+60)*scale),\n      hue: \"#\"+((rng.int32().toString(16)).slice(-6)),\n      glow: 1.5,\n      name: seed+\" Primary\",\n      rngstate: rstate?rng.state:null,\n    }\n  }\n  let ox = Math.floor(rng.quick()*300*Math.pow(scale, 0.5));\n  return {\n    orbitX: ox,\n    orbitY: ox-Math.floor(3+rng.quick()*15*Math.pow(scale, 2.5)),\n    rot: Math.floor(330*rng.quick()),\n    angle: Math.floor(330*rng.quick()),\n    speed: +((rng.quick()*1.5+0.3)/scale).toFixed(1),\n    size: Math.floor((rng.quick()*12+4)*Math.pow(scale, 1.25)),\n    mass: Math.floor((rng.quick()*150+40)*scale),\n    hue: shadeColor(\"#\"+((rng.int32().toString(16)).slice(-6)),20),\n    glow: Math.floor(20*rng.quick())/20,\n    name: seed,\n    rngstate: rstate?rng.state:null,\n  }\n}\n\nclass Body {\n  constructor(data, parent=null) {\n    this.data = data;\n    this.parent = parent;\n    this.xPar = this.parent ? this.parent.x : data.xPar||350;\n    this.yPar = this.parent ? this.parent.y : data.yPar||350;\n    this.size = data.size||15;\n    this.orbitX = data.orbitX||0;\n    this.orbitY = data.orbitY||this.orbitX;\n    this.type = data.orbitX>0 ? \"planet\" : \"star\";\n    this.rot = data.rot||0;\n    if (this.orbitX!==this.orbitY) {\n      this.e = Math.sqrt(1 - (Math.pow(this.orbitY, 2)/Math.pow(this.orbitX, 2)));\n      this.pfdist = new Victor(this.orbitX*this.e, 0)\n      this.pfdist.rotateDeg(this.rot);\n      this.pf = {\n        x: this.xPar + this.pfdist.x,\n        y: this.yPar + this.pfdist.y,\n      }\n      this.per = this.orbitX-this.orbitX*this.e;\n      this.aph = this.orbitX+this.orbitX*this.e;\n    }\n    this.speed = data.speed||0;\n    this.speedWarp = 0;\n    this.mass = data.mass||0;\n    this.hue = data.hue||\"#FFFF00\";\n    this.glow = data.glow||0;\n    this.name = data.name||\"Unknown\";\n    this.angle = data.angle||0;\n    this.dir = this.speed>0?1:-1;\n    this.x = this.xPar + this.orbitX;\n    this.y = this.yPar + this.orbitY;\n    this.dx = 0;\n    this.dy = 0;\n    this.coll = 0;\n    this.pullTick = 0;\n    console.log(\"creating body: \"+this.name);\n    this.rngstate = data.rngstate||0;\n  }\n\n  getsPulled(force, target, tick=0) {\n    let dist = objectDistance(this, target);\n    let fade = 1+(tick*0.05);\n    this.speedWarp = (force*200/this.mass)/(Math.pow(dist * 0.5, 1.1)*fade);\n    if (dist > this.size*fade)  {\n      this.pullTick = tick*10; //for sfx such as beams\n      this.dx -= force*towardsBody(this, target).x/(Math.pow(dist * 0.04, 1.1)*fade);\n      this.dy -= force*towardsBody(this, target).y/(Math.pow(dist * 0.04, 1.1)*fade);\n    }\n  }\n\n  movePlanet() {\n    this.angle += this.orbitX===this.orbitY ?\n    (Math.acos(1 - Math.pow((this.speed/(1+this.speedWarp))/this.orbitX, 2)/2)%Math.PI*2)*this.dir :\n    (Math.acos(1 - Math.pow((this.speed*(1+this.e*Math.cos(this.angle))/(1+this.speedWarp))/this.orbitX, 2)/2)%Math.PI*2)*this.dir;\n\n    if (this.parent) {\n      this.xPar = this.parent.x;\n      this.yPar = this.parent.y;\n      if (this.orbitX!==this.orbitY) {\n        this.xPar -= this.pfdist.x;\n        this.yPar -= this.pfdist.y;\n      }\n    }\n    if (this.orbitX===this.orbitY) {\n      //circular orbit motion\n      this.x = this.xPar + this.orbitX * Math.cos(this.angle) + this.dx;\n      this.y = this.yPar + this.orbitY * Math.sin(this.angle) + this.dy;\n    }\n    else {\n      //elliptical orbit motion\n      let el = new Victor(this.orbitX * Math.cos(this.angle), this.orbitY * Math.sin(this.angle))\n      el.rotateDeg(this.rot)\n      this.x = this.xPar + el.x + this.dx;\n      this.y = this.yPar + el.y + this.dy;\n    }\n    if (this.dx) {\n      this.dx = Math.abs(this.dx)>1 ? this.dx*0.99 : 0;\n    }\n    if (this.dy) {\n      this.dy = Math.abs(this.dy)>1 ? this.dy*0.99 : 0;\n    }\n    if (this.speedWarp) {\n      this.speedWarp = this.speedWarp>0.1 ? this.speedWarp*0.8 : 0;\n    }\n    if (this.coll) {\n      this.coll--;\n    }\n    if (this.pullTick) {\n      this.pullTick--;\n    }\n  };\n}\n\n//structure data\nconst rs1 = { numSeg: 5, gap: 0.35, radius: 190, speed: -1.4, origin: {x: 350, y: 350}, width: 16, hue: \"#DF70FF\", name: \"S1\"};\nconst rs2 = { numSeg: 12, gap: 0.4, radius: 320, speed: 0.7, origin: {x: 350, y: 350}, width: 12, hue: \"#FFD5D0\", name: \"S2\"};\nconst rs3 = { numSeg: 2, gap: 0.2, radius: 50, speed: 0.5, origin: {x: 350, y: 350}, width: 10, hue: \"#86CFEF\", name: \"S3\"};\nconst rs4 = { numSeg: 18, gap: 0.1, radius: 250, speed: 0.4, origin: {x: 350, y: 350}, width: 12, hue: \"#FF6655\", name: \"S4\"};\n\nfunction rngStruct(seed, scale=1, rstate=false) {\n  let rand = seedrandom(seed, {state: rstate})\n  // let ox = Math.floor(rng.quick()*350*Math.pow(scale, 0.5));\n  return {\n    numSeg: Math.floor(1+12*rand.quick())*1,\n    arg: 0,\n    gap: Math.floor(50*rand.quick())/100,\n    speed: ((rand.quick()*1.5)/scale).toFixed(1)-1,\n    width: Math.floor((rand.quick()*15+4)*1),\n    radius: Math.floor((rand.quick()*280)+30*1),\n    hue: shadeColor(\"#\"+((rand.int32().toString(16)).slice(-6)),30),\n    glow: Math.floor(20*rand.quick())/15,\n    name: seed,\n    rngstate: rstate?rand.state:null,\n    origin: {x: 350, y: 350},\n  }\n}\n\nclass ringStructure {\n  constructor({numSeg=5, gap=0.4, radius=240, speed=5, origin={x: 350, y: 350}, width=10, hue=\"#E0E0E0\", glow=1,name=\"(Unknown)\",arg=0}={}) {\n    this.numSeg = numSeg;\n    this.arg = arg;\n    this.gap = gap;\n    this.radius = radius;\n    this.speed = speed;\n    this.dir = speed<0?-1:1;\n    this.origin = origin;\n    this.width = width;\n    this.hue = hue;\n    this.glow = 0.5;\n    this.regen = 3;\n    this.segments = [];\n    this.vulnSeg = [];\n    this.name = name;\n    this.arcLength = (Math.PI*2*(1-gap))/numSeg;\n  }\n\n  addSegments(openings=0) {\n    let arg = this.dir===1?this.arg:this.arg-Math.PI*2;\n    let gap = this.gap;\n    let numSeg = this.numSeg;\n    let r = this.radius;\n    let origin = this.origin;\n    let width = this.width;\n    let hue = this.hue;\n    let glow = this.glow;\n    let dir = this.dir;\n    let arcLength = this.arcLength;\n    for (let i=0;i<numSeg;i++) {\n      let segment = {\n        a: arg,\n        b: arg + arcLength,\n        arcLength: arcLength,\n        randArc: _.random(arcLength*0.4,true),\n        r: r,\n        ac: arg%(Math.PI*2),\n        bc: (arg + arcLength)%(Math.PI*2),\n        dir: dir,\n        origin: origin,\n        width: width,\n        hue: i===0?\"#4DEEE4\":hue,\n        glow: i===0?glow*5:glow,\n        health: 4,\n        phase: 0,\n        index: i,\n        x: null,\n        y: null\n      };\n      this.segments.push(segment);\n      arg += (Math.PI*2)/numSeg;\n    }\n    for (let i=0;i<openings;i++) {\n      this.destroyRandom();\n    }\n  }\n\n  destroySegment(seg) {\n    const destroy = this.segments.filter(item => item !== seg);\n    this.segments = destroy;\n  }\n\n  destroyRandom() {\n    let rand = this.segments[_.random(this.segments.length)-1]\n    this.destroySegment(rand);\n  }\n\n  moveSegments() {\n    let phase = Math.floor(Math.abs(Math.sin((this.segments[0].a+Math.PI*2)%(Math.PI*2))*10000));\n    let int = phase%150;\n    for (let seg of this.segments) {\n      if (this.speed>0) {\n        seg.a += Math.PI*2*0.001*this.speed;\n        seg.ac = (Math.abs(seg.a)+Math.PI*2)%(Math.PI*2);\n        seg.b += Math.PI*2*0.001*this.speed;\n        seg.bc = (Math.abs(seg.b)+Math.PI*2)%(Math.PI*2);\n      } else if (this.speed<0) {\n        seg.a += Math.PI*2*0.001*this.speed;\n\n        seg.b += Math.PI*2*0.001*this.speed;\n        seg.ac = Math.abs(seg.a-Math.PI*2)%(Math.PI*2);\n        seg.bc = Math.abs(seg.b-Math.PI*2)%(Math.PI*2);\n      }\n      // let phase = Math.floor(Math.abs(Math.sin((seg.a+Math.PI*2)%(Math.PI*2))*10000));\n      // let int = phase%150;\n      seg.glow = this.glow+(phase/300*this.glow)\n      // if (int===0) {\n      //\n      // }\n      // if (seg.health<3 && int<this.regen/_.clamp(seg.health+this.regen/2,1,5)) {\n\n\n      if (seg.health<4 && int<this.regen) {\n        seg.health+=seg.health<0?0.5:int<this.regen/2?1:0;\n        //experimental: update cartesian coords here\n        let tc = Victor(seg.r,0);\n        seg.dir>0?tc.rotate(seg.a+(4*seg.arcLength/5)):tc.rotate(seg.b-(4*seg.arcLength/5));\n        seg.x = seg.origin.x+tc.x*0.97\n        seg.y = seg.origin.y+tc.y*0.97;\n        // console.log(seg.x+\" \"+seg.y);\n      }\n      if (seg.health<3&&!this.vulnSeg[seg.index]) {\n        this.vulnSeg[seg.index] = seg;\n        seg.hue = \"#EE444D\"\n      }\n      else if (seg.health>3&&this.vulnSeg[seg.index] === seg) {\n        this.vulnSeg[seg.index] = null;\n        seg.hue = this.hue;\n      }\n    }\n  }\n}\n\n//the canvas render is split into a dynamic wrapper and a nested non-updating actual canvas, idea by Phil Nash https://philna.sh/, elements from Reacteroids\nclass GameCanvas extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      zones: [],\n    }\n    this.saveContext = this.saveContext.bind(this);\n    this.saveOverlay = this.saveOverlay.bind(this);\n    //proton\n    this.tick = 1;\n    this.psiLevel = 0;\n    this.emitterList = [];\n  }\n\n  saveContext(canvas) {\n    this.protonCanvas = canvas;\n    this.ctx = canvas.getContext('2d');\n    this.width = this.ctx.canvas.width;\n    this.height = this.ctx.canvas.height;\n  }\n\n  saveOverlay(canvas) {\n    this.protonCanvas2 = canvas;\n    this.ctx2 = canvas.getContext('experimental-webgl');\n  }\n\n  componentDidMount() {\n    this.createProton();\n  }\n\n  createProton() {\n    this.proton = new Proton();\n    // const imageWidth = 342;\n    // const drawScopeWidth = 710;\n    // const rect = new Proton.Rectangle((this.protonCanvas.width - imageWidth) / 2, (this.protonCanvas.height - imageWidth) / 2, imageWidth, imageWidth);\n    // const rect2 = new Proton.Rectangle((this.protonCanvas.width - drawScopeWidth) / 2, 0, drawScopeWidth, this.protonCanvas.height);\n    // const rectZone = new Proton.RectZone(rect2.x, rect2.y, rect2.width, rect2.height);\n    // const zones = this.state.zones;\n    // this.emitterList[0].addBehaviour(this.customToZoneBehaviour(zones[0], zones[1], zones[2]));\n\n    // this.borderZoneBehaviour = new Proton.CrossZone(new Proton.RectZone(0, 0, this.protonCanvas.width, this.protonCanvas.height), 'bound');\n    // this.centerZone = new Proton.RectZone(this.width/2, this.height/2, this.props.world.bodies[0].size);\n    // this.centerBehaviour = new Proton.Repulsion(this.centerZone, 10, 30)\n    // this.randomBehaviour = new Proton.RandomDrift(5, 5, .05);\n    this.clickEmitter = this.createClickEmitter('#F8F8FF', '#F8F8FF', this.props.ball);\n    this.renderer = new Proton.CanvasRenderer(this.protonCanvas);\n    // this.renderer.onProtonUpdate = function() {\n    // TBD\n    // };\n    this.renderer.onParticleUpdate = (particle) => {\n      this.ctx.globalAlpha = 0.9;\n      // if (particle.radius>1) {\n      //   this.renderer.drawCircle(particle);\n      // }\n      this.ctx.beginPath();\n      this.ctx.strokeStyle = particle.color;\n      this.ctx.lineWidth = particle.energy*2+particle.radius/4;\n      this.ctx.moveTo(particle.old.p.x-particle.old.a.x*20, particle.old.p.y-particle.old.a.y*20);\n      this.ctx.lineTo(particle.p.x, particle.p.y);\n      this.ctx.closePath();\n      this.ctx.stroke();\n      this.ctx.globalAlpha = 1\n    };\n    this.proton.addRenderer(this.renderer);\n\n    this.proton2 = new Proton();\n    this.proton2.emitterList = [];\n    this.proton2.blastEmitters = [];\n    var rend2 = new Proton.WebGLRenderer(this.protonCanvas2);\n    rend2.blendFunc(\"SRC_ALPHA\", \"ONE\");\n    this.proton2.addRenderer(rend2);\n    // console.log(rend2);\n    // this.proton2.addEmitter(this.createOverlayEmitter());\n  }\n\n  createClickEmitter(color1, color2, target=null) {\n    var clickEmitter = new Proton.Emitter();\n    // let emitDirection  = Victor(target.x-this.protonCanvas.width/2, target.y-this.protonCanvas.height/2).verticalAngleDeg();\n    let centerZone = {\n      x: this.props.world.bodies[0].x||this.width/2,\n      y: this.props.world.bodies[0].y||this.height/2,\n    }\n    let centerBehaviour = new Proton.Repulsion(centerZone, 10, this.props.world.bodies[0].size*2||30)\n    let borderZoneBehaviour = new Proton.CrossZone(new Proton.RectZone(0, 0, this.protonCanvas.width, this.protonCanvas.height), 'bound');\n    let randomBehaviour = new Proton.RandomDrift(5, 5, .05);\n    clickEmitter.addBehaviour(randomBehaviour);\n    clickEmitter.addBehaviour(borderZoneBehaviour);\n    clickEmitter.addBehaviour(centerBehaviour);\n\n    clickEmitter.target = target;\n    clickEmitter.damping = 0.012;\n    clickEmitter.addInitialize(new Proton.Rate(40,0.025));\n    clickEmitter.addInitialize(new Proton.Mass(8));\n    clickEmitter.addInitialize(new Proton.Life(3))\n    clickEmitter.addInitialize(new Proton.Radius(1));\n    clickEmitter.currVelocity = new Proton.Velocity(2, new Proton.Span(0,360), 'polar');\n    clickEmitter.addInitialize(clickEmitter.currVelocity);\n    // if (target.vx && target.vy) {\n    //   clickEmitter.addInitialize(new Proton.Force(target.vx*120, target.vy*120))\n    // }\n    clickEmitter.addBehaviour(new Proton.Color(color1, color2));\n    clickEmitter.pointAttraction = new Proton.Attraction(target, 20, 600);\n    clickEmitter.addBehaviour(clickEmitter.pointAttraction);\n    clickEmitter.p.x = this.props.mouseObj.x;\n    clickEmitter.p.y = this.props.mouseObj.y;\n    this.proton.addEmitter(clickEmitter);\n    return clickEmitter;\n  }\n\n  componentDidUpdate() {\n    const bodies = this.props.world.bodies;\n    if (this.props.tick > this.tick) {\n      // this.ctx.save();\n      // this.updateWorld();\n      if (this.props.tick%10===0) {\n        this.updateWorld();\n        //I forgot what this was going to be\n        if (this.psiEmitter && this.props.psiBlast) {\n          this.psiLevel++;\n          this.psiEmitter.rate = this.psiLevel < 9 ?\n          new Proton.Rate(new Proton.Span(20+this.psiLevel*5, 25+this.psiLevel*8), this.psiLevel*0.25) :\n          new Proton.Rate(150, 4)\n          this.psiEmission();\n        }\n\n      }\n      this.proton2.update();\n      this.proton.update();\n\n      this.drawStructures();\n      for (let planet of bodies) {\n        if (planet) {\n          if (planet.status&&planet.status.uplink) {\n            this.drawConnect(planet, this.props.ball);\n          }\n          this.drawPlanet(planet);\n        }\n      }\n      this.drawBall();\n      this.drawScore();\n      if (this.props.beamPhase) {\n        switch (this.props.beamPhase) {\n          case 1: {\n            this.drawBeamPower(1);\n            break\n          }\n          case 2: {\n            this.drawBeamPower(2);\n            break\n          }\n          case 3: {\n            this.drawBeamPower(3);\n            break\n          }\n          default: {\n            break\n          }\n        }\n      }\n      // else if (this.proton2.emitters.length>0) {\n      //   for (let em of this.proton2.emitters) {\n      // this.proton2.removeEmitter(em)\n      // console.log(this.proton2)\n      //   }\n      // }\n      // this.ctx.restore();\n      this.mouseInput()\n      this.tick = this.props.tick;\n    }\n  }\n\n  mouseInput() {\n    let mt = this.props.mouseTick;\n    if (this.props.mousedown === true) {\n      //while mouse held down\n      if (mt % 2 === 0) {\n        // this.drawBeamPower(2);\n        if (mt % 20 === 0) {\n          for (let a of this.emitterList) {\n            if (a&&a.mouseAttract) {\n              a.mouseAttract.reset(this.props.mouseObj, 25, 600);\n            }\n          }\n          this.clickEmission();\n        }\n      }\n      // if (mt===1) {\n      //   this.drawBeamPower(1);\n      // }\n    } else {\n      if (this.mouseReleased === true) {\n        //when mouse released\n        // this.drawBeamPower(3)\n        for (let a of this.emitterList) {\n          if (a&&a.mouseAttract) {\n            a.mouseAttract.reset(this.props.mouseObj, 5, 300);\n          }\n        }\n      }\n    }\n  }\n\n  clickEmission() {\n    this.clickEmitter.p.x = this.props.mouseObj.x;\n    this.clickEmitter.p.y = this.props.mouseObj.y;\n    this.clickEmitter.pointAttraction.reset(this.props.ball, 20, 600)\n    // let emitDirection = Victor(-this.props.mouseObj.x+this.props.ball.x, -this.props.mouseObj.y+this.props.ball.y).verticalAngleDeg();\n    // console.log(emitDirection)\n    // this.clickEmitter.currVelocity.reset(4, new Proton.Span((emitDirection+180)%360-60, (emitDirection+180)%360+60), 'polar');\n    this.clickEmitter.emit('once');\n  }\n\n  psiEmission() {\n    console.log(\"psi emit\")\n    this.psiEmitter.p.x = this.props.ball.x;\n    this.psiEmitter.p.y = this.props.ball.y;\n    // this.psiEmitter.planetAttraction.reset(this.props.world.bodies[0], 25, 700);\n    let emitDirection = Victor(this.props.ball.x-this.protonCanvas.width/2, this.props.ball.y-this.protonCanvas.height/2).verticalAngleDeg();\n    this.psiEmitter.currVelocity.reset(4, new Proton.Span((emitDirection+180)%360-15, (emitDirection+180)%360+15), 'polar');\n    this.psiEmitter.emit('once');\n  }\n\n  updateWorld() {\n    if (this.props.mouseTick%5===0) {\n      this.updateEmitters();\n    }\n  }\n\n  updateEmitters() {\n    const bodies = this.props.world.bodies;\n    for (let body of bodies) {\n      if (body&&!this.emitterList[body.index]&&body.emitter) {\n        this.emitterList[body.index] = body.emitter;\n        this.proton.addEmitter(this.emitterList[body.index]);\n        this.emitterList[body.index].emit(this.emitterList[body.index].e);\n      }\n    }\n\n    //rewrite this garbage to get triggered by actual events and not check every damn time\n    for (let em of this.emitterList) {\n      if (em&&em.target&&!bodies[em.target]) {\n        this.proton.removeEmitter(em);\n        this.emitterList[em.target] = null;\n      }\n      else if (em&&em.target&&bodies[em.target]) {\n        em.p.x = bodies[em.target].x;\n        em.p.y = bodies[em.target].y;\n        if (bodies[em.target].coll%6===2) {\n          em.emit(em.e);\n        }\n        if (em.mouseAttract) {\n          em.mouseAttract.reset(this.props.mouseObj, 5, 300);\n        }\n        if (em.planetAttraction) {\n          // em.planetAttraction.reset(bodies[em.target], 15, 500);\n          em.planetAttraction.reset(bodies[em.target], em.planetAttraction.force/100, em.planetAttraction.radius);\n        }\n      }\n    }\n    for (let planet of bodies.slice(1)) {\n      //make a beam charge emitter\n      if (planet&&!this.proton2.emitterList[planet.index]) {\n        this.proton2.emitterList[planet.index] = this.createOverlayEmitter(0,planet.size,1,0.1,planet,this.props.mouseObj)\n        this.proton2.addEmitter(this.proton2.emitterList[planet.index])\n      }\n      //make a different one if star system changes\n      else if (planet&&this.proton2.emitterList[planet.index].origin.parent!==planet.parent) {\n        this.proton2.emitterList[planet.index].destroy()\n        this.proton2.removeEmitter(this.proton2.emitterList[planet.index])\n        this.proton2.emitterList[planet.index] = this.createOverlayEmitter(0,planet.size,1,0.1,planet,this.props.mouseObj)\n        this.proton2.addEmitter(this.proton2.emitterList[planet.index])\n      }\n    }\n    //if blasting, update target position\n    if (this.proton2.blastEmitters.length>0&&this.props.tick%60===0) {\n      for (let em of this.proton2.blastEmitters) {\n        if (em.particles.length>0) {\n        em.blastAttract.reset(em.target, 35, 600)\n        // console.log(em)\n        }\n      }\n    }\n\n    if (!this.psiEmitter&&this.props.proton.psiEmitter) {\n      this.psiEmitter = this.props.proton.psiEmitter;\n      this.proton.addEmitter(this.psiEmitter);\n    }\n    if (!this.coreEmitter&&this.props.proton.coreEmitter) {\n      this.coreEmitter = this.props.proton.coreEmitter;\n      this.proton.addEmitter(this.coreEmitter);\n    }\n    if (this.props.tick%500===0) {\n      this.coreEmitter.emit(this.coreEmitter.e);\n    }\n\n  }\n\n  drawConnect(origin, target) {\n    this.ctx.beginPath();\n    this.ctx.globalAlpha = origin.status.uplink?origin.status.uplink/100:0;\n    this.ctx.strokeStyle = '#4397DC';\n    this.ctx.lineWidth = 1;\n    this.ctx.setLineDash([40, 15]);\n    this.ctx.lineDashOffset = 20\n    this.ctx.moveTo(origin.x, origin.y);\n    this.ctx.lineTo(target.x, target.y);\n    this.ctx.closePath();\n    this.ctx.stroke();\n    this.ctx.shadowBlur = 0;\n    this.ctx.shadowColor = 0;\n    this.ctx.setLineDash([])\n    this.ctx.globalAlpha = 1\n  }\n\n  drawScore() {\n    const score = this.props.currentScore;\n    this.ctx.fillStyle = \"#F5F5F5\";\n    this.ctx.font = \"22px Arial\";\n    this.ctx.fillText(\"x\" + score, 10, 25);\n  }\n\n  drawBall(blur=1.5) {\n    const ball = this.props.ball;\n    const {x, y, vx, vy, size, color, glow} = ball;\n    const thrustLevel = Math.floor(ball.thrustLevel*10)\n    let power = thrustLevel?shadeColor(color,thrustLevel*6,thrustLevel*-10,thrustLevel*-15):color;\n    if (glow) {\n      this.ctx.shadowBlur = thrustLevel?glow*10+(Math.pow(thrustLevel*90,0.3)):glow*8;\n      this.ctx.shadowColor = power;\n    }\n    if (blur) {\n      this.ctx.beginPath();\n      this.ctx.globalAlpha = 0.25;\n      this.ctx.arc(x-(vx*blur), y-(vy*blur), size, 0, Math.PI * 2);\n      this.ctx.fillStyle = power;\n      this.ctx.fill();\n      this.ctx.closePath();\n      this.ctx.globalAlpha = 1;\n    }\n    this.ctx.beginPath();\n    this.ctx.arc(x, y, size, 0, Math.PI * 2);\n    this.ctx.fillStyle = color;\n    this.ctx.fill();\n    this.ctx.closePath();\n    this.ctx.shadowBlur = 0;\n    this.ctx.shadowColor = 0;\n  }\n\n  drawPlanet(p) {\n    //outlines the orbit\n    this.ctx.beginPath();\n    p.orbitX!==p.orbitY ?\n    this.ctx.ellipse(p.xPar, p.yPar, p.orbitX, p.orbitY, p.rot/360*(Math.PI*2), 0, Math.PI * 2, true) :\n    this.ctx.arc(p.xPar, p.yPar, p.orbitX, 0, Math.PI * 2, false);\n    this.ctx.lineWidth = 2;\n    this.ctx.globalAlpha = 0.4;\n    this.ctx.strokeStyle = \"#E0E0E0\";\n    this.ctx.closePath();\n    this.ctx.stroke();\n    //the planet itself\n    this.ctx.beginPath();\n    if (p.glow) {\n      this.ctx.shadowBlur = p.glow*10;\n      this.ctx.shadowColor = shadeColor(p.hue, 20);\n    }\n    this.ctx.globalAlpha = 1;\n    this.ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);\n    this.ctx.fillStyle = p.hue;\n    this.ctx.fill();\n    this.ctx.closePath();\n    if (p.status&&p.status.shield) {\n      // this.ctx.globalAlpha = 0.8;\n      this.ctx.shadowBlur = p.status.shield/50;\n      this.ctx.shadowColor = \"#2045FF\";\n      this.ctx.globalAlpha = 0.75;\n      // this.ctx.globalAlpha = 0.1+p.status.shield/200;\n      let sGrad = this.ctx.createLinearGradient(p.x-p.size, p.y-p.size, p.x+p.size, p.y+p.size)\n      sGrad.addColorStop(0,\"#FFFFFF\")\n      sGrad.addColorStop(p.status.shield/100,p.hue)\n      sGrad.addColorStop(1,p.hue)\n      this.ctx.beginPath();\n\n      this.ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);\n      this.ctx.fillStyle = sGrad;\n      this.ctx.fill();\n      this.ctx.closePath();\n    }\n    this.ctx.shadowBlur = 0;\n    this.ctx.shadowColor = 0;\n  };\n\n  drawStructures() {\n    const structures = this.props.world.structures;\n    const bodies = this.props.world.bodies;\n    for (let layer of structures) {\n      if (layer) {\n        for (let seg of layer.segments) {\n          if (seg.health>0) {\n            this.drawSegment(seg);\n            //pass to drawBeamPower here?\n            // if (seg.health<3) {\n            //   for (let body of bodies.slice(1)) {\n            //     this.drawBeam(seg,body)\n            //   }\n            // }\n          }\n        }\n      }\n    }\n  }\n\n  drawSegment(seg) {\n    this.ctx.beginPath();\n    if (seg.glow) {\n      this.ctx.shadowBlur = seg.glow*1;\n      this.ctx.shadowColor = shadeColor(seg.hue, 20);\n    }\n    this.ctx.globalAlpha = seg.health*0.25;\n    this.ctx.arc(seg.origin.x, seg.origin.y, seg.r, seg.a, seg.b, false);\n    this.ctx.lineWidth = seg.width;\n    this.ctx.strokeStyle = seg.hue;\n    this.ctx.stroke();\n    this.ctx.closePath();\n    this.ctx.globalAlpha = 1;\n    this.ctx.shadowBlur = 0;\n    this.ctx.shadowColor = 0;\n  }\n\n  drawBeamPower(phase=1) {\n    // let mouseObj = this.props.mouseObj;\n    if (phase===1) {\n      //begin charge\n      const bodies = this.props.world.bodies;\n      this.startBeamCharge();\n    }\n    else if (phase===2) {\n      //continue charge\n      this.feedBeamCharge();\n    }\n    else if (phase===3) {\n      //unleash charge\n      for (let em of this.proton2.emitterList) {\n        if (em) {\n          em.mouseAttract.reset(this.props.mouseObj, 20, 600);\n          em.p.x = em.origin.x;\n          em.p.y = em.origin.y;\n          em.stop();\n        }\n      }\n      this.drawBeamBlast(this.props.mouseObj)\n\n    }\n  }\n\n  startBeamCharge() {\n    const planets = this.props.world.bodies.slice(1);\n    // const mouseObj = this.props.mouseObj;\n    if (this.proton2.blastEmitters.length>0) {\n      for (let em of this.proton2.blastEmitters) {\n        em.destroy()\n        this.proton2.removeEmitter(em)\n      }\n      this.proton2.blastEmitters = [];\n    }\n\n    // if (this.proton2.blastEmitter) {\n    //   this.proton2.blastEmitter.destroy()\n    //   this.proton2.removeEmitter(this.proton2.blastEmitter)\n    //   this.proton2.blastEmitter = null;\n    // }\n    for (let planet of planets) {\n      if (planet && objectDistance(planet,this.props.mouseObj)<300) {\n        // if  (!this.proton2.emitters.includes(planet.chargeEmitter)) {\n        // if  (!this.proton2.emitterList[planet.index]) {\n        //   this.proton2.emitterList[planet.index] = this.createOverlayEmitter(0,planet.size,1,0.1,planet,this.props.mouseObj)\n        //   this.proton2.addEmitter(this.proton2.emitterList[planet.index])\n        // }\n        this.proton2.emitterList[planet.index].mouseAttract.reset(this.props.mouseObj, 20, 600);\n        this.proton2.emitterList[planet.index].p.x = planet.x;\n        this.proton2.emitterList[planet.index].p.y = planet.y;\n        this.proton2.emitterList[planet.index].emit()\n        // this.proton2.addEmitter(this.createOverlayEmitter(0,planet.size/10,1,0.05,planet,mouseObj))\n      }\n    }\n  }\n\n  feedBeamCharge() {\n    // const mouseObj = this.props.mouseObj;\n    for (let em of this.proton2.emitterList) {\n      if (em) {\n        em.mouseAttract.reset(this.props.mouseObj, 20, 600);\n        em.p.x = em.origin.x;\n        em.p.y = em.origin.y;\n        // em.emit('once');\n      }\n    }\n  }\n\n  drawBeamBlast(o) {\n    const structures = this.props.world.structures;\n    if (this.proton2.blastEmitters.length<3) {\n      let numBlasts = 0;\n      for (let layer of structures) {\n        if (layer) {\n          // for (let seg of layer.segments) {\n          for (let seg of layer.vulnSeg) {\n            if (seg&&seg.health>0) {\n              numBlasts++;\n              if (this.proton2.blastEmitters.length<numBlasts) {\n                //calculate location\n                // let tc = Victor(seg.r,0);\n                // seg.dir>0?tc.rotate(seg.a+(6*seg.arcLength/5)):tc.rotate(seg.b-(6*seg.arcLength/5));\n                // let target = {x: seg.origin.x+tc.x*0.97, y: seg.origin.y+tc.y*0.97};\n\n\n                //draw\n                this.proton2.blastEmitters[numBlasts-1] = this.createBlastEmitter(0,40,0.2,1,o,seg,50/this.props.beamBlast);\n                let em = this.proton2.blastEmitters[numBlasts-1]\n                // em.deadZone = em.addBehaviour(new Proton.CrossZone(new Proton.CircleZone(seg.x,seg.y,30),'dead'));\n                this.proton2.addEmitter(em);\n                em.emit(Math.abs(this.props.beamBlast/10))\n              }\n            }\n          }\n        }\n      }\n    }\n\n    // if (!this.proton2.blastEmitter) {\n    //   this.proton2.blastEmitter = this.createBlastEmitter(0,40,1,0.1,o,t)\n    //   this.proton2.addEmitter(this.proton2.blastEmitter)\n    //   this.proton2.blastEmitter.emit(Math.abs(this.props.beamBlast/10))\n    // }\n\n\n    // const tick = this.props.tick;\n    //\n    //\n    //\n    // let oc = Victor(o.x,o.y)\n    // let tc = Victor(t.r,0)\n    // t.dir>0?tc.rotate(t.a+(t.arcLength/2)):tc.rotate(t.b-(t.arcLength/2))\n    //\n    // this.ctx.beginPath();\n    // this.ctx.moveTo(o.x, o.y);\n    // this.ctx.lineTo(t.origin.x+tc.x*0.97, t.origin.y+tc.y*0.97);\n    // this.ctx.closePath();\n    // this.ctx.stroke();\n\n  }\n\n  createOverlayEmitter(angle=0,r=40,s1=1,s2=0.1,origin={x:350,y:350},target=null) {\n    let emitter = new Proton.Emitter();\n    emitter.rate = new Proton.Rate(4,.03);\n    // emitter.rate = new Proton.Rate(5,new Proton.Span(.02,.04));\n    emitter.origin = origin;\n    emitter.target = target;\n    emitter.addInitialize(new Proton.Mass(4));\n    emitter.addInitialize(new Proton.Life(1,2));\n    emitter.addInitialize(new Proton.Body([particle],32));\n    emitter.addInitialize(new Proton.Radius(r));\n    emitter.addInitialize(new Proton.V(0.5,angle,'polar'));\n\n    emitter.addBehaviour(new Proton.Alpha(0.5,0.75));\n    emitter.addBehaviour(new Proton.Color('#0029FF','#AA9AFF'));\n    // emitter.addBehaviour(new Proton.Color('#8F1580','#0029FF'));\n    emitter.addBehaviour(new Proton.Scale(s1,s2));\n    emitter.addBehaviour(new Proton.CrossZone(new Proton.RectZone(0,0,700,700),'dead'));\n    // emitter.addBehaviour(new Proton.CrossZone(new Proton.RectZone(this.props.ball.x-10,this.props.ball.y-10,this.props.ball.x+30,this.props.ball.y+30),'dead'));\n    emitter.mouseAttract = new Proton.Attraction(target, 15, 600);\n    emitter.addBehaviour(emitter.mouseAttract);\n    if (origin) {\n      emitter.p.x = origin.x;\n      emitter.p.y = origin.y;\n    }\n    else {\n      emitter.p.x = 350;\n      emitter.p.y = 350;\n    }\n    // emitter.emit();\n    // console.log(this.proton2)\n    return(emitter)\n  }\n\n  createBlastEmitter(angle=0,r=40,s1=1.5,s2=0.1,origin={x:350,y:350},target=null,rate=.02) {\n    let emitter = new Proton.Emitter();\n    emitter.rate = new Proton.Rate(5,new Proton.Span(.01,rate));\n    emitter.target = target;\n    emitter.addInitialize(new Proton.Mass(6));\n    emitter.addInitialize(new Proton.Life(1,2));\n    emitter.addInitialize(new Proton.Body([particle],32));\n    emitter.addInitialize(new Proton.Radius(r));\n    emitter.addInitialize(new Proton.V(0.5,angle,'polar'));\n    emitter.addBehaviour(new Proton.Alpha(0.5,0.75));\n    emitter.addBehaviour(new Proton.Color('#8F1580','#FEAEFF'));\n    emitter.addBehaviour(new Proton.Scale(s1,s2));\n    emitter.addBehaviour(new Proton.CrossZone(new Proton.RectZone(0,0,700,700),'bounce'));\n\n    emitter.blastAttract = new Proton.Attraction(target, 35, 600);\n    emitter.addBehaviour(emitter.blastAttract);\n    if (origin) {\n      emitter.p.x = origin.x;\n      emitter.p.y = origin.y;\n    }\n    else {\n      emitter.p.x = 350;\n      emitter.p.y = 350;\n    }\n\n    console.log(emitter)\n    return(emitter)\n\n  }\n\n  //to try later; random stuff from the examples gallery for proton.js\n  // setZones(img) {\n  //   let zones = this.state.zones;\n  //   for (let i of img) {\n  //     let imagedata = Proton.Util.getImageData(this.ctx, i, rect)\n  //     zones.push(new Proton.ImageZone(imagedata, rect.x, rect.y))\n  //     }\n  //   this.setState((prevState) => {\n  //     return {\n  //       zones: zones,\n  //     }\n  //   });\n  // }\n\n  // customToZoneBehaviour(zone1, zone2, zone3) {\n  //   return {\n  //     initialize: function(particle) {\n  //       particle.R = Math.random() * 10;\n  //       particle.Angle = Math.random() * Math.PI * 2;\n  //       particle.speed = Math.random() * (-1.5) + 0.75;\n  //       particle.zones = [zone1.getPosition().clone(), zone2.getPosition().clone(), zone3.getPosition().clone()];\n  //     },\n  //\n  //     applyBehaviour: function(particle) {\n  //       if (mouseTick % 2 != 0) {\n  //         particle.v.clear();\n  //         particle.Angle += particle.speed;\n  //         let index = (mouseTick % 6 + 1) / 2 - 1;\n  //         let x = particle.zones[index].x + particle.R * Math.cos(particle.Angle);\n  //         let y = particle.zones[index].y + particle.R * Math.sin(particle.Angle);\n  //         particle.p.x += (x - particle.p.x) * 0.05;\n  //         particle.p.y += (y - particle.p.y) * 0.05;\n  //       }\n  //     }\n  //   }\n  // }\n\n  //old\n  // drawBeam(t, o) {\n  //   const tick = this.props.tick;\n  //   this.ctx.lineCap = \"round\";\n  //\n  //   this.ctx.strokeStyle = '#84CFFA';\n  //   this.ctx.lineWidth = 5;\n  //   this.ctx.setLineDash([15, 20]);\n  //   this.ctx.lineDashOffset = 10+Math.floor((this.props.tick%50)/2)\n  //   let oc = Victor(o.x,o.y)\n  //   let tc = Victor(t.r,0)\n  //   t.dir>0?tc.rotate(t.a+(t.arcLength/2)):tc.rotate(t.b-(t.arcLength/2))\n  //\n  //\n  //   this.ctx.beginPath();\n  //   this.ctx.moveTo(o.x, o.y);\n  //   this.ctx.lineTo(t.origin.x+tc.x*0.97, t.origin.y+tc.y*0.97);\n  //   this.ctx.closePath();\n  //   this.ctx.stroke();\n  //\n  //   tc.rotateBy(t.randArc*t.dir*2)\n  //   this.ctx.moveTo(o.x, o.y);\n  //   this.ctx.beginPath();\n  //   this.ctx.lineTo(t.origin.x+tc.x*0.97, t.origin.y+tc.y*0.97);\n  //   this.ctx.closePath();\n  //   this.ctx.stroke();\n  //\n  //   tc.rotateBy(-t.randArc*t.dir*2)\n  //   this.ctx.moveTo(o.x, o.y);\n  //   this.ctx.beginPath();\n  //   this.ctx.lineTo(t.origin.x+tc.x*0.97, t.origin.y+tc.y*0.97);\n  //   this.ctx.closePath();\n  //   this.ctx.stroke();\n  //\n  //   this.ctx.lineCap = \"butt\";\n  //   this.ctx.shadowBlur = 0;\n  //   this.ctx.shadowColor = 0;\n  //   this.ctx.setLineDash([])\n  //\n  // }\n\n  render() {\n    return (\n      <PureCanvas width={this.props.screen.width} height={this.props.screen.height} contextRef={this.saveContext} contextRef2={this.saveOverlay} onMouseDown={this.props.onMouseDown} onMouseUp={this.props.onMouseUp} onMouseMove={this.props.onMouseMove} style={this.props.style}/>\n    )\n  }\n}\n\nclass PureCanvas extends React.Component {\n  shouldComponentUpdate() {\n    return false;\n  }\n  render() {\n    return (\n      <div>\n      <canvas id=\"canvas-overlay\"\n      width={this.props.width}\n      height={this.props.height}\n      ref={node =>\n        node ? this.props.contextRef2(node) : null\n      } onMouseDown={this.props.onMouseDown} onMouseUp={this.props.onMouseUp} onMouseMove={this.props.onMouseMove}\n      />\n      <canvas id=\"myCanvas\"\n      width={this.props.width}\n      height={this.props.height}\n      ref={node =>\n        node ? this.props.contextRef(node) : null\n      } onMouseDown={this.props.onMouseDown} onMouseUp={this.props.onMouseUp} onMouseMove={this.props.onMouseMove} style={this.props.style}\n      />\n      </div>\n    );\n  }\n}\n\nclass ErrorBoundary extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { hasError: false };\n  }\n\n  static getDerivedStateFromError(error) {\n    // Update state so the next render will show the fallback UI.\n    return { hasError: true };\n  }\n\n  componentDidCatch(error, info) {\n    // You can also log the error to an error reporting service\n    console.log(error, info);\n    this.setState({\n      error: error,\n      info: info\n    });\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return (\n        <div>\n        <h1>Something went wrong.</h1>\n        <details style={{ whiteSpace: 'pre-wrap' }}>\n        {this.state.error && this.state.error.toString()}\n        <br />\n        {this.state.info.componentStack}\n        </details>\n        </div>\n      )\n    }\n    return this.props.children\n  }\n}\n\nclass App extends Component {\n  render() {\n    return (\n      <ErrorBoundary>\n      <div className=\"App\">\n      <header className=\"header\">\n      <h1 className=\"header-name\">\n      Orbit game title\n      </h1>\n      </header>\n      <OrbitGame width=\"700\" height=\"700\"/>\n      <div className=\"extra\">\n      <span>v0.1.0 prototype||</span>\n      <a href=\"https://www.paypal.me/EstherFiddler\">Donate</a>\n      </div>\n      </div>\n      </ErrorBoundary>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}